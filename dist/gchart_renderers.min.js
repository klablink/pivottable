"use strict";!function(x){var t=(j,y)=>function(t,e){let a,r,o,i,n,l;null==(e=x.extend(!0,{},{localeStrings:{vs:"vs",by:"by"},gchart:{}},e)).gchart.width&&(e.gchart.width=window.innerWidth/1.4),null==e.gchart.height&&(e.gchart.height=window.innerHeight/1.4);var s=t.getRowKeys(),h=(0===s.length&&s.push([]),t.getColKeys());0===h.length&&h.push([]);let g=t.aggregatorName;t.valAttrs.length&&(g+=`(${t.valAttrs.join(", ")})`);var u=s.map(t=>t.join("-"));u.unshift("");let d=0;if("ScatterChart"===j){for(var c in r=[],t.tree){var p,v=t.tree[c];for(p in v)a=v[p],r.push([parseFloat(p),parseFloat(c),g+": \n"+a.format(a.value())])}(o=new google.visualization.DataTable).addColumn("number",t.colAttrs.join("-")),o.addColumn("number",t.rowAttrs.join("-")),o.addColumn({type:"string",role:"tooltip"}),o.addRows(r),i=t.colAttrs.join("-"),l=t.rowAttrs.join("-"),n=""}else{r=[u];for(var C of h){var w,A,f=[C.join("-")];d+=f[0].length;for(w of s)null!=(a=t.getAggregator(w,C)).value()?(A=a.value(),x.isNumeric(A)?f.push(A<1?parseFloat(A.toPrecision(3)):parseFloat(A.toFixed(3))):f.push(A)):f.push(null);r.push(f)}o=google.visualization.arrayToDataTable(r),n=l=g,""!==(i=t.colAttrs.join("-"))&&(n+=` ${e.localeStrings.vs} `+i);u=t.rowAttrs.join("-");""!==u&&(n+=` ${e.localeStrings.by} `+u)}let m={title:n,hAxis:{title:i,slantedText:50<d},vAxis:{title:l},tooltip:{textStyle:{fontName:"Arial",fontSize:12}}};"ColumnChart"===j&&(m.vAxis.minValue=0),"ScatterChart"===j?(m.legend={position:"none"},m.chartArea={width:"80%",height:"80%"}):2===r[0].length&&""===r[0][1]&&(m.legend={position:"none"}),m=x.extend(!0,{},m,e.gchart,y);const S=x("<div>").css({width:"100%",height:"100%"}),b=new google.visualization.ChartWrapper({dataTable:o,chartType:j,options:m});return b.draw(S[0]),S.bind("dblclick",function(){const t=new google.visualization.ChartEditor;return google.visualization.events.addListener(t,"ok",()=>t.getChartWrapper().draw(S[0])),t.openDialog(b)}),S};x.pivotUtilities.gchart_renderers={"Line Chart":t("LineChart"),"Bar Chart":t("ColumnChart"),"Stacked Bar Chart":t("ColumnChart",{isStacked:!0}),"Area Chart":t("AreaChart",{isStacked:!0}),"Scatter Chart":t("ScatterChart")}}(jQuery);
//# sourceMappingURL=gchart_renderers.min.js.map
