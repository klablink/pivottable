{"version":3,"file":"export_renderers.js","names":["$","pivotUtilities","export_renderers","TSVExport","pivotData","opts","colKey","r","defaults","localeStrings","extend","rowKeys","getRowKeys","length","push","colKeys","getColKeys","rowAttrs","colAttrs","result","row","_iterator","_createForOfIteratorHelper","_step","s","n","done","rowAttr","value","err","e","f","aggregatorName","_iterator2","_step2","join","_iterator3","_step3","rowKey","_iterator4","_step4","_iterator5","_step5","agg","getAggregator","text","_i","_result","css","width","window","height","jQuery"],"sources":["export_renderers.js"],"sourcesContent":["($ => $.pivotUtilities.export_renderers = { 'TSV Export'(pivotData, opts) {\n    let colKey, r;\n    const defaults = {localeStrings: {}};\n\n    opts = $.extend(true, {}, defaults, opts);\n\n    const rowKeys = pivotData.getRowKeys();\n    if (rowKeys.length === 0) { rowKeys.push([]); }\n    const colKeys = pivotData.getColKeys();\n    if (colKeys.length === 0) { colKeys.push([]); }\n    const {\n        rowAttrs\n    } = pivotData;\n    const {\n        colAttrs\n    } = pivotData;\n\n    const result = [];\n\n    let row = [];\n    for (let rowAttr of rowAttrs) {\n        row.push(rowAttr);\n    }\n    if ((colKeys.length === 1) && (colKeys[0].length === 0)) {\n        row.push(pivotData.aggregatorName);\n    } else {\n        for (colKey of colKeys) {\n            row.push(colKey.join('-'));\n        }\n    }\n\n    result.push(row);\n\n    for (let rowKey of rowKeys) {\n        row = [];\n        for (r of rowKey) {\n            row.push(r);\n        }\n\n        for (colKey of colKeys) {\n            const agg = pivotData.getAggregator(rowKey, colKey);\n            if (agg.value() != null) {\n                row.push(agg.value());\n            } else {\n                row.push('');\n            }\n        }\n        result.push(row);\n    }\n    let text = '';\n    for (r of result) {\n        text += r.join('\\t')+'\\n';\n    }\n\n    return  $('<textarea>').text(text).css({\n            width: ($(window).width() / 2) + 'px',\n            height: ($(window).height() / 2) + 'px'});\n}\n})(jQuery);\n"],"mappings":"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","ignoreList":[]}