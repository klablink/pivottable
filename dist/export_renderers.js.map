{"version":3,"file":"export_renderers.js","names":["$","pivotUtilities","export_renderers","TSV Export","pivotData","opts","colKey","r","defaults","localeStrings","extend","rowKeys","getRowKeys","length","push","colKeys","getColKeys","rowAttrs","colAttrs","result","row","rowAttr","aggregatorName","join","rowKey","agg","getAggregator","value","text","css","width","window","height","jQuery"],"sources":["export_renderers.js"],"sourcesContent":["($ => $.pivotUtilities.export_renderers = { 'TSV Export'(pivotData, opts) {\n    let colKey, r;\n    const defaults = {localeStrings: {}};\n\n    opts = $.extend(true, {}, defaults, opts);\n\n    const rowKeys = pivotData.getRowKeys();\n    if (rowKeys.length === 0) { rowKeys.push([]); }\n    const colKeys = pivotData.getColKeys();\n    if (colKeys.length === 0) { colKeys.push([]); }\n    const {\n        rowAttrs\n    } = pivotData;\n    const {\n        colAttrs\n    } = pivotData;\n\n    const result = [];\n\n    let row = [];\n    for (let rowAttr of rowAttrs) {\n        row.push(rowAttr);\n    }\n    if ((colKeys.length === 1) && (colKeys[0].length === 0)) {\n        row.push(pivotData.aggregatorName);\n    } else {\n        for (colKey of colKeys) {\n            row.push(colKey.join('-'));\n        }\n    }\n\n    result.push(row);\n\n    for (let rowKey of rowKeys) {\n        row = [];\n        for (r of rowKey) {\n            row.push(r);\n        }\n\n        for (colKey of colKeys) {\n            const agg = pivotData.getAggregator(rowKey, colKey);\n            if (agg.value() != null) {\n                row.push(agg.value());\n            } else {\n                row.push('');\n            }\n        }\n        result.push(row);\n    }\n    let text = '';\n    for (r of result) {\n        text += r.join('\\t')+'\\n';\n    }\n\n    return  $('<textarea>').text(text).css({\n            width: ($(window).width() / 2) + 'px',\n            height: ($(window).height() / 2) + 'px'});\n}\n})(jQuery);\n"],"mappings":";;AAAA,CAACA,CAAC,IAAIA,CAAC,CAACC,cAAc,CAACC,gBAAgB,GAAG;EAAE,YAAYC,CAACC,SAAS,EAAEC,IAAI,EAAE;IACtE,IAAIC,MAAM,EAAEC,CAAC;IACb,MAAMC,QAAQ,GAAG;MAACC,aAAa,EAAE,CAAC;IAAC,CAAC;IAEpCJ,IAAI,GAAGL,CAAC,CAACU,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEF,QAAQ,EAAEH,IAAI,CAAC;IAEzC,MAAMM,OAAO,GAAGP,SAAS,CAACQ,UAAU,CAAC,CAAC;IACtC,IAAID,OAAO,CAACE,MAAM,KAAK,CAAC,EAAE;MAAEF,OAAO,CAACG,IAAI,CAAC,EAAE,CAAC;IAAE;IAC9C,MAAMC,OAAO,GAAGX,SAAS,CAACY,UAAU,CAAC,CAAC;IACtC,IAAID,OAAO,CAACF,MAAM,KAAK,CAAC,EAAE;MAAEE,OAAO,CAACD,IAAI,CAAC,EAAE,CAAC;IAAE;IAC9C,MAAM;MACFG;IACJ,CAAC,GAAGb,SAAS;IACb,MAAM;MACFc;IACJ,CAAC,GAAGd,SAAS;IAEb,MAAMe,MAAM,GAAG,EAAE;IAEjB,IAAIC,GAAG,GAAG,EAAE;IACZ,KAAK,IAAIC,OAAO,IAAIJ,QAAQ,EAAE;MAC1BG,GAAG,CAACN,IAAI,CAACO,OAAO,CAAC;IACrB;IACA,IAAKN,OAAO,CAACF,MAAM,KAAK,CAAC,IAAME,OAAO,CAAC,CAAC,CAAC,CAACF,MAAM,KAAK,CAAE,EAAE;MACrDO,GAAG,CAACN,IAAI,CAACV,SAAS,CAACkB,cAAc,CAAC;IACtC,CAAC,MAAM;MACH,KAAKhB,MAAM,IAAIS,OAAO,EAAE;QACpBK,GAAG,CAACN,IAAI,CAACR,MAAM,CAACiB,IAAI,CAAC,GAAG,CAAC,CAAC;MAC9B;IACJ;IAEAJ,MAAM,CAACL,IAAI,CAACM,GAAG,CAAC;IAEhB,KAAK,IAAII,MAAM,IAAIb,OAAO,EAAE;MACxBS,GAAG,GAAG,EAAE;MACR,KAAKb,CAAC,IAAIiB,MAAM,EAAE;QACdJ,GAAG,CAACN,IAAI,CAACP,CAAC,CAAC;MACf;MAEA,KAAKD,MAAM,IAAIS,OAAO,EAAE;QACpB,MAAMU,GAAG,GAAGrB,SAAS,CAACsB,aAAa,CAACF,MAAM,EAAElB,MAAM,CAAC;QACnD,IAAImB,GAAG,CAACE,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE;UACrBP,GAAG,CAACN,IAAI,CAACW,GAAG,CAACE,KAAK,CAAC,CAAC,CAAC;QACzB,CAAC,MAAM;UACHP,GAAG,CAACN,IAAI,CAAC,EAAE,CAAC;QAChB;MACJ;MACAK,MAAM,CAACL,IAAI,CAACM,GAAG,CAAC;IACpB;IACA,IAAIQ,IAAI,GAAG,EAAE;IACb,KAAKrB,CAAC,IAAIY,MAAM,EAAE;MACdS,IAAI,IAAIrB,CAAC,CAACgB,IAAI,CAAC,IAAI,CAAC,GAAC,IAAI;IAC7B;IAEA,OAAQvB,CAAC,CAAC,YAAY,CAAC,CAAC4B,IAAI,CAACA,IAAI,CAAC,CAACC,GAAG,CAAC;MAC/BC,KAAK,EAAG9B,CAAC,CAAC+B,MAAM,CAAC,CAACD,KAAK,CAAC,CAAC,GAAG,CAAC,GAAI,IAAI;MACrCE,MAAM,EAAGhC,CAAC,CAAC+B,MAAM,CAAC,CAACC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAI;IAAI,CAAC,CAAC;EACrD;AACA,CAAC,EAAEC,MAAM,CAAC","ignoreList":[]}