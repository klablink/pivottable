{"version":3,"sources":["export_renderers.js"],"names":["$","pivotUtilities","export_renderers","TSV Export","pivotData","opts","extend","localeStrings","r","_step","rowKeys","getRowKeys","colKeys","length","push","getColKeys","rowAttrs","result","colAttrs","row","_iterator","_createForOfIteratorHelper","s","n","done","rowAttr","value","err","e","f","aggregatorName","_step2","_iterator2","colKey","join","_step3","_iterator3","_step4","rowKey","_iterator4","_step5","_iterator5","agg","getAggregator","text","_i","_result","css","width","window","height","jQuery"],"mappings":"ooCAAA,CAAA,SAACA,GAAKA,EAAEC,eAAeC,iBAAmB,CAAEC,aAAY,SAACC,EAAWC,GAIhEA,EAAOL,EAAEM,OAAO,CAAA,EAAM,GAFL,CAACC,cAAe,EAAE,EAECF,CAAI,EAHxC,IAAYG,EAmBgBC,EAdtBC,EAAUN,EAAUO,WAAW,EAE/BC,GADiB,IAAnBF,EAAQG,QAAgBH,EAAQI,KAAK,EAAE,EAC3BV,EAAUW,WAAW,GAGjCC,GAFmB,IAAnBJ,EAAQC,QAAgBD,EAAQE,KAAK,EAAE,EAGvCV,EADAY,UAMEC,GAFFb,EADAc,SAGW,IAEXC,EAAM,GAAGC,EAAAC,2BACOL,CAAQ,EAAA,IAA5B,IAAAI,EAAAE,EAAA,EAAA,EAAAb,EAAAW,EAAAG,EAAA,GAAAC,MAA8B,CAAA,IAArBC,EAAOhB,EAAAiB,MACZP,EAAIL,KAAKW,CAAO,CACpB,CAAC,CAAA,MAAAE,GAAAP,EAAAQ,EAAAD,CAAA,CAAA,CAAA,QAAAP,EAAAS,EAAA,CAAA,CACD,GAAwB,IAAnBjB,EAAQC,QAAwC,IAAtBD,EAAQ,GAAGC,OACtCM,EAAIL,KAAKV,EAAU0B,cAAc,MAC9B,CAAA,IACmBC,EADnBC,EAAAX,2BACYT,CAAO,EAAA,IAAtB,IAAAoB,EAAAV,EAAA,EAAA,EAAAS,EAAAC,EAAAT,EAAA,GAAAC,MAAKS,EAAMF,EAAAL,MACPP,EAAIL,KAAKmB,EAAOC,KAAK,GAAG,CAAC,CAC5B,CAAA,MAAAP,GAAAK,EAAAJ,EAAAD,CAAA,CAAA,CAAA,QAAAK,EAAAH,EAAA,CAAA,CACL,CAEAZ,EAAOH,KAAKK,CAAG,EAAE,IAESgB,EAFTC,EAAAf,2BAEEX,CAAO,EAAA,IAA1B,IAAA0B,EAAAd,EAAA,EAAA,EAAAa,EAAAC,EAAAb,EAAA,GAAAC,MAA4B,CAAA,IAERa,EAFXC,EAAMH,EAAAT,MACXP,EAAM,GAAGoB,EAAAlB,2BACCiB,CAAM,EAAA,IAAhB,IAAAC,EAAAjB,EAAA,EAAA,EAAAe,EAAAE,EAAAhB,EAAA,GAAAC,MAAKhB,EAAC6B,EAAAX,MACFP,EAAIL,KAAKN,CAAC,CACb,CAAA,MAAAmB,GAAAY,EAAAX,EAAAD,CAAA,CAAA,CAAA,QAAAY,EAAAV,EAAA,CAAA,CAAA,IAEqBW,EAFrBC,EAAApB,2BAEcT,CAAO,EAAA,IAAtB,IAAA6B,EAAAnB,EAAA,EAAA,EAAAkB,EAAAC,EAAAlB,EAAA,GAAAC,MAAwB,CACpB,IADCS,EAAMO,EAAAd,MACDgB,EAAMtC,EAAUuC,cAAcL,EAAQL,CAAM,EAC/B,MAAfS,EAAIhB,MAAM,EACVP,EAAIL,KAAK4B,EAAIhB,MAAM,CAAC,EAEpBP,EAAIL,KAAK,EAAE,CAEnB,CAAC,CAAA,MAAAa,GAAAc,EAAAb,EAAAD,CAAA,CAAA,CAAA,QAAAc,EAAAZ,EAAA,CAAA,CACDZ,EAAOH,KAAKK,CAAG,CACnB,CAAC,CAAA,MAAAQ,GAAAS,EAAAR,EAAAD,CAAA,CAAA,CAAA,QAAAS,EAAAP,EAAA,CAAA,CAED,IADA,IAAIe,EAAO,GACXC,EAAA,EAAAC,EAAU7B,EAAM4B,EAAAC,EAAAjC,OAAAgC,CAAA,GACZD,IADCpC,EAACsC,EAAAD,IACQX,KAAK,IAAI,EAAE,KAGzB,OAAQlC,EAAE,YAAY,EAAE4C,KAAKA,CAAI,EAAEG,IAAI,CAC/BC,MAAQhD,EAAEiD,MAAM,EAAED,MAAM,EAAI,EAAK,KACjCE,OAASlD,EAAEiD,MAAM,EAAEC,OAAO,EAAI,EAAK,IAAI,CAAC,CACpD,CACA,CAAC,EAAEC,MAAM","file":"export_renderers.min.js","sourcesContent":["($ => $.pivotUtilities.export_renderers = { 'TSV Export'(pivotData, opts) {\n    let colKey, r;\n    const defaults = {localeStrings: {}};\n\n    opts = $.extend(true, {}, defaults, opts);\n\n    const rowKeys = pivotData.getRowKeys();\n    if (rowKeys.length === 0) { rowKeys.push([]); }\n    const colKeys = pivotData.getColKeys();\n    if (colKeys.length === 0) { colKeys.push([]); }\n    const {\n        rowAttrs\n    } = pivotData;\n    const {\n        colAttrs\n    } = pivotData;\n\n    const result = [];\n\n    let row = [];\n    for (let rowAttr of rowAttrs) {\n        row.push(rowAttr);\n    }\n    if ((colKeys.length === 1) && (colKeys[0].length === 0)) {\n        row.push(pivotData.aggregatorName);\n    } else {\n        for (colKey of colKeys) {\n            row.push(colKey.join('-'));\n        }\n    }\n\n    result.push(row);\n\n    for (let rowKey of rowKeys) {\n        row = [];\n        for (r of rowKey) {\n            row.push(r);\n        }\n\n        for (colKey of colKeys) {\n            const agg = pivotData.getAggregator(rowKey, colKey);\n            if (agg.value() != null) {\n                row.push(agg.value());\n            } else {\n                row.push('');\n            }\n        }\n        result.push(row);\n    }\n    let text = '';\n    for (r of result) {\n        text += r.join('\\t')+'\\n';\n    }\n\n    return  $('<textarea>').text(text).css({\n            width: ($(window).width() / 2) + 'px',\n            height: ($(window).height() / 2) + 'px'});\n}\n})(jQuery);\n"]}