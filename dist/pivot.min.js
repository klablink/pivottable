"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var r,n,a,o,l="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(l)return n=!(r=!0),{s:function(){l=l.call(t)},n:function(){var t=l.next();return r=t.done,t},e:function(t){n=!0,a=t},f:function(){try{r||null==l.return||l.return()}finally{if(n)throw a}}};if(Array.isArray(t)||(l=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return l&&(t=l),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,l,i=[],s=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);s=!0);}catch(t){u=!0,a=t}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(ut){function rt(t,e,r,n){var a,o=ut(t).closest("table"),l=e?"rowSpan":"colSpan",i=e?1:Math.max(1,this.aggregator.length),i=[t[l],null!=t._span?t._span:i],s=(t._span=i[0],t[l]=i[1],t[l]-t._span),u=A(r,n);for(a in u){var c,d=u[a];if(1===(c=T(o,e,d)[0])[l]){c._span+=s;break}c[l]+=s}return at(t,e,r,n,c)}var s="en";function o(e){var r="";if(e)try{r=new Date(e).toLocaleDateString(s,{year:"numeric",month:"2-digit",day:"2-digit"})}catch(t){r=e}return r}function t(r){return r=ut.extend({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},r),function(t,e){return void 0===t?"":e===ut.pivotUtilities.fieldsType.integer?t:e===ut.pivotUtilities.fieldsType.date?o(t):ut.isFunction(e)?e(t):isNaN(t)||!isFinite(t)?"":(e=function(t,e,r){for(var t=(t+="").split("."),n=t[0],r=1<t.length?r+t[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1"+e+"$2");return n+r}((r.scaler*t).toFixed(r.digitsAfterDecimal),r.thousandsSep,r.decimalSep),""+r.prefix+e+r.suffix)}}var nt={text:function(t,e,r,n){var a=this.fieldsType;return void 0===t&&(t=""),e&&a[e]===ut.pivotUtilities.fieldsType.date?document.createTextNode(o(t)):document.createTextNode(t)},byType:function(r,n){return function(t,e){return(r[e]||n||nt.text).apply(this,arguments)}}},e=t(),r=t({digitsAfterDecimal:0}),n=t({digitsAfterDecimal:1,scaler:100,suffix:"%"}),u={count:function(n){return null==n&&(n=r),function(){return function(t,e,r){return{count:0,push:function(){return this.count++},value:function(){return this.count},format:n}}}},uniques:function(a,o){return null==o&&(o=r),function(){var n=_slicedToArray(arguments.length<=0?void 0:arguments[0],1)[0];return function(t,e,r){return{attr:n,uniq:[],push:function(t){if(!this.uniq.includes(t[n]))return this.uniq.push(t[n])},value:function(){return a(this.uniq)},format:o,numInputs:null!=n?0:1}}}},sum:function(a){return null==a&&(a=e),function(){var n=_slicedToArray(arguments.length<=0?void 0:arguments[0],1)[0];return function(t,e,r){return{attr:n,sum:0,push:function(t){if(!isNaN(parseFloat(t[n])))return this.sum+=parseFloat(t[n])},value:function(){return this.sum},format:a,numInputs:null!=n?0:1}}}},extremes:function(o,l){return null==l&&(l=e),function(){var n=_slicedToArray(arguments.length<=0?void 0:arguments[0],1)[0],a=(arguments.length<=1?void 0:arguments[1])||{};return function(t,e,r){return{attr:n,val:null,sorter:gt(null!=t?t.sorters:void 0,n),push:function(t){var e,t=t[n],r=this.val;(null==(e=a.rendererOptions)?void 0:e.fieldsType[n])===ut.pivotUtilities.fieldsType.date?(t=new Date(t),r=r?new Date(r):t):["min","max"].includes(o)&&(t=parseFloat(t)),["min","max"].includes(o)&&!isNaN(t)&&(this.val=Math[o](t,null!=r?r:t)),"first"===o&&this.sorter(t,null!=r?r:t)<=0&&(this.val=t),"last"===o&&0<=this.sorter(t,null!=r?r:t)&&(this.val=t),(null==(e=a.rendererOptions)?void 0:e.fieldsType[n])===ut.pivotUtilities.fieldsType.date&&(this.val=new Date(this.val).toISOString())},value:function(){return this.val},format:function(t,e){return isNaN(t)?t:l(t,e)},numInputs:null!=n?0:1}}}},quantile:function(a,o){return null==o&&(o=e),function(){var n=_slicedToArray(arguments.length<=0?void 0:arguments[0],1)[0];return function(t,e,r){return{attr:n,vals:[],push:function(t){t=parseFloat(t[n]);if(!isNaN(t))return this.vals.push(t)},value:function(){if(0===this.vals.length)return null;this.vals.sort(function(t,e){return t-e});var t=(this.vals.length-1)*a;return(this.vals[Math.floor(t)]+this.vals[Math.ceil(t)])/2},format:o,numInputs:null!=n?0:1}}}},runningStat:function(a,o,l){return null==a&&(a="mean"),null==o&&(o=1),null==l&&(l=e),function(){var n=_slicedToArray(arguments.length<=0?void 0:arguments[0],1)[0];return function(t,e,r){return{attr:n,n:0,m:0,s:0,push:function(t){var e,t=parseFloat(t[n]);if(!isNaN(t))return this.n+=1,1===this.n?this.m=t:(e=this.m+(t-this.m)/this.n,this.s=this.s+(t-this.m)*(t-e),this.m=e)},value:function(){if("mean"===a)return 0===this.n?NaN:this.m;if(this.n<=o)return 0;switch(a){case"var":return this.s/(this.n-o);case"stdev":return Math.sqrt(this.s/(this.n-o))}},format:l,numInputs:null!=n?0:1}}}},sumOverSum:function(o){return null==o&&(o=e),function(){var t=_slicedToArray(arguments.length<=0?void 0:arguments[0],2),n=t[0],a=t[1];return function(t,e,r){return{sumNum:0,sumDenom:0,push:function(t){if(isNaN(parseFloat(t[n]))||(this.sumNum+=parseFloat(t[n])),!isNaN(parseFloat(t[a])))return this.sumDenom+=parseFloat(t[a])},value:function(){return this.sumNum/this.sumDenom},format:o,numInputs:null!=n&&null!=a?0:2}}}},sumOverSumBound80:function(o,l){return null==o&&(o=!0),null==l&&(l=e),function(){var t=_slicedToArray(arguments.length<=0?void 0:arguments[0],2),n=t[0],a=t[1];return function(t,e,r){return{sumNum:0,sumDenom:0,push:function(t){if(isNaN(parseFloat(t[n]))||(this.sumNum+=parseFloat(t[n])),!isNaN(parseFloat(t[a])))return this.sumDenom+=parseFloat(t[a])},value:function(){var t=o?1:-1;return(.821187207574908/this.sumDenom+this.sumNum/this.sumDenom+1.2815515655446004*t*Math.sqrt(.410593603787454/(this.sumDenom*this.sumDenom)+this.sumNum*(1-this.sumNum/this.sumDenom)/(this.sumDenom*this.sumDenom)))/(1+1.642374415149816/this.sumDenom)},format:l,numInputs:null!=n&&null!=a?0:2}}}},fractionOf:function(a,o,l){return null==o&&(o="total"),null==l&&(l=n),function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(e,t,r){return{selector:{total:[[],[]],row:[t,[]],col:[[],r]}[o],inner:a.apply(void 0,_toConsumableArray(n||[]))(e,t,r),push:function(t){return this.inner.push(t)},format:l,value:function(t){t=e.getAggregator.apply(e,_toConsumableArray([].concat(_toConsumableArray(this.selector),[t])||[]));return this.inner.value()/t.inner.value()},numInputs:a.apply(void 0,_toConsumableArray(n||[]))().numInputs}}}}};function ct(t,e,r){return{Count:u.count(e),"Count Unique Values":u.countUnique(e),"List Unique Values":u.listUnique(", "),Sum:u.sum(t),"Integer Sum":u.sum(e),Average:u.average(t),Median:u.median(t),"Sample Variance":u.var(1,t),"Sample Standard Deviation":u.stdev(1,t),Minimum:u.min(t),Maximum:u.max(t),First:u.first(t),Last:u.last(t),"Sum over Sum":u.sumOverSum(t),"80% Upper Bound":u.sumOverSumBound80(!0,t),"80% Lower Bound":u.sumOverSumBound80(!1,t),"Sum as Fraction of Total":u.fractionOf(u.sum(),"total",r),"Sum as Fraction of Rows":u.fractionOf(u.sum(),"row",r),"Sum as Fraction of Columns":u.fractionOf(u.sum(),"col",r),"Count as Fraction of Total":u.fractionOf(u.count(),"total",r),"Count as Fraction of Rows":u.fractionOf(u.count(),"row",r),"Count as Fraction of Columns":u.fractionOf(u.count(),"col",r)}}u.countUnique=function(t){return u.uniques(function(t){return t.length},t)},u.listUnique=function(e){return u.uniques(function(t){return t.sort(ht).join(e)},function(t){return t})},u.max=function(t){return u.extremes("max",t)},u.min=function(t){return u.extremes("min",t)},u.first=function(t){return u.extremes("first",t)},u.last=function(t){return u.extremes("last",t)},u.median=function(t){return u.quantile(.5,t)},u.average=function(t){return u.runningStat("mean",1,t)},u.var=function(t,e){return u.runningStat("var",t,e)},u.stdev=function(t,e){return u.runningStat("stdev",t,e)};for(var dt=ct(e,r,n),pt={Table:v,"Table Barchart":function(t,e){return ut(v(t,e)).barchart()},Heatmap:function(t,e){return ut(v(t,e)).heatmap("heatmap",e)},"Row Heatmap":function(t,e){return ut(v(t,e)).heatmap("rowheatmap",e)},"Col Heatmap":function(t,e){return ut(v(t,e)).heatmap("colheatmap",e)}},ft={en:{formatters:{format:e,formatInt:r,formatPct:n},renderers:pt,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",apply:"Apply",cancel:"Cancel",totals:"Totals",vs:"vs",by:"by",rendererLabel:"Renderer",valuesLabel:"Values",fieldsLabel:"Fields",colsLabel:"Columns",rowsLabel:"Rows",groupsLabel:"Groups"}}},a=0,l=Object.keys(dt);a<l.length;a++){var i=l[a];ft.en.localeStrings[i]=i}function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return("0"+t).substr(-e,e)}var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x={bin:function(e,r){return function(t){return t[e]-t[e]%r}},dateFormat:function(e,n,t,a,o){null==a&&(a=_),null==o&&(o=S);var l=(t=null==t?!1:t)?"UTC":"";return function(t){var r=new Date(Date.parse(t[e]));return isNaN(r)?"":n.replace(/%(.)/g,function(t,e){switch(e){case"y":return r["get".concat(l,"FullYear")]();case"m":return c(r["get".concat(l,"Month")]()+1);case"n":return a[r["get".concat(l,"Month")]()];case"d":return c(r["get".concat(l,"Date")]());case"w":return o[r["get".concat(l,"Day")]()];case"x":return r["get".concat(l,"Day")]();case"H":return c(r["get".concat(l,"Hours")]());case"M":return c(r["get".concat(l,"Minutes")]());case"S":return c(r["get".concat(l,"Seconds")]());default:return"%"+e}})}}},d=/(\d+)|(\D+)/g,p=/\d/,f=/^0/,ht=function(t,e,r){r=(r=null==r?!0:r)?1:-1;if(null!=e&&null==t)return-1*r;if(null!=t&&null==e)return r;if("number"==typeof t&&isNaN(t))return-1;if("number"==typeof e&&isNaN(e))return 1;var r=+t,n=+e;if(r<n)return-1;if(n<r)return 1;if("number"==typeof t&&"number"!=typeof e)return-1;if("number"==typeof e&&"number"!=typeof t)return 1;if("number"==typeof t&&"number"==typeof e)return 0;if(isNaN(n)&&!isNaN(r))return-1;if(isNaN(r)&&!isNaN(n))return 1;var a=String(t),o=String(e);if(a===o)return 0;if(!p.test(a)||!p.test(o))return o<a?1:-1;for(a=a.match(d),o=o.match(d);a.length&&o.length;){var l=a.shift(),i=o.shift();if(l!==i)return p.test(l)&&p.test(i)?l.replace(f,".0")-i.replace(f,".0"):i<l?1:-1}return a.length-o.length};function gt(t,e){if(null!=t)if(ut.isFunction(t)){var r=t(e);if(ut.isFunction(r))return r}else if(null!=t[e])return t[e];return ht}function h(t,e){return t.filter(function(t){return t.length===e})}function g(r){return r.map(function(t,e){return r.slice(0,e+1)})}function vt(t){t.map(function(t,e){return t.displayName=String.fromCharCode(97+e).toUpperCase()})}var mt=function(){function o(t,e){var n=this;_classCallCheck(this,o),this.arrSort=this.arrSort.bind(this),this.sortKeys=this.sortKeys.bind(this),this.getColKeys=this.getColKeys.bind(this),this.getRowKeys=this.getRowKeys.bind(this),this.getAggregator=this.getAggregator.bind(this),null==e&&(e={}),this.input=t,Array.isArray(e.aggregator)||(e.aggregator=null!=e.aggregator?e.aggregator:u.count()(),e.aggregator=[e.aggregator]),this.aggregator=null!=e.aggregator?e.aggregator:[u.count()()],this.aggregatorName=null!=e.aggregatorName?e.aggregatorName:"Count",this.colAttrs=null!=e.cols?e.cols:[],this.rowAttrs=null!=e.rows?e.rows:[],this.valAttrs=null!=e.vals?e.vals:[],this.sorters=null!=e.sorters?e.sorters:{},this.rowOrder=null!=e.rowOrder?e.rowOrder:"key_a_to_z",this.colOrder=null!=e.colOrder?e.colOrder:"key_a_to_z",this.derivedAttributes=null!=e.derivedAttributes?e.derivedAttributes:{},this.filter=null!=e.filter?e.filter:function(){return!0},this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator.map(function(t){return t(n,[],[])}),this.sorted=!1,this.aggregatorsLabel=null!=e.aggregatorsLabel?e.aggregatorsLabel:[],this.grouping=null!=e.grouping&&e.grouping,this.rowGroupBefore=null==(null!=e.grouping?e.grouping.rowGroupBefore:void 0)||(null!=e.grouping?e.grouping.rowGroupBefore:void 0),this.colGroupBefore=null!=(null!=e.grouping?e.grouping.colGroupBefore:void 0)&&(null!=e.grouping?e.grouping.colGroupBefore:void 0),o.forEachRecord(this.input,this.derivedAttributes,function(t){if(n.filter(t))return n.processRecord((r=t,Object.entries(r).forEach(function(t){var t=_slicedToArray(t,2),e=t[0],t=t[1];t instanceof Date&&(r[e]=t.toISOString())}),r));var r})}return _createClass(o,[{key:"forEachMatchingRecord",value:function(r,n){var a=this;return o.forEachRecord(this.input,this.derivedAttributes,function(t){if(a.filter(t)){for(var e in r)if(r[e]!==(null!=t[e]?t[e]:"null"))return;return n(t)}})}},{key:"arrSort",value:function(t,o){var e,l=[],r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;l.push(gt(this.sorters,n))}}catch(t){r.e(t)}finally{r.f()}return function(t,e){for(var r=0,n=Object.keys(l||{});r<n.length;r++){var a=n[r],a=(0,l[a])(t[a],e[a],o);if(0!==a)return a}return 0}}},{key:"sortKeys",value:function(){var r=this;if(!this.sorted){this.sorted=!0;var n=function(t,e){return r.getAggregator(t,e).value()};switch(this.rowOrder){case"value_a_to_z":this.rowKeys.sort(function(t,e){return ht(n(t,[]),n(e,[]))});break;case"value_z_to_a":this.rowKeys.sort(function(t,e){return-ht(n(t,[]),n(e,[]))});break;default:this.rowKeys.sort(this.arrSort(this.rowAttrs,this.rowGroupBefore))}switch(this.colOrder){case"value_a_to_z":return this.colKeys.sort(function(t,e){return ht(n([],t),n([],e))});case"value_z_to_a":return this.colKeys.sort(function(t,e){return-ht(n([],t),n([],e))});default:return this.colKeys.sort(this.arrSort(this.colAttrs,this.colGroupBefore))}}}},{key:"getColKeys",value:function(t){return null==t&&(t=!1),this.sortKeys(),t?this.colKeys:h(this.colKeys,this.colAttrs.length)}},{key:"getRowKeys",value:function(t){return null==t&&(t=!1),this.sortKeys(),t?this.rowKeys:h(this.rowKeys,this.rowAttrs.length)}},{key:"processRecord",value:function(l){var t,e,i=this,s=[],r=[],n=_createForOfIteratorHelper(this.colAttrs);try{for(n.s();!(e=n.n()).done;)t=e.value,s.push(null!=l[t]?l[t]:"null")}catch(t){n.e(t)}finally{n.f()}var a,o=_createForOfIteratorHelper(this.rowAttrs);try{for(o.s();!(a=o.n()).done;)t=a.value,r.push(null!=l[t]?l[t]:"null")}catch(t){o.e(t)}finally{o.f()}s=this.grouping&&s.length?g(s):[s],r=this.grouping&&r.length?g(r):[r],this.aggregator.forEach(function(t,e){return i.allTotal[e].push(l)});function u(){var e,n=r[c],a=n.join(String.fromCharCode(0)),o=[];for(e in s)!function(){var r=s[e],t=r.join(String.fromCharCode(0));0!==n.length&&(i.rowTotals[a]||(i.rowKeys.push(n),i.rowTotals[a]=i.aggregator.map(function(t){return t(i,n,[])})),i.rowTotals[a].forEach(function(t,e){if(!i.grouping||1===r.length)return t.push(l)})),0!==r.length&&(i.colTotals[t]||(i.colKeys.push(r),i.colTotals[t]=i.aggregator.map(function(t){return t(i,[],r)})),i.colTotals[t].forEach(function(t,e){if(!i.grouping||1===n.length)return t.push(l)})),0!==r.length&&0!==n.length?(i.tree[a]||(i.tree[a]={}),i.tree[a][t]||(i.tree[a][t]=i.aggregator.map(function(t){return t(i,n,r)})),o.push(i.tree[a][t].forEach(function(t,e){return t.push(l)}))):o.push(void 0)}();d.push(o)}var c,d=[];for(c in r)u();return d}},{key:"getAggregator",value:function(t,e,r){null==r&&(r=0);var n=t.join(String.fromCharCode(0)),a=e.join(String.fromCharCode(0)),t=0===t.length&&0===e.length?this.allTotal[r]:0===t.length?this.colTotals[a]&&this.colTotals[a][r]:0===e.length?this.rowTotals[n]&&this.rowTotals[n][r]:this.tree[n][a]&&this.tree[n][a][r];return null!=t?t:{value:function(){return null},format:function(){return""}}}}],[{key:"forEachRecord",value:function(t,n,a){var r,o=ut.isEmptyObject(n)?a:function(t){for(var e in n){var r=n[e];t[e]=r(t)||t[e]}return a(t)};if(ut.isFunction(t))return t(o);if(ut.isArray(t)){if(ut.isArray(t[0])){for(var e=[],l=0,i=Object.keys(t||{});l<i.length;l++){var s=i[l],u=t[s];if(0<s){for(var c={},d=0,p=Object.keys(t[0]||{});d<p.length;d++){var f=p[d];c[t[0][f]]=u[f]}e.push(o(c))}}return e}var h,g=[],v=_createForOfIteratorHelper(t);try{for(v.s();!(h=v.n()).done;){var m=h.value;g.push(o(m))}}catch(t){v.e(t)}finally{v.f()}return g}if(t instanceof ut)return r=[],ut("thead > tr > th",t).each(function(t){return r.push(ut(this).text())}),ut("tbody > tr",t).each(function(t){var e={};return ut("td",this).each(function(t){return e[r[t]]=ut(this).text()}),o(e)});throw new Error("unknown input format")}}])}();function v(c,d){for(var t,e,r,n,a={table:{clickCallback:null,rowTotals:!0,colTotals:!0},localeStrings:{totals:"Totals"},typeCellRenderer:nt.text,headCellRenderer:nt.text,dataCellRenderer:nt.text,fieldsType:{}},p=(d=ut.extend(!0,{},a,d),c.colAttrs),f=c.rowAttrs,o=c.getRowKeys(!0),l=c.getColKeys(!0),i=(d.table.clickCallback&&(t=function(e,t,r){for(var n,a,o={},l=0,i=Object.keys(p||{});l<i.length;l++)a=i[l],n=p[a],null!=r[a]&&(o[n]=r[a]);for(var s=0,u=Object.keys(f||{});s<u.length;s++)a=u[s],n=f[a],null!=t[a]&&(o[n]=t[a]);return function(t){return d.table.clickCallback(t,e,o,c)}}),(null==d.table.compactLayout||d.table.compactLayout)&&c.grouping),a=i?at:c.rowGroupBefore?rt:ot,j=lt(o,!0,a.bind(c)),M=lt(l,!1,rt.bind(c)),a=document.createElement("table"),U=(a.className="pvtTable",function(t,e,r){if(0!==e){for(var n=!0,a=0,o=r,l=0<=o;l?a<=o:o<=a;l?a++:a--)t[e-1][a]!==t[e][a]&&(n=!1);if(n)return-1}for(var i=0;e+i<t.length;){for(var s,u=!1,c=(a=0)<=(s=r);c?a<=s:s<=a;c?a++:a--)t[e][a]!==t[e+i][a]&&(u=!0);if(u)break;i++}return i}),s=document.createElement("thead"),u=0,K=Object.keys(p||{});u<K.length;u++){var h=K[u],B=p[h],g=document.createElement("tr");0===parseInt(h)&&0!==f.length&&((y=document.createElement("th")).setAttribute("colspan",f.length),y.setAttribute("rowspan",p.length),g.appendChild(y)),(y=document.createElement("th")).className="pvtAxisLabel",y.appendChild(d.typeCellRenderer.call(d,B)),c.grouping&&h<p.length-1&&(y.onclick=it(c,+h,!1),y.className+=" open level".concat(h)),g.appendChild(y);for(var v=0,P=Object.keys(l||{});v<P.length;v++)T=l[b=P[v]],-1!==(n=U(l,parseInt(b),parseInt(h)))&&((y=document.createElement("th")).className="pvtColLabel",y.className+=" col".concat(c.colGroupBefore?+b:+b+n-1),y.appendChild(d.headCellRenderer.call(d,T[h],B)),y.setAttribute("colspan",n*Math.max(1,c.aggregator.length)),parseInt(h)===p.length-1&&0!==f.length&&y.setAttribute("rowspan",2),c.grouping&&h<p.length-1&&T[h]&&(y.className+=" pvtSubtotal open",y.setAttribute("colspan",n*Math.max(1,c.aggregator.length)),y.onclick=M),g.appendChild(y));0===parseInt(h)&&d.table.rowTotals&&((y=document.createElement("th")).className="pvtTotalLabel pvtRowTotalLabel",y.innerHTML=d.localeStrings.totals,y.setAttribute("colspan",Math.max(1,c.aggregator.length)),y.setAttribute("rowspan",p.length+(0===f.length?0:1)),g.appendChild(y)),s.appendChild(g)}if(0!==f.length){g=document.createElement("tr");for(var m=0,H=Object.keys(f||{});m<H.length;m++){var y,b=H[m],V=f[b];(y=document.createElement("th")).className="pvtAxisLabel",y.appendChild(d.typeCellRenderer.call(d,V)),c.grouping&&b<f.length-1&&(y.className+=" open level".concat(b),y.onclick=it(c,+b,!0)),g.appendChild(y)}y=document.createElement("th"),0===p.length&&(y.className="pvtTotalLabel pvtRowTotalLabel",y.innerHTML=d.localeStrings.totals,y.setAttribute("colspan",c.aggregator.length)),g.appendChild(y),s.appendChild(g)}a.appendChild(s);var C=document.createElement("tbody");if(c.aggregatorsLabel&&1<c.aggregatorsLabel.length){g=document.createElement("tr"),y=document.createElement("th");var A,q=f.length+(0===p.length?0:1);y.setAttribute("colspan",q),g.appendChild(y);for(var w=0,z=Object.keys(l||{});w<z.length;w++){var G,T=l[h=z[w]],_=_createForOfIteratorHelper(c.aggregatorsLabel);try{for(_.s();!(G=_.n()).done;)A=G.value,(y=document.createElement("th")).className="pvtAggregatorLabel col".concat(h),y.textContent=A,g.appendChild(y)}catch(t){_.e(t)}finally{_.f()}}var W,S=_createForOfIteratorHelper(c.aggregatorsLabel);try{for(S.s();!(W=S.n()).done;)A=W.value,(y=document.createElement("th")).className="pvtAggregatorLabel",y.textContent=A,g.appendChild(y)}catch(t){S.e(t)}finally{S.f()}C.appendChild(g)}for(var x=0,J=Object.keys(o||{});x<J.length;x++){var N=o[b=J[x]],k=(g=document.createElement("tr"),f.length-N.length);g.className=k?"pvtSubtotal level".concat(N.length):"pvtData";for(var $=0,Q=Object.keys(N||{});$<Q.length;$++){var Y=N[h=Q[$]];i&&h<N.length-1||-1!==(n=i?1:U(o,parseInt(b),parseInt(h)))&&((y=document.createElement("th")).className="pvtRowLabel",y.className+=" row".concat(c.rowGroupBefore?+b:+b+n-1),y.appendChild(d.headCellRenderer.call(d,Y,f[h])),y.setAttribute("rowspan",n),i&&(y.colSpan=f.length,y.style.paddingLeft=5+20*parseInt(h)+"px"),c.grouping&&h<f.length-1&&(y.className+=" open",y.onclick=j),g.appendChild(y))}!i&&k&&((y=document.createElement("th")).colSpan=k,y.textContent="Total (".concat(N[h],")"),g.appendChild(y)),p.length&&y.colSpan++;for(var O,X=0,Z=Object.keys(l||{});X<Z.length;X++)for(T=l[h=Z[X]],e=0;e<c.aggregator.length;e++){c.aggregator[e];var L,I,D=(I=c.getAggregator(N,T,e)).value(e),F=document.createElement("td");k||(F.className="pvtVal "),F.className+="row".concat(b," col").concat(h),p.length-T.length&&(F.className="pvtSubtotal level".concat(T.length," row").concat(b," col").concat(h)),F.appendChild(d.dataCellRenderer.call(d,I.format(D,d.fieldsType[null==(L=I)?void 0:L.attr]),null==(L=I)?void 0:L.attr,N,T)),F.setAttribute("data-value",D),null!=t&&(F.onclick=t(D,N,T)),g.appendChild(F)}if(d.table.rowTotals||0===p.length)for(e=0;e<c.aggregator.length;e++)c.aggregator[e],D=(r=c.getAggregator(N,[],e)).value(e),(F=document.createElement("td")).className="pvtTotal rowTotal",F.append(d.dataCellRenderer.call(d,r.format(D,d.fieldsType[null==(O=r)?void 0:O.attr]),null==(O=r)?void 0:O.attr,N,[])),F.setAttribute("data-value",D),null!=t&&(F.onclick=t(D,N,[])),F.setAttribute("data-for","row"+b),g.appendChild(F);C.appendChild(g)}if(d.table.colTotals||0===f.length){g=document.createElement("tr"),!d.table.colTotals&&0!==f.length||((y=document.createElement("th")).className="pvtTotalLabel pvtColTotalLabel",y.innerHTML=d.localeStrings.totals,y.setAttribute("colspan",f.length+(0===p.length?0:1)),g.appendChild(y));for(var R,E,tt=0,et=Object.keys(l||{});tt<et.length;tt++)for(T=l[h=et[tt]],e=0;e<c.aggregator.length;e++)c.aggregator[e],D=(r=c.getAggregator([],T,e)).value(e),(F=document.createElement("td")).className="pvtTotal colTotal col".concat(h),T.length!==p.length&&(F.className+=" pvtSubtotal level".concat(T.length)),F.append(d.dataCellRenderer.call(d,r.format(D,d.fieldsType[null==(R=r)?void 0:R.attr]),null==(R=r)?void 0:R.attr,[],T)),F.setAttribute("data-value",D),null!=t&&(F.onclick=t(D,[],T)),F.setAttribute("data-for","col"+h),g.appendChild(F);if(d.table.rowTotals||0===p.length)for(e=0;e<c.aggregator.length;e++)c.aggregator[e],D=(r=c.getAggregator([],[],e)).value(e),(F=document.createElement("td")).className="pvtGrandTotal",F.append(d.dataCellRenderer.call(d,r.format(D,d.fieldsType[null==(E=r)?void 0:E.attr]),null==(E=r)?void 0:E.attr,[],[])),F.setAttribute("data-value",D),null!=t&&(F.onclick=t(D,[],[])),g.appendChild(F);C.appendChild(g)}return a.appendChild(C),a.setAttribute("data-numrows",o.length),a.setAttribute("data-numcols",l.length),a}ut.pivotUtilities={aggregatorTemplates:u,aggregators:dt,renderers:pt,cellRenderers:nt,derivers:x,locales:ft,fieldsType:{string:"String",number:"Number",date:"Date",time:"Time",datetime:"Datetime",boolean:"Boolean",integer:"Integer"},zeroPad:c,naturalSort:ht,numberFormat:t,sortAs:function(t){var e,r={},n={};for(e in t){var a=t[e];r[a]=e,"string"==typeof a&&(n[a.toLowerCase()]=e)}return function(t,e){return null!=r[t]&&null!=r[e]?r[t]-r[e]:null!=r[t]?-1:null!=r[e]?1:null!=n[t]&&null!=n[e]?n[t]-n[e]:null!=n[t]?-1:null!=n[e]?1:ht(t,e)}},PivotData:mt},ut.fn.pivot=function(t,e,r){s=r=null==ft[r=null==r?"en":r]?"en":r,e=e||{};var n,a,o={cols:[],rows:[],vals:[],rowOrder:"key_a_to_z",colOrder:"key_a_to_z",dataClass:mt,filter:function(){return!0},aggregator:u.count()(),aggregatorName:"Count",sorters:{},derivedAttributes:{},renderer:v},r=ut.extend(!0,{},ft.en.localeStrings,ft[r].localeStrings),r=ut.extend(!0,{},{rendererOptions:{localeStrings:r},localeStrings:r},ut.extend({},o,e));e.pivotData=null;try{var l=new r.dataClass(t,r);try{a=r.renderer(l,r.rendererOptions),e.pivotData=l}catch(t){n=t,"undefined"!=typeof console&&null!==console&&console.error(n.stack),a=ut("<span>").html(r.localeStrings.renderError)}}catch(t){n=t,"undefined"!=typeof console&&null!==console&&console.error(n.stack),a=ut("<span>").html(r.localeStrings.computeError)}for(var i=this[0];i.hasChildNodes();)i.removeChild(i.lastChild);return this.append(a)},ut.fn.pivotUI=function(j,t,e,m){var r,n,y=this,M=(null==e&&(e=!1),null==ft[m=null==m?"fr":m]&&(m="en"),{derivedAttributes:{},aggregators:dt,renderers:pt,hiddenAttributes:[],hiddenFromAggregators:[],hiddenFromDragDrop:[],menuLimit:500,cols:[],rows:[],vals:[],rowOrder:"key_a_to_z",colOrder:"key_a_to_z",dataClass:mt,exclusions:{},inclusions:{},unusedAttrsVertical:85,autoSortUnusedAttrs:!1,onRefresh:null,showUI:!0,filter:function(){return!0},sorters:{},multiple:!0,parametersActive:!1}),a=0,b=[],o=ut.extend(!0,{},ft.en.localeStrings,ft[m].localeStrings),U={rendererOptions:{localeStrings:o},localeStrings:o},K=this.data("pivotUIOptions"),C=null==K||e?ut.extend(!0,{},U,ut.extend({},M,t)):K;null!=t&&t.aggregators||!ft[m].formatters||(C.aggregators=ct(ft[m].formatters.format,ft[m].formatters.formatInt,ft[m].formatters.formatPct));try{for(var A,w,v={},B=[],l=0,P=(mt.forEachRecord(j,C.derivedAttributes,function(t){if(C.filter(t)){B.push(t);for(var e=0,r=Object.keys(t||{});e<r.length;e++)n=r[e],null==v[n]&&(v[n]={},0<l)&&(v[n].null=l);for(var n in v){var a=null!=t[n]?t[n]:"null";null==v[n][a]&&(v[n][a]=0),v[n][a]++}return l++}}),ut("<div>").addClass("pvtUi")),i=ut("<div>").addClass("pvtUiMenu"),s=ut("<div>").addClass("pvtUiParameters"),H=ut("<div>").addClass("pvtUiContainer"),u=ut("<div>").addClass("pvtUiVerticalButton").addClass("pvtUiButtonColumns").addClass("active").text(o.colsLabel).on("click",function(){return C.parametersActive=!C.parametersActive,C.parametersActive?(u.addClass("active"),s.show()):(u.removeClass("active"),s.hide())}).appendTo(i),V=ut("<div>").addClass("pvtUiVerticalButton").addClass("pvtUiButtonGroups").text(o.groupsLabel).on("click",function(){return C.grouping?(V.removeClass("active"),C.grouping=!1):(V.addClass("active"),C.grouping={colGroupBefore:!1}),D()}).appendTo(i),q=(P.append(i).append(s).append(H),ut("<div>").addClass("pvtParameterLabel").appendTo(s).text(o.rendererLabel),ut("<div>").addClass("pvtRendererType").addClass("pvtParameter").appendTo(s)),c=ut("<select>").addClass("pvtRenderer").appendTo(q).bind("change",function(){return D()}),d=0,z=Object.keys(C.renderers||{});d<z.length;d++){var T=z[d],G=C.localeStrings[T]||T;ut("<option>").val(T).html(G).appendTo(c)}var W=ut("<div>").addClass("pvtAxisContainer pvtUnused"),p=[];for(r in v)C.hiddenAttributes.includes(r)||p.push(r);for(var J=[],f=0,$=p;f<$.length;f++)n=$[f],C.hiddenFromAggregators.includes(n)||J.push(n);for(var _=[],h=0,Q=p;h<Q.length;h++)n=Q[h],C.hiddenFromDragDrop.includes(n)||_.push(n);var Y="auto"===C.unusedAttrsVertical?120:parseInt(C.unusedAttrsVertical);if(!isNaN(Y)){var X,g=_createForOfIteratorHelper(_);try{for(g.s();!(X=g.n()).done;)(r=X.value).length}catch(t){g.e(t)}finally{g.f()}0}for(var Z=function(){w=tt[S],A=_[w];var t,e=[];for(t in v[A])e.push(t);var r=!1,n=ut("<div>").addClass("pvtFilterBox").hide();if(n.append(ut("<h4>").append(ut("<span>").text(A),ut("<span>").addClass("count").text("(".concat(e.length,")")))),e.length>C.menuLimit)n.append(ut("<p>").html(C.localeStrings.tooMany));else{5<e.length&&(h=ut("<p>").appendTo(n),o=gt(C.sorters,A),f=C.localeStrings.filterResults,ut("<input>",{type:"text"}).appendTo(h).attr({placeholder:f,class:"pvtSearch"}).bind("keyup",function(){function t(r,n){return function(t){var e=a.substring(r.length).trim();return 0===e.length||n.includes(Math.sign(o(t.toLowerCase(),e)))}}var a=ut(this).val().toLowerCase().trim(),e=0===a.indexOf(">=")?t(">=",[1,0]):0===a.indexOf("<=")?t("<=",[-1,0]):0===a.indexOf(">")?t(">",[1]):0===a.indexOf("<")?t("<",[-1]):0===a.indexOf("~")?function(t){return 0===a.substring(1).trim().length||t.toLowerCase().match(a.substring(1))}:function(t){return-1!==t.toLowerCase().indexOf(a)};return n.find(".pvtCheckContainer p label span.value").each(function(){return e(ut(this).text())?ut(this).parent().parent().show():ut(this).parent().parent().hide()})}),h.append(ut("<br>")),ut("<button>",{type:"button"}).appendTo(h).html(C.localeStrings.selectAll).bind("click",function(){return n.find("input:visible:not(:checked)").prop("checked",!0).toggleClass("changed"),!1}),ut("<button>",{type:"button"}).appendTo(h).html(C.localeStrings.selectNone).bind("click",function(){return n.find("input:visible:checked").prop("checked",!1).toggleClass("changed"),!1}));var o,a,l=ut("<div>").addClass("pvtCheckContainer").appendTo(n),i=_createForOfIteratorHelper(e.sort(gt(C.sorters,A)));try{for(i.s();!(a=i.n()).done;){var s=a.value,u=v[A][s],c=ut("<label>"),d=!1;C.inclusions[A]?d=!C.inclusions[A].includes(s):C.exclusions[A]&&(d=C.exclusions[A].includes(s)),r=r||d,ut("<input>").attr("type","checkbox").addClass("pvtFilter").attr("checked",!d).data("filter",[A,s]).appendTo(c).bind("change",function(){return ut(this).toggleClass("changed")}),c.append(ut("<span>").addClass("value").text(s)),c.append(ut("<span>").addClass("count").text("("+u+")")),l.append(ut("<p>").append(c))}}catch(t){i.e(t)}finally{i.f()}}function p(){return n.find("[type='checkbox']").length>n.find("[type='checkbox']:checked").length?g.addClass("pvtFilteredAttribute"):g.removeClass("pvtFilteredAttribute"),n.find(".pvtSearch").val(""),n.find(".pvtCheckContainer p").show(),n.hide()}var f=ut("<p>").appendTo(n),h=(e.length<=C.menuLimit&&ut("<button>",{type:"button"}).text(C.localeStrings.apply).appendTo(f).bind("click",function(){return n.find(".changed").removeClass("changed").length&&D(),p()}),ut("<button>",{type:"button"}).text(C.localeStrings.cancel).appendTo(f).bind("click",function(){return n.find(".changed:checked").removeClass("changed").prop("checked",!1),n.find(".changed:not(:checked)").removeClass("changed").prop("checked",!0),p()}),ut("<span>").addClass("pvtTriangle").html(" &#x25BE;").bind("click",function(t){var t=ut(t.currentTarget).position(),e=t.left,t=t.top;return n.css({left:e+10,top:t+10}).show()})),g=ut("<li>").addClass("axis_".concat(w)).append(ut("<span>").addClass("pvtAttr").text(A).data("attrName",A).append(h));r&&g.addClass("pvtFilteredAttribute"),W.append(g).append(n)},S=0,tt=Object.keys(_||{});S<tt.length;S++)Z();ut("<div>").addClass("pvtParameterLabel").appendTo(s).text(o.valuesLabel);for(var x=ut("<div>").addClass("pvtAggregatorChoose").addClass("pvtParameter").appendTo(s),N=ut("<select>").addClass("pvtAggregator").appendTo(x).bind("change",function(){if(!C.multiple)return y.find(".pvtVals .pvtAttrDropdown").each(function(){return this.remove()}),b=[{id:1,value:N.val()}],D()}),k=0,et=Object.keys(C.aggregators||{});k<et.length;k++)T=et[k],N.append(ut("<option>").val(T).html(ft[m].localeStrings[T]||ft.en.localeStrings[T]||T));C.multiple&&ut("<a>",{role:"button"}).addClass("pvtAddAggregator").addClass("pvtToolButton").appendTo(x).html("+").bind("click",function(){return b.push({id:++a,value:N.val()}),vt(b),D()});var rt,O={key_a_to_z:{rowSymbol:"&varr;",colSymbol:"&harr;",next:"value_a_to_z"},value_a_to_z:{rowSymbol:"&darr;",colSymbol:"&rarr;",next:"value_z_to_a"},value_z_to_a:{rowSymbol:"&uarr;",colSymbol:"&larr;",next:"key_a_to_z"}},nt=ut("<a>",{role:"button"}).addClass("pvtRowOrder").addClass("pvtToolButton").appendTo(x).data("order",C.rowOrder).html(O[C.rowOrder].rowSymbol).bind("click",function(){return ut(this).data("order",O[ut(this).data("order")].next),ut(this).html(O[ut(this).data("order")].rowSymbol),D()}),at=ut("<a>",{role:"button"}).addClass("pvtColOrder").addClass("pvtToolButton").appendTo(x).data("order",C.colOrder).html(O[C.colOrder].colSymbol).bind("click",function(){return ut(this).data("order",O[ut(this).data("order")].next),ut(this).html(O[ut(this).data("order")].colSymbol),D()}),ot=ut("<div>").addClass("pvtVals").addClass("pvtParameter").appendTo(s),L=(s.append(ot),ut("<div>").addClass("pvtParameterLabel").appendTo(s).text(o.fieldsLabel),s.append(W),ut("<div>").addClass("pvtParameterLabel").appendTo(s).text(o.colsLabel),ut("<div>").addClass("pvtAxisContainer pvtCols").appendTo(s),ut("<div>").addClass("pvtParameterLabel").appendTo(s).text(o.rowsLabel),ut("<div>").addClass("pvtAxisContainer pvtRows").appendTo(s),ut("<div>").addClass("pvtRendererArea").appendTo(H)),I=(this.html(P),C.parametersActive||(u.removeClass("active"),s.hide()),!0),lt=function(){for(var f,t={derivedAttributes:C.derivedAttributes,localeStrings:C.localeStrings,rendererOptions:C.rendererOptions,sorters:C.sorters,cols:[],rows:[],dataClass:C.dataClass,grouping:C.grouping},h=(y.find(".pvtRows li span.pvtAttr").each(function(){return t.rows.push(ut(this).data("attrName"))}),y.find(".pvtCols li span.pvtAttr").each(function(){return t.cols.push(ut(this).data("attrName"))}),0),g=[],e=0,v=e;e<b.length;v=++e)!function(){var t,e,r=b[v],n=("object"===_typeof(r)&&(t=r.value),r.id),a=r.vals,o=(h=C.aggregators[t]([])().numInputs||0,f=[],y.find(".pvtVals select.pvtAttrDropdown"+n).each(function(){if(0!==h&&(h--,""!==ut(this).val()))return f.push(ut(this).val())}),y.find(".pvtVals")),l=y.find(".pvtVals .pvtAttrDropdownContainer"+n),i=0<l.length;if(C.multiple?(i||(l=ut("<div>").addClass("pvtAttrDropdownContainer").addClass("pvtAttrDropdownContainer"+n).appendTo(o),e=ft[m].localeStrings[t]||ft.en.localeStrings[t]||t,ut("<label>").addClass("pvtAttrDropdown").addClass("pvtAttrDropdown"+n).appendTo(l).html("<b>"+r.displayName+"</b>) "+e),I=!0),I||y.find(".pvtVals .pvtAttrDropdownContainer"+n+" label.pvtAttrDropdown").each(function(){return e=ft[m].localeStrings[t]||ft.en.localeStrings[t]||t,ut(this).html("<b>"+r.displayName+"</b>) "+e)})):l=o,0!==h)for(var s,u=(T=0)<=(s=h);u?T<s:s<T;u?T++:T--){for(var c=ut("<select>").addClass("pvtAttrDropdown"+n).addClass("pvtAttrDropdown").append(ut("<option>")).bind("change",function(){return D()}),d=0,p=J;d<p.length;d++)A=p[d],c.append(ut("<option>").val(A).text(A));l.append(c)}C.multiple&&!i&&ut("<a>").html("x").addClass("pvtRemoveAggregator").addClass("pvtToolButton").addClass("pvtAttrDropdown"+n).appendTo(l).bind("click",function(){var e=this;return this.instance.find(".pvtVals .pvtAttrDropdownContainer"+this.aggIdx).remove(),v=b.findIndex(function(t){return t.id===e.aggIdx}),b.splice(v,1),vt(b),D()}.bind({instance:y,aggIdx:n})),I&&(f=null!=a?a:C.vals,w=0,y.find(".pvtVals select.pvtAttrDropdown"+n).each(function(){return ut(this).val(f[w]),w++}),I=!1),g.push(f)}();t.aggregatorName=b.map(function(t){return t.value}),t.vals=g,t.aggregator=b.map(function(t,e){return C.aggregators[t.value](g[e],C)}),t.renderer=C.renderers[c.val()],t.rowOrder=nt.data("order"),t.colOrder=at.data("order"),C.multiple&&(t.aggregatorsLabel=b.map(function(t){return t.displayName}));var r,n={},a=(y.find("input.pvtFilter").not(":checked").each(function(){var t=ut(this).data("filter");return null!=n[t[0]]?n[t[0]].push(t[1]):n[t[0]]=[t[1]]}),{}),o=(y.find("input.pvtFilter:checked").each(function(){var t=ut(this).data("filter");if(null!=n[t[0]])return null!=a[t[0]]?a[t[0]].push(t[1]):a[t[0]]=[t[1]]}),t.filter=function(t){if(!C.filter(t))return!1;for(var e in n)if(n[e].includes(""+(null!=t[e]?t[e]:"null")))return!1;return!0},L.pivot(B,t,m),ut.extend({},C,{cols:t.cols,rows:t.rows,colOrder:t.colOrder,rowOrder:t.rowOrder,vals:g,exclusions:n,inclusions:a,aggregator:t.aggregator,inclusionsInfo:a,aggregatorName:t.aggregatorName,rendererName:c.val()})),l=t.pivotData;if(delete t.pivotData,y.data("pivotUIOptions",o),C.autoSortUnusedAttrs&&(r=y.find("td.pvtUnused.pvtAxisContainer"),ut(r).children("li").sort(function(t,e){return ht(ut(t).text(),ut(e).text())}).appendTo(r)),L.css("opacity",1),null!=C.onRefresh)return C.onRefresh(o,l)},D=function(){return L.css("opacity",.5),setTimeout(lt,10)},F=_createForOfIteratorHelper(C.cols);try{for(F.s();!(rt=F.n()).done;)T=rt.value,this.find(".pvtCols").append(this.find(".axis_".concat(ut.inArray(T,_))))}catch(t){F.e(t)}finally{F.f()}var it,R=_createForOfIteratorHelper(C.rows);try{for(R.s();!(it=R.n()).done;)T=it.value,this.find(".pvtRows").append(this.find(".axis_".concat(ut.inArray(T,_))))}catch(t){R.e(t)}finally{R.f()}if(null!=C.aggregatorName)if(C.multiple){C.aggregatorName=Array.isArray(C.aggregatorName)?C.aggregatorName:[C.aggregatorName];for(var E=0;E<C.aggregatorName.length;E++){var st=C.aggregatorName[E];b.push({id:++a,value:st,vals:null!=C.vals?C.vals[E]:void 0}),vt(b)}}else this.find(".pvtVals").append(this.find(".pvtAttrDropdown")),this.find(".pvtAggregator").val(C.aggregatorName).change();else this.find(".pvtAggregator").change();null!=C.rendererName&&this.find(".pvtRenderer").val(C.rendererName),C.showUI||this.find(".pvtUiCell").hide(),D(),this.find(".pvtAxisContainer").sortable({update:function(t,e){if(null==e.sender)return D()},connectWith:this.find(".pvtAxisContainer"),items:"li",placeholder:"pvtPlaceholder"})}catch(t){console.error(t),this.html(C.localeStrings.uiRenderError)}return this},ut.fn.heatmap=function(t,e){function r(t){function e(e){return a.find(t).each(function(){var t=ut(this).data("value");if(null!=t&&isFinite(t))return e(t,ut(this))})}var r=[],n=(e(function(t){return r.push(t)}),l(r));e(function(t,e){return e.css("background-color",n(t))})}var a=this,n=(null==t&&(t="heatmap"),this.data("numrows")),o=this.data("numcols"),l=null==e||null==(e=e.heatmap)?void 0:e.colorScaleGenerator;null==l&&(l=function(t){var e=Math.min.apply(Math,_toConsumableArray(t||[])),r=Math.max.apply(Math,_toConsumableArray(t||[]));return function(t){t=255-Math.round(255*(t-e)/(r-e));return"rgb(255,".concat(t,",").concat(t,")")}});switch(t){case"heatmap":r(".pvtVal");break;case"rowheatmap":for(var i=0,s=n,u=0<=s;u?i<s:s<i;u?i++:i--)r(".pvtVal.row".concat(i));break;case"colheatmap":for(var c=0,d=o,p=0<=d;p?c<d:d<c;p?c++:c--)r(".pvtVal.col".concat(c))}return r(".pvtTotal.rowTotal"),r(".pvtTotal.colTotal"),this},ut.fn.barchart=function(t){for(var o=this,e=this.data("numrows"),r=(this.data("numcols"),function(t){function e(e){return o.find(t).each(function(){var t=ut(this).data("value");if(null!=t&&isFinite(t))return e(t,ut(this))})}function l(t){return 100*t/(1.4*a)}var r=[],n=(e(function(t){return r.push(t)}),Math.max.apply(Math,_toConsumableArray(r||[]))),a=n=n<0?0:n,i=Math.min.apply(Math,_toConsumableArray(r||[]));i<0&&(a=n-i);return e(function(t,e){var r=e.text(),n=ut("<div>").css({position:"relative",height:"55px"}),a="gray",o=0;return i<0&&(o=l(-i)),t<0&&(o+=l(t),a="darkred",t=-t),n.append(ut("<div>").css({position:"absolute",bottom:o+"%",left:0,right:0,height:l(t)+"%","background-color":a})),n.append(ut("<div>").text(r).css({position:"relative","padding-left":"5px","padding-right":"5px"})),e.css({padding:0,"padding-top":"5px","text-align":"center"}).html(n)})}),n=0,a=e,l=0<=a;l?n<a:a<n;l?n++:n--)r(".pvtVal.row".concat(n));return r(".pvtTotal.colTotal"),this};function m(t){return Array.prototype.indexOf.call(t.parentNode.children,t)}function y(t){var e=t.find("tbody tr");return function(t){return ut(e[t])}}function b(t,e,r,n,a){var o,l=N(e,r);for(o in l){var i=l[o],s=t(i+n);(a?ut.fn.show:ut.fn.hide).call(s),s.hasClass("collapsed")||b(t,e,i,n,a)}return!0}function C(t,e,r,n,a){a&&1<r&&(w(e,n,r-1).removeClass("close").addClass("open"),C(t,e,r-1,n,a));var o=(n?t.rowAttrs:t.colAttrs).length-1;if(!a&&r<o)for(var l=r+1,i=l,s=o,u=l<=s;u?i<=s:s<=i;u?i++:i--)w(e,n,i).removeClass("open").addClass("close");var o=n?t.rowKeys:t.colKeys,c=k(o,r);for(i in c){var d=c[i],d=T(e,n,d);a===d.hasClass("close")&&d.trigger("click")}return null}var N=function(t,e){for(var r=1===t[0].length?1:-1,n=t[e].length,a=[],o=t[e+=r];o&&o.length>n;)o.length===n+1&&(a.push(e),o=t[e+=r]);return a},A=function(t,e){for(var r=1===t[0].length?1:-1,n=[],a=t[e].length;1<a;){for(var o=void 0,o=t[e-=r];o&&o.length>=a;)o=t[e-=r];n.push(e),a=t[e].length}return n},k=function(t,e){return t.filter(function(t){return t.length===e}).map(t.indexOf.bind(t))},w=function(t,e,r){return e?t.find("thead tr:last-child th.pvtAxisLabel:nth-of-type(".concat(r,")")):t.find("thead tr:nth-child(".concat(r,") th.pvtAxisLabel"))},T=function(t,e,r){return t.find((e?"tbody tr th.row":"thead th.col").concat(r))},ot=function(t,e,r,n){var a,o=ut(t).closest("table"),l=m(t.parentNode),i=y(o),s=i(n),u=s.hasClass("collapsed")?i(t._old):s,c=(s.hasClass("collapsed")||(t._old=m(t.parentNode)),u.prepend(t),A(r,n));for(a in c){var d=c[a],d=T(o,e,d)[0],p=m(d.parentNode);d._old=null!=d._old?d._old:p,d._old===l&&1===d.rowSpan&&(d._old-=l-m(t.parentNode)),l===p&&u.prepend(d)}return rt(t,e,r,n)},at=function(t,e,r,n,a){var o,l=ut(t).closest("table"),l=e?y(l):(o=l.find("tr"),function(t){return o.find(".col".concat(t))}),i=e&&1<this.aggregator.length?1:0;return 1!==(null!=a?a[e?"rowSpan":"colSpan"]:void 0)&&b(l,r,n,i,l(n+i).hasClass("collapsed")),l(n+i).toggleClass("collapsed"),ut(t).toggleClass("open close")},lt=function(r,n,a){return function(t){var e=t.target.className.match(n?/row(\d+)/:/col(\d+)/);if(e)return a(t.target,n,r,+e[1])}},it=function(e,r,n){return function(t){return C(e,ut(t.target).closest("table"),r+1,n,ut(t.target).hasClass("close")),ut(t.target).toggleClass("open close")}}}(jQuery);
//# sourceMappingURL=pivot.min.js.map
