{"version":3,"file":"pivot.js","names":["callWithJQuery","pivotModule","exports","_typeof","module","require","define","amd","jQuery","$","expandWithSpan","cell","rows","keys","nth","parent","table","closest","span","dft","Math","max","aggregator","length","_ref","_span","change","object","parentKeysIndices","i","p","getHeader","expandRowCol","getExpandAllHandler","addSeparators","nStr","thousandsSep","decimalSep","x","split","x1","x2","rgx","test","replace","numberFormat","opts","defaults","digitsAfterDecimal","scaler","prefix","suffix","extend","isNaN","isFinite","result","toFixed","usFmt","usFmtInt","usFmtPct","aggregatorTemplates","count","formatter","data","rowKey","colKey","push","value","format","uniques","fn","_ref2","arguments","undefined","_ref3","_slicedToArray","attr","uniq","record","includes","numInputs","sum","_ref4","_ref5","parseFloat","extremes","mode","_ref6","_ref7","val","sorter","getSort","sorters","quantile","q","_ref8","_ref9","vals","sort","a","b","floor","ceil","runningStat","ddof","_ref10","_ref11","n","m","s","m_new","sqrt","sumOverSum","_ref12","_ref13","num","denom","sumNum","sumDenom","sumOverSumBound80","upper","_ref14","_ref15","sign","fractionOf","wrapped","type","_len","Array","_key","selector","total","row","col","inner","apply","_toConsumableArray","id","agg","getAggregator","concat","countUnique","f","listUnique","naturalSort","join","min","first","last","median","average","var","stdev","makeAggregators","fmt","fmtInt","fmtPct","defaultAggregators","renderers","Table","pivotTableRenderer","TableBarchart","barchart","Heatmap","heatmap","RowHeatmap","ColHeatmap","locales","en","formatters","formatInt","formatPct","localeStrings","renderError","computeError","uiRenderError","selectAll","selectNone","tooMany","filterResults","cancel","totals","vs","by","rendererLabel","valuesLabel","fieldsLabel","colsLabel","rowsLabel","groupsLabel","_i","_Object$keys","Object","mthNamesEn","dayNamesEn","zeroPad","number","substr","derivers","bin","binWidth","dateFormat","formatString","utcOutput","mthNames","dayNames","utc","date","Date","parse","rx","rd","rz","as","bs","nulls_first","nf","nas","nbs","String","match","a1","shift","b1","sortAs","order","mapping","l_mapping","toLowerCase","isFunction","filterByLength","filter","subarrays","array","map","d","slice","PivotData","input","_this","_classCallCheck","arrSort","bind","sortKeys","getColKeys","getRowKeys","isArray","aggregatorName","colAttrs","cols","rowAttrs","valAttrs","rowOrder","colOrder","derivedAttributes","tree","rowKeys","colKeys","rowTotals","colTotals","allTotal","sorted","aggregatorsLabel","grouping","rowGroupBefore","colGroupBefore","forEachRecord","processRecord","_createClass","key","forEachMatchingRecord","criteria","callback","_this2","k","v","attrs","sortersArr","_iterator","_createForOfIteratorHelper","_step","done","err","e","_i2","_Object$keys2","comparison","_this3","r","c","all_keys","_this4","_iterator2","_step2","_iterator3","_step3","forEach","_loop","j","flatRowKey","fromCharCode","result1","_loop2","flatColKey","addRecord","isEmptyObject","left","_i3","_Object$keys3","compactRecord","_i4","_Object$keys4","_iterator4","_step4","tblCols","each","text","Error","pivotUtilities","aggregators","pivotData","getClickHandler","td","th","totalAggregator","tr","clickCallback","rowValues","colValues","filters","_i5","_Object$keys5","_i6","_Object$keys6","compactLayout","rowExpandHandler","expandRowsGroupAfter","rowsExpandHandler","getExpandHandler","colsExpandHandler","document","createElement","className","spanSize","arr","asc","end","noDraw","len","asc1","end1","stop","thead","_i7","_Object$keys7","parseInt","setAttribute","appendChild","textContent","onclick","_i8","_Object$keys8","innerHTML","_i9","_Object$keys9","tbody","lbl","colspan","_i10","_Object$keys10","_iterator5","_step5","_iterator6","_step6","_i11","_Object$keys11","rowGap","_i12","_Object$keys12","txt","colSpan","style","paddingLeft","_i13","_Object$keys13","_i14","_Object$keys14","pivot","inputOpts","locale","dataClass","renderer","localeDefaults","rendererOptions","error","console","stack","html","error1","hasChildNodes","removeChild","lastChild","append","pivotUI","overwrite","_this5","hiddenAttributes","hiddenFromAggregators","hiddenFromDragDrop","menuLimit","exclusions","inclusions","unusedAttrsVertical","autoSortUnusedAttrs","onRefresh","showUI","multiple","parametersActive","itemsId","renameAggregators","displayName","toUpperCase","existingOpts","unusedAttrsVerticalAutoCutoff","attrValues","materializedInput","recordsProcessed","_i15","_Object$keys15","uiContainer","addClass","uiMenu","uiParameters","uiPivotContainer","uiButtonColumns","on","show","removeClass","hide","appendTo","uiButtonGroups","refresh","pvtRenderType","_i16","_Object$keys16","unused","shownAttributes","shownInAggregators","_i17","_shownAttributes","shownInDragDrop","_i18","_shownAttributes2","unusedAttrsVerticalAutoOverride","attrLength","_iterator7","_step7","_loop3","_Object$keys17","_i19","values","hasExcludedItem","valueList","controls","placeholder","class","trim","accept_gen","accepted","real_filter","substring","needle","accept","indexOf","find","prop","toggleClass","checkContainer","_iterator8","_step8","valueCount","filterItem","filterItemExcluded","closeFilterBox","attrElem","finalButtons","triangleLink","_$$position","currentTarget","position","top","css","divAggregator","remove","_i20","_Object$keys18","role","ordering","key_a_to_z","rowSymbol","colSymbol","next","value_a_to_z","value_z_to_a","rowOrderArrow","colOrderArrow","pvVals","pivotTable","initialRender","refreshDelayed","subopts","numInputsToProcess","aggVals","idx","_loop4","aggregatorType","aggIdx","initialVals","pvtVals","container","found","labelAggregator","newDropdown","_i21","_shownInAggregators","_this6","instance","findIndex","splice","not","excludedItems","pivotUIOptions","inclusionsInfo","rendererName","currentPivotData","unusedAttrsContainer","children","setTimeout","_iterator9","_step9","inArray","_iterator10","_step10","sortable","update","ui","sender","connectWith","items","scope","_opts$heatmap","_this7","numRows","numCols","colorScaleGenerator","nonRed","round","heatmapper","forEachCell","colorScale","elem","_this8","barcharter","range","wrapper","bgColor","bBase","childIndex","el","prototype","call","parentNode","childKeysIndices","up","levelKeysIndices","level","getAxis","rowGetter","selecttion","colGetter","showHide","getter","offset","hasClass","initIndex","insertPoint","_old","prepend","parentIndex","rowSpan","expandAll","expand","levels","start","trigger","handler","ev","target"],"sources":["pivot.js"],"sourcesContent":["// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n// noinspection JSUnresolvedReference\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS103: Rewrite code to no longer use __guard__, or convert again using --optional-chaining\n * DS104: Avoid inline assignments\n * DS201: Simplify complex destructure assignments\n * DS202: Simplify dynamic range loops\n * DS203: Remove `|| {}` from converted for-own loops\n * DS204: Change includes calls to have a more natural evaluation order\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nconst callWithJQuery = function (pivotModule) {\n    if ((typeof exports === 'object') && (typeof module === 'object')) { // CommonJS\n        return pivotModule(require('jquery'));\n    } else if ((typeof define === 'function') && define.amd) { // AMD\n        return define(['jquery'], pivotModule);\n        // Plain browser env\n    } else {\n        return pivotModule(jQuery);\n    }\n};\n\ncallWithJQuery(function ($) {\n\n    const expandWithSpan = function (cell, rows, keys, nth) {\n        let parent;\n        const table = $(cell).closest('table');\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const dft = !rows ? Math.max(1, this.aggregator.length) : 1;\n        [cell._span, cell[span]] = [cell[span], cell._span != null ? cell._span : dft];\n        const change = cell[span] - cell._span;\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            parent = (getHeader(table, rows, p))[0];\n            if (parent[span] === 1) {\n                parent._span += change;\n                break;\n            }\n            parent[span] += change;\n        }\n\n        return expandRowCol(cell, rows, keys, nth, parent);\n    };\n    /*\n        Utilities\n        */\n\n    let getExpandAllHandler;\n    const addSeparators = function (nStr, thousandsSep, decimalSep) {\n        nStr += '';\n        const x = nStr.split('.');\n        let x1 = x[0];\n        const x2 = x.length > 1 ? decimalSep + x[1] : '';\n        const rgx = /(\\d+)(\\d{3})/;\n        while (rgx.test(x1)) {\n            x1 = x1.replace(rgx, '$1' + thousandsSep + '$2');\n        }\n        return x1 + x2;\n    };\n\n    const numberFormat = function (opts) {\n        const defaults = {\n            digitsAfterDecimal: 2, scaler: 1,\n            thousandsSep: ',', decimalSep: '.',\n            prefix: '', suffix: '',\n        };\n        opts = $.extend({}, defaults, opts);\n        return function (x) {\n            if (isNaN(x) || !isFinite(x)) {\n                return '';\n            }\n            const result = addSeparators((opts.scaler * x).toFixed(opts.digitsAfterDecimal), opts.thousandsSep, opts.decimalSep);\n            return '' + opts.prefix + result + opts.suffix;\n        };\n    };\n\n    //aggregator templates default to US number formatting, but this is overrideable\n    const usFmt = numberFormat();\n    const usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\n    const usFmtPct = numberFormat({ digitsAfterDecimal: 1, scaler: 100, suffix: '%' });\n\n    const aggregatorTemplates = {\n        count(formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return () => (function (data, rowKey, colKey) {\n                return {\n                    count: 0,\n                    push() {\n                        return this.count++;\n                    },\n                    value() {\n                        return this.count;\n                    },\n                    format: formatter,\n                };\n            });\n        },\n\n        uniques(fn, formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        uniq: [],\n                        push(record) {\n                            if (!this.uniq.includes(record[attr])) {\n                                return this.uniq.push(record[attr]);\n                            }\n                        },\n                        value() {\n                            return fn(this.uniq);\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sum: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[attr]))) {\n                                return this.sum += parseFloat(record[attr]);\n                            }\n                        },\n                        value() {\n                            return this.sum;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        extremes(mode, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        val: null,\n                        sorter: getSort(data != null ? data.sorters : undefined, attr),\n                        push(record) {\n                            let x = record[attr];\n                            if (['min', 'max'].includes(mode)) {\n                                x = parseFloat(x);\n                                if (!isNaN(x)) {\n                                    this.val = Math[mode](x, this.val != null ? this.val : x);\n                                }\n                            }\n                            if (mode === 'first') {\n                                if (this.sorter(x, this.val != null ? this.val : x) <= 0) {\n                                    this.val = x;\n                                }\n                            }\n                            if (mode === 'last') {\n                                if (this.sorter(x, this.val != null ? this.val : x) >= 0) {\n                                    return this.val = x;\n                                }\n                            }\n                        },\n                        value() {\n                            return this.val;\n                        },\n                        format(x) {\n                            if (isNaN(x)) {\n                                return x;\n                            } else {\n                                return formatter(x);\n                            }\n                        },\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        quantile(q, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        vals: [],\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (!isNaN(x)) {\n                                return this.vals.push(x);\n                            }\n                        },\n                        value() {\n                            if (this.vals.length === 0) {\n                                return null;\n                            }\n                            this.vals.sort((a, b) => a - b);\n                            const i = (this.vals.length - 1) * q;\n                            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        runningStat(mode, ddof, formatter) {\n            if (mode == null) {\n                mode = 'mean';\n            }\n            if (ddof == null) {\n                ddof = 1;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        n: 0.0, m: 0.0, s: 0.0,\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (isNaN(x)) {\n                                return;\n                            }\n                            this.n += 1.0;\n                            if (this.n === 1.0) {\n                                return this.m = x;\n                            } else {\n                                const m_new = this.m + ((x - this.m) / this.n);\n                                this.s = this.s + ((x - this.m) * (x - m_new));\n                                return this.m = m_new;\n                            }\n                        },\n                        value() {\n                            if (mode === 'mean') {\n                                if (this.n === 0) {\n                                    return 0 / 0;\n                                } else {\n                                    return this.m;\n                                }\n                            }\n                            if (this.n <= ddof) {\n                                return 0;\n                            }\n                            switch (mode) {\n                                case 'var':\n                                    return this.s / (this.n - ddof);\n                                case 'stdev':\n                                    return Math.sqrt(this.s / (this.n - ddof));\n                            }\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sumOverSum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            return this.sumNum / this.sumDenom;\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        sumOverSumBound80(upper, formatter) {\n            if (upper == null) {\n                upper = true;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            const sign = upper ? 1 : -1;\n                            return ((0.821187207574908 / this.sumDenom) + (this.sumNum / this.sumDenom) + (1.2815515655446004 * sign *\n                                    Math.sqrt((0.410593603787454 / (this.sumDenom * this.sumDenom)) + ((this.sumNum * (1 - (this.sumNum / this.sumDenom))) / (this.sumDenom * this.sumDenom))))) /\n                                (1 + (1.642374415149816 / this.sumDenom));\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        fractionOf(wrapped, type, formatter) {\n            if (type == null) {\n                type = 'total';\n            }\n            if (formatter == null) {\n                formatter = usFmtPct;\n            }\n            return (...x) => (function (data, rowKey, colKey) {\n                return {\n                    selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[type],\n                    inner: wrapped(...(x || []))(data, rowKey, colKey),\n                    push(record) {\n                        return this.inner.push(record);\n                    },\n                    format: formatter,\n                    value(id) {\n                        const agg = data.getAggregator(...([...this.selector, id] || []));\n                        return this.inner.value() / agg.inner.value();\n                    },\n                    numInputs: wrapped(...(x || []))().numInputs,\n                };\n            });\n        },\n    };\n\n    aggregatorTemplates.countUnique = f => aggregatorTemplates.uniques((x => x.length), f);\n    aggregatorTemplates.listUnique = s => aggregatorTemplates.uniques((x => x.sort(naturalSort).join(s)), (x => x));\n    aggregatorTemplates.max = f => aggregatorTemplates.extremes('max', f);\n    aggregatorTemplates.min = f => aggregatorTemplates.extremes('min', f);\n    aggregatorTemplates.first = f => aggregatorTemplates.extremes('first', f);\n    aggregatorTemplates.last = f => aggregatorTemplates.extremes('last', f);\n    aggregatorTemplates.median = f => aggregatorTemplates.quantile(0.5, f);\n    aggregatorTemplates.average = f => aggregatorTemplates.runningStat('mean', 1, f);\n    aggregatorTemplates.var = (ddof, f) => aggregatorTemplates.runningStat('var', ddof, f);\n    aggregatorTemplates.stdev = (ddof, f) => aggregatorTemplates.runningStat('stdev', ddof, f);\n\n    function makeAggregators(fmt, fmtInt, fmtPct) {\n        return {\n            'Count': aggregatorTemplates.count(fmtInt),\n            'Count Unique Values': aggregatorTemplates.countUnique(fmtInt),\n            'List Unique Values': aggregatorTemplates.listUnique(', '),\n            'Sum': aggregatorTemplates.sum(fmt),\n            'Integer Sum': aggregatorTemplates.sum(fmtInt),\n            'Average': aggregatorTemplates.average(fmt),\n            'Median': aggregatorTemplates.median(fmt),\n            'Sample Variance': aggregatorTemplates.var(1, fmt),\n            'Sample Standard Deviation': aggregatorTemplates.stdev(1, fmt),\n            'Minimum': aggregatorTemplates.min(fmt),\n            'Maximum': aggregatorTemplates.max(fmt),\n            'First': aggregatorTemplates.first(fmt),\n            'Last': aggregatorTemplates.last(fmt),\n            'Sum over Sum': aggregatorTemplates.sumOverSum(fmt),\n            '80% Upper Bound': aggregatorTemplates.sumOverSumBound80(true, fmt),\n            '80% Lower Bound': aggregatorTemplates.sumOverSumBound80(false, fmt),\n            'Sum as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'total', fmtPct),\n            'Sum as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'row', fmtPct),\n            'Sum as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'col', fmtPct),\n            'Count as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'total', fmtPct),\n            'Count as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'row', fmtPct),\n            'Count as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'col', fmtPct),\n        };\n    }\n\n    //default aggregators & renderers use US naming and number formatting\n    const defaultAggregators = makeAggregators(usFmt, usFmtInt, usFmtPct);\n\n    const renderers = {\n        'Table'(data, opts) {\n            return pivotTableRenderer(data, opts);\n        },\n        'Table Barchart'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).barchart();\n        },\n        'Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('heatmap', opts);\n        },\n        'Row Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('rowheatmap', opts);\n        },\n        'Col Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('colheatmap', opts);\n        },\n    };\n\n    const locales = {\n        en: {\n            formatters: {\n                format: usFmt,\n                formatInt: usFmtInt,\n                formatPct: usFmtPct,\n            },\n            renderers,\n            localeStrings: {\n                renderError: 'An error occurred rendering the PivotTable results.',\n                computeError: 'An error occurred computing the PivotTable results.',\n                uiRenderError: 'An error occurred rendering the PivotTable UI.',\n                selectAll: 'Select All',\n                selectNone: 'Select None',\n                tooMany: '(too many to list)',\n                filterResults: 'Filter values',\n                apply: 'Apply',\n                cancel: 'Cancel',\n                totals: 'Totals', //for table renderer\n                vs: 'vs', //for gchart renderer\n                by: 'by', //for gchart renderer\n                rendererLabel: 'Renderer',\n                valuesLabel: 'Values',\n                fieldsLabel: 'Fields',\n                colsLabel: 'Columns',\n                rowsLabel: 'Rows',\n                groupsLabel: 'Groups',\n            },\n        },\n    };\n\n    for (const agg of Object.keys(defaultAggregators)) {\n        locales.en.localeStrings[agg] = agg;\n    }\n\n    //dateFormat deriver l10n requires month and day names to be passed in directly\n    const mthNamesEn = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    const zeroPad = number => ('0' + number).substr(-2, 2);\n\n    const derivers = {\n        bin(col, binWidth) {\n            return record => record[col] - (record[col] % binWidth);\n        },\n        dateFormat(col, formatString, utcOutput, mthNames, dayNames) {\n            if (utcOutput == null) {\n                utcOutput = false;\n            }\n            if (mthNames == null) {\n                mthNames = mthNamesEn;\n            }\n            if (dayNames == null) {\n                dayNames = dayNamesEn;\n            }\n            const utc = utcOutput ? 'UTC' : '';\n            return function (record) { //thanks http://stackoverflow.com/a/12213072/112871\n                const date = new Date(Date.parse(record[col]));\n                if (isNaN(date)) {\n                    return '';\n                }\n                return formatString.replace(/%(.)/g, function (m, p) {\n                    switch (p) {\n                        case 'y':\n                            return date[`get${utc}FullYear`]();\n                        case 'm':\n                            return zeroPad(date[`get${utc}Month`]() + 1);\n                        case 'n':\n                            return mthNames[date[`get${utc}Month`]()];\n                        case 'd':\n                            return zeroPad(date[`get${utc}Date`]());\n                        case 'w':\n                            return dayNames[date[`get${utc}Day`]()];\n                        case 'x':\n                            return date[`get${utc}Day`]();\n                        case 'H':\n                            return zeroPad(date[`get${utc}Hours`]());\n                        case 'M':\n                            return zeroPad(date[`get${utc}Minutes`]());\n                        case 'S':\n                            return zeroPad(date[`get${utc}Seconds`]());\n                        default:\n                            return '%' + p;\n                    }\n                });\n            };\n        },\n    };\n\n    const rx = /(\\d+)|(\\D+)/g;\n    const rd = /\\d/;\n    const rz = /^0/;\n    const naturalSort = (as, bs, nulls_first) => {\n        //nulls first\n        if (nulls_first == null) {\n            nulls_first = true;\n        }\n        const nf = nulls_first ? 1 : -1;\n        if ((bs != null) && (as == null)) {\n            return -1 * nf;\n        }\n        if ((as != null) && (bs == null)) {\n            return 1 * nf;\n        }\n\n        //then raw NaNs\n        if ((typeof as === 'number') && isNaN(as)) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && isNaN(bs)) {\n            return 1;\n        }\n\n        //numbers and numbery strings group together\n        const nas = +as;\n        const nbs = +bs;\n        if (nas < nbs) {\n            return -1;\n        }\n        if (nas > nbs) {\n            return 1;\n        }\n\n        //within that, true numbers before numbery strings\n        if ((typeof as === 'number') && (typeof bs !== 'number')) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && (typeof as !== 'number')) {\n            return 1;\n        }\n        if ((typeof as === 'number') && (typeof bs === 'number')) {\n            return 0;\n        }\n\n        // 'Infinity' is a textual number, so less than 'A'\n        if (isNaN(nbs) && !isNaN(nas)) {\n            return -1;\n        }\n        if (isNaN(nas) && !isNaN(nbs)) {\n            return 1;\n        }\n\n        //finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n        let a = String(as);\n        let b = String(bs);\n        if (a === b) {\n            return 0;\n        }\n        if (!rd.test(a) || !rd.test(b)) {\n            return (a > b ? 1 : -1);\n        }\n\n        //special treatment for strings containing digits\n        a = a.match(rx); //create digits vs. non-digit chunks and iterate through\n        b = b.match(rx);\n        while (a.length && b.length) {\n            const a1 = a.shift();\n            const b1 = b.shift();\n            if (a1 !== b1) {\n                if (rd.test(a1) && rd.test(b1)) { //both are digit chunks\n                    return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n                } else {\n                    return (a1 > b1 ? 1 : -1);\n                }\n            }\n        }\n        return a.length - b.length;\n    };\n\n    const sortAs = function (order) {\n        const mapping = {};\n        const l_mapping = {}; // sort lowercased keys similarly\n        for (let i in order) {\n            const x = order[i];\n            mapping[x] = i;\n            if (typeof x === 'string') {\n                l_mapping[x.toLowerCase()] = i;\n            }\n        }\n        return function (a, b) {\n            if ((mapping[a] != null) && (mapping[b] != null)) {\n                return mapping[a] - mapping[b];\n            } else if (mapping[a] != null) {\n                return -1;\n            } else if (mapping[b] != null) {\n                return 1;\n            } else if ((l_mapping[a] != null) && (l_mapping[b] != null)) {\n                return l_mapping[a] - l_mapping[b];\n            } else if (l_mapping[a] != null) {\n                return -1;\n            } else if (l_mapping[b] != null) {\n                return 1;\n            } else {\n                return naturalSort(a, b);\n            }\n        };\n    };\n\n    function getSort (sorters, attr) {\n        if (sorters != null) {\n            if ($.isFunction(sorters)) {\n                const sort = sorters(attr);\n                if ($.isFunction(sort)) {\n                    return sort;\n                }\n            } else if (sorters[attr] != null) {\n                return sorters[attr];\n            }\n        }\n        return naturalSort;\n    }\n\n    const filterByLength = (keys, length) => keys.filter(x => x.length === length);\n\n    const subarrays = array => array.map((d, i) => array.slice(0, i + 1));  // [1,2,3] => [[1], [1,2], [1,2,3]]\n\n    /*\n    Data Model class\n    */\n\n    class PivotData {\n        constructor(input, opts) {\n            this.arrSort = this.arrSort.bind(this);\n            this.sortKeys = this.sortKeys.bind(this);\n            this.getColKeys = this.getColKeys.bind(this);\n            this.getRowKeys = this.getRowKeys.bind(this);\n            this.getAggregator = this.getAggregator.bind(this);\n            if (opts == null) {\n                opts = {};\n            }\n            this.input = input;\n            if (!Array.isArray(opts.aggregator)) {\n                opts.aggregator = opts.aggregator != null ? opts.aggregator : aggregatorTemplates.count()();\n                opts.aggregator = [opts.aggregator];\n            }\n            this.aggregator = opts.aggregator != null ? opts.aggregator : [aggregatorTemplates.count()()];\n            this.aggregatorName = opts.aggregatorName != null ? opts.aggregatorName : 'Count';\n            this.colAttrs = opts.cols != null ? opts.cols : [];\n            this.rowAttrs = opts.rows != null ? opts.rows : [];\n            this.valAttrs = opts.vals != null ? opts.vals : [];\n            this.sorters = opts.sorters != null ? opts.sorters : {};\n            this.rowOrder = opts.rowOrder != null ? opts.rowOrder : 'key_a_to_z';\n            this.colOrder = opts.colOrder != null ? opts.colOrder : 'key_a_to_z';\n            this.derivedAttributes = opts.derivedAttributes != null ? opts.derivedAttributes : {};\n            this.filter = opts.filter != null ? opts.filter : (() => true);\n            this.tree = {};\n            this.rowKeys = [];\n            this.colKeys = [];\n            this.rowTotals = {};\n            this.colTotals = {};\n            this.allTotal = this.aggregator.map(agg => agg(this, [], []));\n            this.sorted = false;\n            this.aggregatorsLabel = opts.aggregatorsLabel != null ? opts.aggregatorsLabel : [];\n            this.grouping = opts.grouping != null ? opts.grouping : false;\n            this.rowGroupBefore = (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) : true;\n            this.colGroupBefore = (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) : false;\n\n            // iterate through input, accumulating data for cells\n            PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (this.filter(record)) {\n                    return this.processRecord(record);\n                }\n            });\n        }\n\n        //can handle arrays or jQuery selections of tables\n        static forEachRecord(input, derivedAttributes, f) {\n            let addRecord;\n            if ($.isEmptyObject(derivedAttributes)) {\n                addRecord = f;\n            } else {\n                addRecord = function (record) {\n                    for (let k in derivedAttributes) {\n                        const v = derivedAttributes[k];\n                        const left = v(record);\n                        if (left != null) {\n                            record[k] = left;\n                        }\n                    }\n                    return f(record);\n                };\n            }\n\n            //if it's a function, have its calls us back\n            if ($.isFunction(input)) {\n                return input(addRecord);\n            } else if ($.isArray(input)) {\n                if ($.isArray(input[0])) { //array of arrays\n                    return (() => {\n                        const result = [];\n                        for (let i of Object.keys(input || {})) {\n                            const compactRecord = input[i];\n                            if (i > 0) {\n                                const record = {};\n                                for (let j of Object.keys(input[0] || {})) {\n                                    const k = input[0][j];\n                                    record[k] = compactRecord[j];\n                                }\n                                result.push(addRecord(record));\n                            }\n                        }\n                        return result;\n                    })();\n                } else { //array of objects\n                    return (() => {\n                        const result1 = [];\n                        for (let record of input) {\n                            result1.push(addRecord(record));\n                        }\n                        return result1;\n                    })();\n                }\n            } else if (input instanceof $) {\n                const tblCols = [];\n                $('thead > tr > th', input).each(function (i) {\n                    return tblCols.push($(this).text());\n                });\n                return $('tbody > tr', input).each(function (i) {\n                    const record = {};\n                    $('td', this).each(function (j) {\n                        return record[tblCols[j]] = $(this).text();\n                    });\n                    return addRecord(record);\n                });\n            } else {\n                throw new Error('unknown input format');\n            }\n        }\n\n        forEachMatchingRecord(criteria, callback) {\n            return PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (!this.filter(record)) {\n                    return;\n                }\n                for (let k in criteria) {\n                    const v = criteria[k];\n                    if (v !== (record[k] != null ? record[k] : 'null')) {\n                        return;\n                    }\n                }\n                return callback(record);\n            });\n        }\n\n        arrSort(attrs, nulls_first) {\n\n            const sortersArr = [];\n            for (const a of attrs) {\n                sortersArr.push(getSort(this.sorters, a));\n            }\n\n            return function (a, b) {\n                for (let i of Object.keys(sortersArr || {})) {\n                    const sorter = sortersArr[i];\n                    const comparison = sorter(a[i], b[i], nulls_first);\n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            };\n        }\n\n        sortKeys() {\n            if (!this.sorted) {\n                this.sorted = true;\n                const v = (r, c) => this.getAggregator(r, c).value();\n                switch (this.rowOrder) {\n                    case 'value_a_to_z':\n                        this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n                        break;\n                    case 'value_z_to_a':\n                        this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n                        break;\n                    default:\n                        this.rowKeys.sort(this.arrSort(this.rowAttrs, this.rowGroupBefore));\n                }\n                switch (this.colOrder) {\n                    case 'value_a_to_z':\n                        return this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n                    case 'value_z_to_a':\n                        return this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n                    default:\n                        return this.colKeys.sort(this.arrSort(this.colAttrs, this.colGroupBefore));\n                }\n            }\n        }\n\n        getColKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.colKeys;\n            } else {\n                return filterByLength(this.colKeys, this.colAttrs.length);\n            }\n        }\n\n        getRowKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.rowKeys;\n            } else {\n                return filterByLength(this.rowKeys, this.rowAttrs.length);\n            }\n        }\n\n        processRecord(record) { //this code is called in a tight loop\n            let x;\n            let colKeys = [];\n            let rowKeys = [];\n            for (x of this.colAttrs) {\n                colKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            for (x of this.rowAttrs) {\n                rowKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            colKeys = this.grouping && colKeys.length ? subarrays(colKeys) : [colKeys];\n            rowKeys = this.grouping && rowKeys.length ? subarrays(rowKeys) : [rowKeys];\n\n            this.aggregator.forEach((agg, id) => {\n                return this.allTotal[id].push(record);\n            });\n\n            const result = [];\n            for (let j in rowKeys) {\n                const rowKey = rowKeys[j];\n                const flatRowKey = rowKey.join(String.fromCharCode(0));\n\n                const result1 = [];\n                for (let i in colKeys) {\n                    const colKey = colKeys[i];\n                    const flatColKey = colKey.join(String.fromCharCode(0));\n\n                    if (rowKey.length !== 0) {\n                        if (!this.rowTotals[flatRowKey]) {\n                            this.rowKeys.push(rowKey);\n                            this.rowTotals[flatRowKey] = this.aggregator.map(agg => agg(this, rowKey, []));\n                        }\n                        this.rowTotals[flatRowKey].forEach((agg, id) => {\n                            if (!this.grouping || (colKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if (colKey.length !== 0) {\n                        if (!this.colTotals[flatColKey]) {\n                            this.colKeys.push(colKey);\n                            this.colTotals[flatColKey] = this.aggregator.map(agg => agg(this, [], colKey));\n                        }\n                        this.colTotals[flatColKey].forEach((agg, id) => {\n                            if (!this.grouping || (rowKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if ((colKey.length !== 0) && (rowKey.length !== 0)) {\n                        if (!this.tree[flatRowKey]) {\n                            this.tree[flatRowKey] = {};\n                        }\n                        if (!this.tree[flatRowKey][flatColKey]) {\n                            this.tree[flatRowKey][flatColKey] = this.aggregator.map(agg => agg(this, rowKey, colKey));\n                        }\n                        result1.push(this.tree[flatRowKey][flatColKey].forEach((agg, id) => agg.push(record)));\n                    } else {\n                        result1.push(undefined);\n                    }\n                }\n                result.push(result1);\n            }\n            return result;\n        }\n\n        getAggregator(rowKey, colKey, id) {\n            let agg;\n            if (id == null) {\n                id = 0;\n            }\n            const flatRowKey = rowKey.join(String.fromCharCode(0));\n            const flatColKey = colKey.join(String.fromCharCode(0));\n            if ((rowKey.length === 0) && (colKey.length === 0)) {\n                agg = this.allTotal[id];\n            } else if (rowKey.length === 0) {\n                agg = this.colTotals[flatColKey] && this.colTotals[flatColKey][id];\n            } else if (colKey.length === 0) {\n                agg = this.rowTotals[flatRowKey] && this.rowTotals[flatRowKey][id];\n            } else {\n                agg = this.tree[flatRowKey][flatColKey] && this.tree[flatRowKey][flatColKey][id];\n            }\n            return agg != null ? agg : {\n                value() {\n                    return null;\n                }, format() {\n                    return '';\n                },\n            };\n        }\n    }\n\n    //expose these to the outside world\n    $.pivotUtilities = {\n        aggregatorTemplates, aggregators: defaultAggregators, renderers, derivers, locales,\n        naturalSort, numberFormat, sortAs, PivotData,\n    };\n\n    /*\n    Default Renderer for hierarchical table layout\n    */\n\n    function pivotTableRenderer (pivotData, opts) {\n\n        let agg, aggregator, colKey, getClickHandler, i, id, j, td, th, totalAggregator, tr, val, x;\n        const defaults = {\n            table: {\n                clickCallback: null,\n                rowTotals: true,\n                colTotals: true,\n            },\n            localeStrings: {\n                totals: 'Totals',\n            },\n        };\n\n        opts = $.extend(true, {}, defaults, opts);\n\n        const {\n            colAttrs,\n        } = pivotData;\n        const {\n            rowAttrs,\n        } = pivotData;\n        const rowKeys = pivotData.getRowKeys(true);\n        const colKeys = pivotData.getColKeys(true);\n\n        if (opts.table.clickCallback) {\n            getClickHandler = function (value, rowValues, colValues) {\n                let attr, i;\n                const filters = {};\n                for (i of Object.keys(colAttrs || {})) {\n                    attr = colAttrs[i];\n                    if (colValues[i] != null) {\n                        filters[attr] = colValues[i];\n                    }\n                }\n                for (i of Object.keys(rowAttrs || {})) {\n                    attr = rowAttrs[i];\n                    if (rowValues[i] != null) {\n                        filters[attr] = rowValues[i];\n                    }\n                }\n                return e => opts.table.clickCallback(e, value, filters, pivotData);\n            };\n        }\n\n        const compactLayout = (opts.table.compactLayout != null ? opts.table.compactLayout : true) && pivotData.grouping;\n        const rowExpandHandler = compactLayout ? expandRowCol : pivotData.rowGroupBefore ? expandWithSpan : expandRowsGroupAfter;\n\n        const rowsExpandHandler = getExpandHandler(rowKeys, true, rowExpandHandler.bind(pivotData));\n        const colsExpandHandler = getExpandHandler(colKeys, false, expandWithSpan.bind(pivotData));\n\n        //now actually build the outpu\n        const result = document.createElement('table');\n        result.className = 'pvtTable';\n\n        //helper function for setting row/col-span in pivotTableRenderer\n        const spanSize = function (arr, i, j) {\n            let x;\n            if (i !== 0) {\n                let asc, end;\n                let noDraw = true;\n                for (x = 0, end = j, asc = 0 <= end; asc ? x <= end : x >= end; asc ? x++ : x--) {\n                    if (arr[i - 1][x] !== arr[i][x]) {\n                        noDraw = false;\n                    }\n                }\n                if (noDraw) {\n                    return -1; //do not draw cell\n                }\n            }\n            let len = 0;\n            while ((i + len) < arr.length) {\n                let asc1, end1;\n                let stop = false;\n                for (x = 0, end1 = j, asc1 = 0 <= end1; asc1 ? x <= end1 : x >= end1; asc1 ? x++ : x--) {\n                    if (arr[i][x] !== arr[i + len][x]) {\n                        stop = true;\n                    }\n                }\n                if (stop) {\n                    break;\n                }\n                len++;\n            }\n            return len;\n        };\n\n        //the first few rows are for col headers\n        const thead = document.createElement('thead');\n        for (j of Object.keys(colAttrs || {})) {\n            const c = colAttrs[j];\n            tr = document.createElement('tr');\n            if ((parseInt(j) === 0) && (rowAttrs.length !== 0)) {\n                th = document.createElement('th');\n                th.setAttribute('colspan', rowAttrs.length);\n                th.setAttribute('rowspan', colAttrs.length);\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            th.className = 'pvtAxisLabel';\n            th.textContent = c;\n            if (pivotData.grouping && (j < (colAttrs.length - 1))) {\n                th.onclick = getExpandAllHandler(pivotData, +j, false);\n                th.className += ` open level${j}`;\n            }\n            tr.appendChild(th);\n            for (i of Object.keys(colKeys || {})) {\n                colKey = colKeys[i];\n                x = spanSize(colKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtColLabel';\n                    th.className += ` col${pivotData.colGroupBefore ? +i : (+i + x) - 1}`;\n                    th.textContent = colKey[j];\n                    th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                    if ((parseInt(j) === (colAttrs.length - 1)) && (rowAttrs.length !== 0)) {\n                        th.setAttribute('rowspan', 2);\n                    }\n                    if (pivotData.grouping && (j < (colAttrs.length - 1)) && colKey[j]) {\n                        th.className += ' pvtSubtotal open';\n                        th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                        th.onclick = colsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n            if ((parseInt(j) === 0) && opts.table.rowTotals) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', Math.max(1, pivotData.aggregator.length));\n                th.setAttribute('rowspan', colAttrs.length + (rowAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            thead.appendChild(tr);\n        }\n\n        //then a row for row header headers\n        if (rowAttrs.length !== 0) {\n            tr = document.createElement('tr');\n            for (i of Object.keys(rowAttrs || {})) {\n                const r = rowAttrs[i];\n                th = document.createElement('th');\n                th.className = 'pvtAxisLabel';\n                th.textContent = r;\n                if (pivotData.grouping && (i < (rowAttrs.length - 1))) {\n                    th.className += ` open level${i}`;\n                    th.onclick = getExpandAllHandler(pivotData, +i, true);\n                }\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            if (colAttrs.length === 0) {\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', pivotData.aggregator.length);\n            }\n            tr.appendChild(th);\n            thead.appendChild(tr);\n        }\n        result.appendChild(thead);\n\n        //now the actual data rows, with their row headers and totals\n        const tbody = document.createElement('tbody');\n\n        if (pivotData.aggregatorsLabel && (pivotData.aggregatorsLabel.length > 1)) {\n            let lbl;\n            tr = document.createElement('tr');\n            th = document.createElement('th');\n            const colspan = rowAttrs.length + (colAttrs.length === 0 ? 0 : 1);\n            th.setAttribute('colspan', colspan);\n            tr.appendChild(th);\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (lbl of pivotData.aggregatorsLabel) {\n                    th = document.createElement('th');\n                    th.className = `pvtAggregatorLabel col${j}`;\n                    th.textContent = lbl;\n                    tr.appendChild(th);\n                }\n            }\n\n            for (lbl of pivotData.aggregatorsLabel) {\n                th = document.createElement('th');\n                th.className = 'pvtAggregatorLabel';\n                th.textContent = lbl;\n                tr.appendChild(th);\n            }\n\n            tbody.appendChild(tr);\n        }\n\n\n        for (i of Object.keys(rowKeys || {})) {\n            const rowKey = rowKeys[i];\n            tr = document.createElement('tr');\n            const rowGap = rowAttrs.length - rowKey.length;\n            tr.className = rowGap ? `pvtSubtotal level${rowKey.length}` : 'pvtData';\n            for (j of Object.keys(rowKey || {})) {\n                const txt = rowKey[j];\n                if (compactLayout && (j < (rowKey.length - 1))) {\n                    continue;\n                }\n                x = compactLayout ? 1 : spanSize(rowKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtRowLabel';\n                    th.className += ` row${pivotData.rowGroupBefore ? +i : (+i + x) - 1}`;\n                    th.textContent = txt;\n                    th.setAttribute('rowspan', x);\n                    if (compactLayout) {\n                        th.colSpan = rowAttrs.length;\n                        th.style.paddingLeft = 5 + (parseInt(j) * 20) + 'px';\n                    }\n                    if (pivotData.grouping && (j < (rowAttrs.length - 1))) {\n                        th.className += ' open';\n                        th.onclick = rowsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n\n            if (!compactLayout && rowGap) {\n                th = document.createElement('th');\n                th.colSpan = rowGap;\n                th.textContent = `Total (${rowKey[j]})`;\n                tr.appendChild(th);\n            }\n\n            if (colAttrs.length) {\n                th.colSpan++;\n            }\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    aggregator = pivotData.getAggregator(rowKey, colKey, id);\n                    val = aggregator.value(id);\n                    td = document.createElement('td');\n                    if (!rowGap) {\n                        td.className = 'pvtVal ';\n                    }\n                    td.className += `row${i} col${j}`;\n                    if (colAttrs.length - colKey.length) {\n                        td.className = `pvtSubtotal level${colKey.length} row${i} col${j}`;\n                    }\n                    td.textContent = aggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, colKey);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator(rowKey, [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtTotal rowTotal';\n                    td.textContent = totalAggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, []);\n                    }\n                    td.setAttribute('data-for', 'row' + i);\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n\n        //finally, the row for col totals, and a grand total\n        if (opts.table.colTotals || (rowAttrs.length === 0)) {\n            tr = document.createElement('tr');\n            if (opts.table.colTotals || (rowAttrs.length === 0)) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtColTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', rowAttrs.length + (colAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            for (j of Object.keys(colKeys || {})) {\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], colKey, id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = `pvtTotal colTotal col${j}`;\n                    if (colKey.length !== colAttrs.length) {\n                        td.className += ` pvtSubtotal level${colKey.length}`;\n                    }\n                    td.textContent = totalAggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], colKey);\n                    }\n                    td.setAttribute('data-for', 'col' + j);\n                    tr.appendChild(td);\n                }\n            }\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtGrandTotal';\n                    td.textContent = totalAggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], []);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        result.appendChild(tbody);\n\n        //squirrel this away for later\n        result.setAttribute('data-numrows', rowKeys.length);\n        result.setAttribute('data-numcols', colKeys.length);\n\n        return result;\n    }\n\n    /*\n    Pivot Table core: create PivotData object and call Renderer on it\n    */\n\n    $.fn.pivot = function (input, inputOpts, locale) {\n        let e;\n        if (locale == null) {\n            locale = 'en';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n        inputOpts = inputOpts || {};\n        const defaults = {\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            filter() {\n                return true;\n            },\n            aggregator: aggregatorTemplates.count()(),\n            aggregatorName: 'Count',\n            sorters: {},\n            derivedAttributes: {},\n            renderer: pivotTableRenderer,\n        };\n\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n\n        let result;\n        inputOpts.pivotData = null;\n        try {\n            const pivotData = new opts.dataClass(input, opts);\n            try {\n                result = opts.renderer(pivotData, opts.rendererOptions);\n                inputOpts.pivotData = pivotData;\n            } catch (error) {\n                e = error;\n                if (typeof console !== 'undefined' && console !== null) {\n                    console.error(e.stack);\n                }\n                result = $('<span>').html(opts.localeStrings.renderError);\n            }\n        } catch (error1) {\n            e = error1;\n            if (typeof console !== 'undefined' && console !== null) {\n                console.error(e.stack);\n            }\n            result = $('<span>').html(opts.localeStrings.computeError);\n        }\n\n        const x = this[0];\n        while (x.hasChildNodes()) {\n            x.removeChild(x.lastChild);\n        }\n        return this.append(result);\n    };\n\n\n    /*\n    Pivot Table UI: calls the Pivot Table core above with options set by user\n    */\n\n    $.fn.pivotUI = function (input, inputOpts, overwrite, locale) {\n        let opts;\n        let a, c;\n        if (overwrite == null) {\n            overwrite = false;\n        }\n        if (locale == null) {\n            locale = 'fr';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n\n        const defaults = {\n            derivedAttributes: {},\n            aggregators: defaultAggregators,\n            renderers: locales[locale].renderers,\n            hiddenAttributes: [],\n            hiddenFromAggregators: [],\n            hiddenFromDragDrop: [],\n            menuLimit: 500,\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            exclusions: {},\n            inclusions: {},\n            unusedAttrsVertical: 85,\n            autoSortUnusedAttrs: false,\n            onRefresh: null,\n            showUI: true,\n            filter() {\n                return true;\n            },\n            sorters: {},\n            multiple: true,\n            parametersActive: false,\n        };\n\n        let itemsId = 0;\n        let aggregators = [];\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const renameAggregators = () => aggregators.map((agg, id) =>\n            (agg.displayName = String.fromCharCode(97 + id).toUpperCase()));\n\n        const existingOpts = this.data('pivotUIOptions');\n        if ((existingOpts == null) || overwrite) {\n            opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n        } else {\n            opts = existingOpts;\n        }\n\n        if (!inputOpts?.aggregators && locales[locale].formatters) {\n            opts.aggregators = makeAggregators(\n                locales[locale].formatters.format,\n                locales[locale].formatters.formatInt,\n                locales[locale].formatters.formatPct);\n        }\n\n        try {\n            // do a first pass on the data to cache a materialized copy of any\n            // function-valued inputs and to compute dimension cardinalities\n            let attr, i, unusedAttrsVerticalAutoCutoff, x;\n            const attrValues = {};\n            const materializedInput = [];\n            let recordsProcessed = 0;\n            PivotData.forEachRecord(input, opts.derivedAttributes, function (record) {\n                let attr;\n                if (!opts.filter(record)) {\n                    return;\n                }\n                materializedInput.push(record);\n                for (attr of Object.keys(record || {})) {\n                    if ((attrValues[attr] == null)) {\n                        attrValues[attr] = {};\n                        if (recordsProcessed > 0) {\n                            attrValues[attr]['null'] = recordsProcessed;\n                        }\n                    }\n                }\n                for (attr in attrValues) {\n                    const value = record[attr] != null ? record[attr] : 'null';\n                    if (attrValues[attr][value] == null) {\n                        attrValues[attr][value] = 0;\n                    }\n                    attrValues[attr][value]++;\n                }\n                return recordsProcessed++;\n            });\n\n            const uiContainer = $('<div>').addClass('pvtUi');\n\n            const uiMenu = $('<div>').addClass('pvtUiMenu');\n            const uiParameters = $('<div>').addClass('pvtUiParameters');\n            const uiPivotContainer = $('<div>').addClass('pvtUiContainer');\n\n            const uiButtonColumns = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonColumns')\n                .addClass('active')\n                .text(localeStrings.colsLabel)\n                .on('click', function () {\n                    opts.parametersActive = !opts.parametersActive;\n                    if (opts.parametersActive) {\n                        uiButtonColumns.addClass('active');\n                        return uiParameters.show();\n                    } else {\n                        uiButtonColumns.removeClass('active');\n                        return uiParameters.hide();\n                    }\n                })\n                .appendTo(uiMenu);\n\n            const uiButtonGroups = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonGroups')\n                .text(localeStrings.groupsLabel)\n                .on('click', function () {\n                    if (opts.grouping) {\n                        uiButtonGroups.removeClass('active');\n                        opts.grouping = false;\n                    } else {\n                        uiButtonGroups.addClass('active');\n                        opts.grouping = {\n                            colGroupBefore: false,\n                        };\n                    }\n                    return refresh();\n                })\n                .appendTo(uiMenu);\n\n            uiContainer\n                .append(uiMenu)\n                .append(uiParameters)\n                .append(uiPivotContainer);\n\n            //# Render type\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rendererLabel);\n            let pvtRenderType = $('<div>')\n                .addClass('pvtRendererType')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n            const renderer = $('<select>')\n                .addClass('pvtRenderer')\n                .appendTo(pvtRenderType)\n                .bind('change', () => refresh()); //capture reference\n            for (x of Object.keys(opts.renderers || {})) {\n                $('<option>').val(x).html(x).appendTo(renderer);\n            }\n\n\n            //axis list, including the double click menu\n            const unused = $('<div>').addClass('pvtAxisContainer pvtUnused');\n            const shownAttributes = [];\n            for (a in attrValues) {\n                if (!opts.hiddenAttributes.includes(a)) {\n                    shownAttributes.push(a);\n                }\n            }\n            const shownInAggregators = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromAggregators.includes(c)) {\n                    shownInAggregators.push(c);\n                }\n            }\n            const shownInDragDrop = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromDragDrop.includes(c)) {\n                    shownInDragDrop.push(c);\n                }\n            }\n\n            let unusedAttrsVerticalAutoOverride = false;\n            if (opts.unusedAttrsVertical === 'auto') {\n                unusedAttrsVerticalAutoCutoff = 120; // legacy support\n            } else {\n                unusedAttrsVerticalAutoCutoff = parseInt(opts.unusedAttrsVertical);\n            }\n\n            if (!isNaN(unusedAttrsVerticalAutoCutoff)) {\n                let attrLength = 0;\n                for (a of shownInDragDrop) {\n                    attrLength += a.length;\n                }\n                unusedAttrsVerticalAutoOverride = attrLength > unusedAttrsVerticalAutoCutoff;\n            }\n\n            for (i of Object.keys(shownInDragDrop || {})) {\n                attr = shownInDragDrop[i];\n                const values = [];\n                for (const v in attrValues[attr]) {\n                    values.push(v);\n                }\n                let hasExcludedItem = false;\n                const valueList = $('<div>').addClass('pvtFilterBox').hide();\n\n                valueList.append($('<h4>').append(\n                        $('<span>').text(attr),\n                        $('<span>').addClass('count').text(`(${values.length})`),\n                    ),\n                );\n                if (values.length > opts.menuLimit) {\n                    valueList.append($('<p>').html(opts.localeStrings.tooMany));\n                } else {\n                    if (values.length > 5) {\n                        const controls = $('<p>').appendTo(valueList);\n                        const sorter = getSort(opts.sorters, attr);\n                        const placeholder = opts.localeStrings.filterResults;\n                        $('<input>', { type: 'text' }).appendTo(controls)\n                            .attr({ placeholder, class: 'pvtSearch' })\n                            .bind('keyup', function () {\n                                const filter = $(this).val().toLowerCase().trim();\n                                const accept_gen = (prefix, accepted) => (function (v) {\n                                    const real_filter = filter.substring(prefix.length).trim();\n                                    if (real_filter.length === 0) {\n                                        return true;\n                                    }\n                                    let needle = Math.sign(sorter(v.toLowerCase(), real_filter));\n                                    return accepted.includes(needle);\n                                });\n                                const accept =\n                                    filter.indexOf('>=') === 0 ? accept_gen('>=', [1, 0])\n                                        : filter.indexOf('<=') === 0 ? accept_gen('<=', [-1, 0])\n                                            : filter.indexOf('>') === 0 ? accept_gen('>', [1])\n                                                : filter.indexOf('<') === 0 ? accept_gen('<', [-1])\n                                                    : filter.indexOf('~') === 0 ? function (v) {\n                                                            if (filter.substring(1).trim().length === 0) {\n                                                                return true;\n                                                            }\n                                                            return v.toLowerCase().match(filter.substring(1));\n                                                        }\n                                                        : v => v.toLowerCase().indexOf(filter) !== -1;\n\n                                return valueList.find('.pvtCheckContainer p label span.value').each(function () {\n                                    if (accept($(this).text())) {\n                                        return $(this).parent().parent().show();\n                                    } else {\n                                        return $(this).parent().parent().hide();\n                                    }\n                                });\n                            });\n                        controls.append($('<br>'));\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectAll)\n                            .bind('click', function () {\n                                valueList.find('input:visible:not(:checked)')\n                                    .prop('checked', true).toggleClass('changed');\n                                return false;\n                            });\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectNone)\n                            .bind('click', function () {\n                                valueList.find('input:visible:checked')\n                                    .prop('checked', false).toggleClass('changed');\n                                return false;\n                            });\n                    }\n\n                    const checkContainer = $('<div>').addClass('pvtCheckContainer').appendTo(valueList);\n\n                    for (let value of values.sort(getSort(opts.sorters, attr))) {\n                        const valueCount = attrValues[attr][value];\n                        const filterItem = $('<label>');\n                        let filterItemExcluded = false;\n                        if (opts.inclusions[attr]) {\n                            filterItemExcluded = (!opts.inclusions[attr].includes(value));\n                        } else if (opts.exclusions[attr]) {\n                            filterItemExcluded = (opts.exclusions[attr].includes(value));\n                        }\n                        if (!hasExcludedItem) {\n                            hasExcludedItem = filterItemExcluded;\n                        }\n                        $('<input>')\n                            .attr('type', 'checkbox').addClass('pvtFilter')\n                            .attr('checked', !filterItemExcluded).data('filter', [attr, value])\n                            .appendTo(filterItem)\n                            .bind('change', function () {\n                                return $(this).toggleClass('changed');\n                            });\n                        filterItem.append($('<span>').addClass('value').text(value));\n                        filterItem.append($('<span>').addClass('count').text('(' + valueCount + ')'));\n                        checkContainer.append($('<p>').append(filterItem));\n                    }\n                }\n\n                const closeFilterBox = function () {\n                    if (valueList.find('[type=\\'checkbox\\']').length >\n                        valueList.find('[type=\\'checkbox\\']:checked').length) {\n                        attrElem.addClass('pvtFilteredAttribute');\n                    } else {\n                        attrElem.removeClass('pvtFilteredAttribute');\n                    }\n\n                    valueList.find('.pvtSearch').val('');\n                    valueList.find('.pvtCheckContainer p').show();\n                    return valueList.hide();\n                };\n\n\n                const finalButtons = $('<p>').appendTo(valueList);\n\n                if (values.length <= opts.menuLimit) {\n                    $('<button>', { type: 'button' }).text(opts.localeStrings.apply)\n                        .appendTo(finalButtons).bind('click', function () {\n                        if (valueList.find('.changed').removeClass('changed').length) {\n                            refresh();\n                        }\n                        return closeFilterBox();\n                    });\n                }\n\n                $('<button>', { type: 'button' }).text(opts.localeStrings.cancel)\n                    .appendTo(finalButtons).bind('click', function () {\n                    valueList.find('.changed:checked')\n                        .removeClass('changed').prop('checked', false);\n                    valueList.find('.changed:not(:checked)')\n                        .removeClass('changed').prop('checked', true);\n                    return closeFilterBox();\n                });\n\n                const triangleLink = $('<span>').addClass('pvtTriangle')\n                    .html(' &#x25BE;').bind('click', function (e) {\n                        const { left, top } = $(e.currentTarget).position();\n                        return valueList.css({ left: left + 10, top: top + 10 }).show();\n                    });\n\n                const attrElem = $('<li>').addClass(`axis_${i}`)\n                    .append($('<span>').addClass('pvtAttr').text(attr).data('attrName', attr).append(triangleLink));\n\n                if (hasExcludedItem) {\n                    attrElem.addClass('pvtFilteredAttribute');\n                }\n                unused.append(attrElem).append(valueList);\n            }\n\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.valuesLabel);\n\n            //aggregator menu and value area\n            const divAggregator = $('<div>')\n                .addClass('pvtAggregatorChoose')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            const aggregator = $('<select>')\n                .addClass('pvtAggregator')\n                .appendTo(divAggregator)\n                .bind('change', () => {\n                    if (!opts.multiple) {\n                        this.find('.pvtVals .pvtAttrDropdown').each(function () {\n                            return this.remove();\n                        });\n                        aggregators = [{ id: 1, value: aggregator.val() }];\n                        return refresh();\n                    }\n                }); //capture reference\n\n            for (x of Object.keys(opts.aggregators || {})) {\n                aggregator.append($('<option>').val(x).html(locales[locale].localeStrings[x] || locales['en'].localeStrings[x] || x));\n            }\n\n            if (opts.multiple) {\n                $('<a>', { role: 'button' })\n                    .addClass('pvtAddAggregator')\n                    .addClass('pvtToolButton')\n                    .appendTo(divAggregator)\n                    .html('+')\n                    .bind('click', function () {\n                        aggregators.push({ id: ++itemsId, value: aggregator.val() });\n                        renameAggregators();\n                        return refresh();\n                    });\n            }\n\n            const ordering = {\n                key_a_to_z: { rowSymbol: '&varr;', colSymbol: '&harr;', next: 'value_a_to_z' },\n                value_a_to_z: { rowSymbol: '&darr;', colSymbol: '&rarr;', next: 'value_z_to_a' },\n                value_z_to_a: { rowSymbol: '&uarr;', colSymbol: '&larr;', next: 'key_a_to_z' },\n            };\n\n            const rowOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtRowOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.rowOrder).html(ordering[opts.rowOrder].rowSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].rowSymbol);\n                    return refresh();\n                });\n\n            const colOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtColOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.colOrder).html(ordering[opts.colOrder].colSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].colSymbol);\n                    return refresh();\n                });\n\n            const pvVals = $('<div>').addClass('pvtVals')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            uiParameters.append(pvVals);\n\n            // Available fields\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.fieldsLabel);\n\n            uiParameters.append(unused);\n\n            //column axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.colsLabel);\n\n            $('<div>').addClass('pvtAxisContainer pvtCols').appendTo(uiParameters);\n\n            //row axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rowsLabel);\n            $('<div>').addClass('pvtAxisContainer pvtRows').appendTo(uiParameters);\n\n            //the actual pivot table container\n            const pivotTable = $('<div>')\n                .addClass('pvtRendererArea')\n                .appendTo(uiPivotContainer);\n\n            //render the UI in its default state\n            this.html(uiContainer);\n\n            if (!opts.parametersActive) {\n                uiButtonColumns.removeClass('active');\n                uiParameters.hide();\n            }\n\n            //set up the UI initial state as requested by moving elements around\n\n            let initialRender = true;\n\n            //set up for refreshing\n            const refreshDelayed = () => {\n                let vals;\n                const subopts = {\n                    derivedAttributes: opts.derivedAttributes,\n                    localeStrings: opts.localeStrings,\n                    rendererOptions: opts.rendererOptions,\n                    sorters: opts.sorters,\n                    cols: [], rows: [],\n                    dataClass: opts.dataClass,\n                    grouping: opts.grouping,\n                };\n\n                this.find('.pvtRows li span.pvtAttr').each(function () {\n                    return subopts.rows.push($(this).data('attrName'));\n                });\n                this.find('.pvtCols li span.pvtAttr').each(function () {\n                    return subopts.cols.push($(this).data('attrName'));\n                });\n\n                let numInputsToProcess = 0;\n\n                const aggVals = [];\n                let j = 0, idx = j;\n                for (; j < aggregators.length; j++, idx = j) {\n                    let aggregatorType;\n                    const agg = aggregators[idx];\n                    if (typeof agg === 'object') {\n                        aggregatorType = agg.value;\n                    }\n                    const aggIdx = agg.id;\n                    const initialVals = agg.vals;\n\n                    const left = opts.aggregators[aggregatorType]([])().numInputs;\n                    if (left != null) {\n                        numInputsToProcess = left;\n                    } else {\n                        numInputsToProcess = 0;\n                    }\n                    vals = [];\n                    this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                        if (numInputsToProcess !== 0) {\n                            numInputsToProcess--;\n                            if ($(this).val() !== '') {\n                                return vals.push($(this).val());\n                            }\n                        }\n                    });\n\n\n                    const pvtVals = this.find('.pvtVals');\n                    let container = this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx);\n                    const found = container.length > 0;\n                    if (opts.multiple) {\n                        let labelAggregator;\n                        if (!found) {\n                            container = $('<div>')\n                                .addClass('pvtAttrDropdownContainer')\n                                .addClass('pvtAttrDropdownContainer' + aggIdx)\n                                .appendTo(pvtVals);\n                            labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                            $('<label>')\n                                .addClass('pvtAttrDropdown')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .appendTo(container)\n                                .html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                            initialRender = true;\n                        }\n\n                        if (!initialRender) {\n                            this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx + ' label.pvtAttrDropdown')\n                                .each(function () {\n                                    labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                                    return $(this).html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                                });\n                        }\n                    } else {\n                        container = pvtVals;\n                    }\n\n                    if (numInputsToProcess !== 0) {\n                        let asc, end;\n                        for (x = 0, end = numInputsToProcess, asc = 0 <= end; asc ? x < end : x > end; asc ? x++ : x--) {\n                            const newDropdown = $('<select>')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .addClass('pvtAttrDropdown')\n                                .append($('<option>'))\n                                .bind('change', () => refresh());\n                            for (attr of shownInAggregators) {\n                                newDropdown.append($('<option>').val(attr).text(attr));\n                            }\n                            container.append(newDropdown);\n                        }\n                    }\n\n\n                    if (opts.multiple && !found) {\n                        $('<a>')\n                            .html('x')\n                            .addClass('pvtRemoveAggregator')\n                            .addClass('pvtToolButton')\n                            .addClass('pvtAttrDropdown' + aggIdx)\n                            .appendTo(container)\n                            .bind('click', (function () {\n                                    this.instance.find('.pvtVals .pvtAttrDropdownContainer' + this.aggIdx).remove();\n                                    idx = aggregators.findIndex(agg => agg.id === this.aggIdx);\n                                    aggregators.splice(idx, 1);\n                                    renameAggregators();\n                                    return refresh();\n                                }).bind({ instance: this, aggIdx }),\n                            );\n                    }\n\n                    if (initialRender) {\n                        vals = initialVals != null ? initialVals : opts.vals;\n                        i = 0;\n                        this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                            $(this).val(vals[i]);\n                            return i++;\n                        });\n                        initialRender = false;\n                    }\n\n                    aggVals.push(vals);\n                }\n\n                subopts.aggregatorName = aggregators.map(agg => agg.value);\n                subopts.vals = aggVals;\n                subopts.aggregator = aggregators.map((agg, i) => opts.aggregators[agg.value](aggVals[i]));\n                subopts.renderer = opts.renderers[renderer.val()];\n                subopts.rowOrder = rowOrderArrow.data('order');\n                subopts.colOrder = colOrderArrow.data('order');\n                if (opts.multiple) {\n                    subopts.aggregatorsLabel = aggregators.map(agg => agg.displayName);\n                }\n\n                //construct filter here\n                const exclusions = {};\n                this.find('input.pvtFilter').not(':checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        return exclusions[filter[0]].push(filter[1]);\n                    } else {\n                        return exclusions[filter[0]] = [filter[1]];\n                    }\n                });\n                //include inclusions when exclusions present\n                const inclusions = {};\n                this.find('input.pvtFilter:checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        if (inclusions[filter[0]] != null) {\n                            return inclusions[filter[0]].push(filter[1]);\n                        } else {\n                            return inclusions[filter[0]] = [filter[1]];\n                        }\n                    }\n                });\n\n                subopts.filter = function (record) {\n                    if (!opts.filter(record)) {\n                        return false;\n                    }\n                    for (let k in exclusions) {\n                        const excludedItems = exclusions[k];\n                        if (excludedItems.includes('' + (record[k] != null ? record[k] : 'null'))) {\n                            return false;\n                        }\n                    }\n                    return true;\n                };\n\n                pivotTable.pivot(materializedInput, subopts);\n                const pivotUIOptions = $.extend({}, opts, {\n                        cols: subopts.cols,\n                        rows: subopts.rows,\n                        colOrder: subopts.colOrder,\n                        rowOrder: subopts.rowOrder,\n                        vals: aggVals,\n                        exclusions,\n                        inclusions,\n                        inclusionsInfo: inclusions, //duplicated for backwards-compatibility\n                        aggregatorName: aggregators.map(agg => agg.value),\n                        rendererName: renderer.val(),\n                    },\n                );\n\n                const currentPivotData = subopts.pivotData;\n                delete subopts.pivotData;\n                this.data('pivotUIOptions', pivotUIOptions);\n\n                // if requested, make sure unused columns are in alphabetical order\n                if (opts.autoSortUnusedAttrs) {\n                    const unusedAttrsContainer = this.find('td.pvtUnused.pvtAxisContainer');\n                    $(unusedAttrsContainer).children('li')\n                        .sort((a, b) => naturalSort($(a).text(), $(b).text()))\n                        .appendTo(unusedAttrsContainer);\n                }\n\n                pivotTable.css('opacity', 1);\n                if (opts.onRefresh != null) {\n                    return opts.onRefresh(pivotUIOptions, currentPivotData);\n                }\n            };\n\n            const refresh = () => {\n                pivotTable.css('opacity', 0.5);\n                return setTimeout(refreshDelayed, 10);\n            };\n\n            for (x of opts.cols) {\n                this.find('.pvtCols').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            for (x of opts.rows) {\n                this.find('.pvtRows').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            if (opts.aggregatorName != null) {\n                if (opts.multiple) {\n                    opts.aggregatorName = Array.isArray(opts.aggregatorName) ? opts.aggregatorName : [opts.aggregatorName];\n                    for (let idx = 0; idx < opts.aggregatorName.length; idx++) {\n                        const agg = opts.aggregatorName[idx];\n                        aggregators.push({\n                            id: ++itemsId,\n                            value: agg,\n                            vals: (opts.vals != null ? opts.vals[idx] : undefined),\n                        });\n                        renameAggregators();\n                    }\n                } else {\n                    this.find('.pvtVals').append(this.find('.pvtAttrDropdown'));\n                    this.find('.pvtAggregator').val(opts.aggregatorName).change();\n                }\n            } else {\n                this.find('.pvtAggregator').change();\n            }\n            if (opts.rendererName != null) {\n                this.find('.pvtRenderer').val(opts.rendererName);\n            }\n\n            if (!opts.showUI) {\n                this.find('.pvtUiCell').hide();\n            }\n\n            //the very first refresh will actually display the table\n            refresh();\n\n            this.find('.pvtAxisContainer').sortable({\n                update(e, ui) {\n                    if ((ui.sender == null)) {\n                        return refresh();\n                    }\n                },\n                connectWith: this.find('.pvtAxisContainer'),\n                items: 'li',\n                placeholder: 'pvtPlaceholder',\n            });\n        } catch (error) {\n            console.error(error);\n            this.html(opts.localeStrings.uiRenderError);\n        }\n        return this;\n    };\n\n    /*\n    Heatmap post-processing\n    */\n\n    $.fn.heatmap = function (scope, opts) {\n        if (scope == null) {\n            scope = 'heatmap';\n        }\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        // given a series of values\n        // must return a function to map a given value to a CSS color\n        let colorScaleGenerator = opts?.heatmap?.colorScaleGenerator;\n        if (colorScaleGenerator == null) {\n            colorScaleGenerator = function (values) {\n                const min = Math.min(...(values || []));\n                const max = Math.max(...(values || []));\n                return function (x) {\n                    const nonRed = 255 - Math.round((255 * (x - min)) / (max - min));\n                    return `rgb(255,${nonRed},${nonRed})`;\n                };\n            };\n        }\n\n        const heatmapper = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            const colorScale = colorScaleGenerator(values);\n            return forEachCell((x, elem) => elem.css('background-color', colorScale(x)));\n        };\n\n        switch (scope) {\n            case 'heatmap':\n                heatmapper('.pvtVal');\n                break;\n            case 'rowheatmap':\n                for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n                    heatmapper(`.pvtVal.row${i}`);\n                }\n                break;\n            case 'colheatmap':\n                for (let j = 0, end1 = numCols, asc1 = 0 <= end1; asc1 ? j < end1 : j > end1; asc1 ? j++ : j--) {\n                    heatmapper(`.pvtVal.col${j}`);\n                }\n                break;\n        }\n\n        heatmapper('.pvtTotal.rowTotal');\n        heatmapper('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Barchart post-processing\n    */\n\n    $.fn.barchart = function (opts) {\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        const barcharter = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            let max = Math.max(...(values || []));\n            if (max < 0) {\n                max = 0;\n            }\n            let range = max;\n            const min = Math.min(...(values || []));\n            if (min < 0) {\n                range = max - min;\n            }\n            const scaler = x => (100 * x) / (1.4 * range);\n            return forEachCell(function (x, elem) {\n                const text = elem.text();\n                const wrapper = $('<div>').css({\n                    'position': 'relative',\n                    'height': '55px',\n                });\n                let bgColor = 'gray';\n                let bBase = 0;\n                if (min < 0) {\n                    bBase = scaler(-min);\n                }\n                if (x < 0) {\n                    bBase += scaler(x);\n                    bgColor = 'darkred';\n                    x = -x;\n                }\n                wrapper.append($('<div>').css({\n                        'position': 'absolute',\n                        'bottom': bBase + '%',\n                        'left': 0,\n                        'right': 0,\n                        'height': scaler(x) + '%',\n                        'background-color': bgColor,\n                    }),\n                );\n                wrapper.append($('<div>').text(text).css({\n                        'position': 'relative',\n                        'padding-left': '5px',\n                        'padding-right': '5px',\n                    }),\n                );\n\n                return elem.css({ 'padding': 0, 'padding-top': '5px', 'text-align': 'center' }).html(wrapper);\n            });\n        };\n\n        for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n            barcharter(`.pvtVal.row${i}`);\n        }\n        barcharter('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Grouping fold/expand rows and cols\n    */\n\n    const childIndex = el => Array.prototype.indexOf.call(el.parentNode.children, el);\n\n    const childKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const len = keys[n].length;\n\n        const result = [];\n        n = n + up;\n        let key = keys[n];\n        while (key && key.length > len) {\n            if (key.length === (len + 1)) {\n                result.push(n);\n            } else {\n                continue;\n            }\n            n = n + up;\n            key = keys[n];\n        }\n        return result;\n    };\n\n    const parentKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const result = [];\n        let len = keys[n].length;\n        while (len > 1) {\n            let key;\n            n = n - up;\n            key = keys[n];\n            while (key && key.length >= len) {\n                n = n - up;\n                key = keys[n];\n            }\n            result.push(n);\n\n            len = keys[n].length;\n        }\n        return result;\n    };\n\n    const levelKeysIndices = (keys, level) => (keys.filter(d => d.length === level)).map(keys.indexOf.bind(keys));\n\n    const getAxis = function (table, rows, level) {\n        if (rows) {\n            return table.find(`thead tr:last-child th.pvtAxisLabel:nth-of-type(${level})`);\n        } else {\n            return table.find(`thead tr:nth-child(${level}) th.pvtAxisLabel`);\n        }\n    };\n\n    const getHeader = (table, rows, n) => table.find(rows ? `tbody tr th.row${n}` : `thead th.col${n}`);\n\n    const rowGetter = function (table) {\n        const selecttion = table.find('tbody tr');\n        return n => $(selecttion[n]);\n    };\n\n    const colGetter = function (table) {\n        const selecttion = table.find('tr');\n        return n => selecttion.find(`.col${n}`);\n    };\n\n    const showHide = function (getter, keys, nth, offset, show) {\n        const object = childKeysIndices(keys, nth);\n        for (let i in object) {\n            const n = object[i];\n            const row = getter(n + offset);\n            const fn = show ? $.fn.show : $.fn.hide;\n            fn.call(row);\n            if (!row.hasClass('collapsed')) {\n                showHide(getter, keys, n, offset, show);\n            }\n        }\n        return true;\n    };\n\n    const expandRowsGroupAfter = function (cell, rows, keys, nth) {\n        const table = $(cell).closest('table');\n        const initIndex = childIndex(cell.parentNode);\n        const getter = rowGetter(table);\n        const row = getter(nth);\n\n        const insertPoint = row.hasClass('collapsed') ? getter(cell._old) : row;\n        if (!row.hasClass('collapsed')) {\n            cell._old = childIndex(cell.parentNode);\n        }\n        insertPoint.prepend(cell);\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            const parent = (getHeader(table, rows, p))[0];\n            const parentIndex = childIndex(parent.parentNode);\n            parent._old = parent._old != null ? parent._old : parentIndex;\n            if ((parent._old === initIndex) && (parent.rowSpan === 1)) {\n                parent._old -= initIndex - childIndex(cell.parentNode);\n            }\n\n            if (initIndex === parentIndex) {\n                insertPoint.prepend(parent);\n            }\n        }\n\n        return expandWithSpan(cell, rows, keys, nth);\n    };\n\n    const expandRowCol = function (cell, rows, keys, nth, parent) {\n        const table = $(cell).closest('table');\n        const getter = rows ? rowGetter(table) : colGetter(table);\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const offset = rows && (this.aggregator.length > 1) ? 1 : 0;\n        if ((parent != null ? parent[span] : undefined) !== 1) {\n            showHide(getter, keys, nth, offset, getter(nth + offset).hasClass('collapsed'));\n        }\n        getter(nth + offset).toggleClass('collapsed');\n        return $(cell).toggleClass('open close');\n    };\n\n    const expandAll = function (pivotData, table, level, rows, expand) {\n        let i;\n        if (expand && (level > 1)) {\n            getAxis(table, rows, level - 1).removeClass('close').addClass('open');\n            expandAll(pivotData, table, level - 1, rows, expand);\n        }\n\n        const levels = (rows ? pivotData.rowAttrs : pivotData.colAttrs).length - 1;\n        if (!expand && (level < levels)) {\n            let asc, end, start;\n            for (start = level + 1, i = start, end = levels, asc = start <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\n                getAxis(table, rows, i).removeClass('open').addClass('close');\n            }\n        }\n\n        const keys = rows ? pivotData.rowKeys : pivotData.colKeys;\n        const object = levelKeysIndices(keys, level);\n        for (i in object) {\n            const n = object[i];\n            const el = getHeader(table, rows, n);\n            if (expand === el.hasClass('close')) {\n                el.trigger('click');\n            }\n        }\n        return null;\n    };\n\n    const getExpandHandler = (keys, rows, handler) => (function (ev) {\n        const match = ev.target.className.match(rows ? /row(\\d+)/ : /col(\\d+)/);\n        if (match) {\n            return handler(ev.target, rows, keys, +match[1]);\n        }\n    });\n\n    return getExpandAllHandler = (pivotData, level, rows) => (function (ev) {\n        expandAll(pivotData, $(ev.target).closest('table'), level + 1, rows, $(ev.target).hasClass('close'));\n        return $(ev.target).toggleClass('open close');\n    });\n});\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMA,cAAc,GAAG,SAAjBA,cAAcA,CAAaC,WAAW,EAAE;EAC1C,IAAK,QAAOC,OAAO,iCAAAC,OAAA,CAAPD,OAAO,OAAK,QAAQ,IAAM,QAAOE,MAAM,iCAAAD,OAAA,CAANC,MAAM,OAAK,QAAS,EAAE;IAAE;IACjE,OAAOH,WAAW,CAACI,OAAO,CAAC,QAAQ,CAAC,CAAC;EACzC,CAAC,MAAM,IAAK,OAAOC,MAAM,KAAK,UAAU,IAAKA,MAAM,CAACC,GAAG,EAAE;IAAE;IACvD,OAAOD,MAAM,CAAC,CAAC,QAAQ,CAAC,EAAEL,WAAW,CAAC;IACtC;EACJ,CAAC,MAAM;IACH,OAAOA,WAAW,CAACO,MAAM,CAAC;EAC9B;AACJ,CAAC;AAEDR,cAAc,CAAC,UAAUS,CAAC,EAAE;EAExB,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAaC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAE;IACpD,IAAIC,MAAM;IACV,IAAMC,KAAK,GAAGP,CAAC,CAACE,IAAI,CAAC,CAACM,OAAO,CAAC,OAAO,CAAC;IACtC,IAAMC,IAAI,GAAGN,IAAI,GAAG,SAAS,GAAG,SAAS;IAEzC,IAAMO,GAAG,GAAG,CAACP,IAAI,GAAGQ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAI,CAACC,UAAU,CAACC,MAAM,CAAC,GAAG,CAAC;IAAC,IAAAC,IAAA,GACjC,CAACb,IAAI,CAACO,IAAI,CAAC,EAAEP,IAAI,CAACc,KAAK,IAAI,IAAI,GAAGd,IAAI,CAACc,KAAK,GAAGN,GAAG,CAAC;IAA7ER,IAAI,CAACc,KAAK,GAAAD,IAAA;IAAEb,IAAI,CAACO,IAAI,CAAC,GAAAM,IAAA;IACvB,IAAME,MAAM,GAAGf,IAAI,CAACO,IAAI,CAAC,GAAGP,IAAI,CAACc,KAAK;IAEtC,IAAME,MAAM,GAAGC,iBAAiB,CAACf,IAAI,EAAEC,GAAG,CAAC;IAC3C,KAAK,IAAIe,CAAC,IAAIF,MAAM,EAAE;MAClB,IAAMG,CAAC,GAAGH,MAAM,CAACE,CAAC,CAAC;MACnBd,MAAM,GAAIgB,SAAS,CAACf,KAAK,EAAEJ,IAAI,EAAEkB,CAAC,CAAC,CAAE,CAAC,CAAC;MACvC,IAAIf,MAAM,CAACG,IAAI,CAAC,KAAK,CAAC,EAAE;QACpBH,MAAM,CAACU,KAAK,IAAIC,MAAM;QACtB;MACJ;MACAX,MAAM,CAACG,IAAI,CAAC,IAAIQ,MAAM;IAC1B;IAEA,OAAOM,YAAY,CAACrB,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAEC,MAAM,CAAC;EACtD,CAAC;EACD;AACJ;AACA;;EAEI,IAAIkB,mBAAmB;EACvB,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAaC,IAAI,EAAEC,YAAY,EAAEC,UAAU,EAAE;IAC5DF,IAAI,IAAI,EAAE;IACV,IAAMG,CAAC,GAAGH,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC;IACzB,IAAIC,EAAE,GAAGF,CAAC,CAAC,CAAC,CAAC;IACb,IAAMG,EAAE,GAAGH,CAAC,CAACf,MAAM,GAAG,CAAC,GAAGc,UAAU,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAChD,IAAMI,GAAG,GAAG,cAAc;IAC1B,OAAOA,GAAG,CAACC,IAAI,CAACH,EAAE,CAAC,EAAE;MACjBA,EAAE,GAAGA,EAAE,CAACI,OAAO,CAACF,GAAG,EAAE,IAAI,GAAGN,YAAY,GAAG,IAAI,CAAC;IACpD;IACA,OAAOI,EAAE,GAAGC,EAAE;EAClB,CAAC;EAED,IAAMI,YAAY,GAAG,SAAfA,YAAYA,CAAaC,IAAI,EAAE;IACjC,IAAMC,QAAQ,GAAG;MACbC,kBAAkB,EAAE,CAAC;MAAEC,MAAM,EAAE,CAAC;MAChCb,YAAY,EAAE,GAAG;MAAEC,UAAU,EAAE,GAAG;MAClCa,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE;IACxB,CAAC;IACDL,IAAI,GAAGrC,CAAC,CAAC2C,MAAM,CAAC,CAAC,CAAC,EAAEL,QAAQ,EAAED,IAAI,CAAC;IACnC,OAAO,UAAUR,CAAC,EAAE;MAChB,IAAIe,KAAK,CAACf,CAAC,CAAC,IAAI,CAACgB,QAAQ,CAAChB,CAAC,CAAC,EAAE;QAC1B,OAAO,EAAE;MACb;MACA,IAAMiB,MAAM,GAAGrB,aAAa,CAAC,CAACY,IAAI,CAACG,MAAM,GAAGX,CAAC,EAAEkB,OAAO,CAACV,IAAI,CAACE,kBAAkB,CAAC,EAAEF,IAAI,CAACV,YAAY,EAAEU,IAAI,CAACT,UAAU,CAAC;MACpH,OAAO,EAAE,GAAGS,IAAI,CAACI,MAAM,GAAGK,MAAM,GAAGT,IAAI,CAACK,MAAM;IAClD,CAAC;EACL,CAAC;;EAED;EACA,IAAMM,KAAK,GAAGZ,YAAY,CAAC,CAAC;EAC5B,IAAMa,QAAQ,GAAGb,YAAY,CAAC;IAAEG,kBAAkB,EAAE;EAAE,CAAC,CAAC;EACxD,IAAMW,QAAQ,GAAGd,YAAY,CAAC;IAAEG,kBAAkB,EAAE,CAAC;IAAEC,MAAM,EAAE,GAAG;IAAEE,MAAM,EAAE;EAAI,CAAC,CAAC;EAElF,IAAMS,mBAAmB,GAAG;IACxBC,KAAK,WAAAA,MAACC,SAAS,EAAE;MACb,IAAIA,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGJ,QAAQ;MACxB;MACA,OAAO;QAAA,OAAO,UAAUK,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UAC1C,OAAO;YACHJ,KAAK,EAAE,CAAC;YACRK,IAAI,WAAAA,KAAA,EAAG;cACH,OAAO,IAAI,CAACL,KAAK,EAAE;YACvB,CAAC;YACDM,KAAK,WAAAA,MAAA,EAAG;cACJ,OAAO,IAAI,CAACN,KAAK;YACrB,CAAC;YACDO,MAAM,EAAEN;UACZ,CAAC;QACL,CAAC;MAAA,CAAC;IACN,CAAC;IAEDO,OAAO,WAAAA,QAACC,EAAE,EAAER,SAAS,EAAE;MACnB,IAAIA,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGJ,QAAQ;MACxB;MACA,OAAO,YAAmB;QACtB,IAAAa,KAAA,GAAAC,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAAE,KAAA,GAAAC,cAAA,CAAAJ,KAAA;UAAOK,IAAI,GAAAF,KAAA;QACX,OAAO,UAAUX,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACHY,IAAI,EAAE,EAAE;YACRX,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAI,CAAC,IAAI,CAACD,IAAI,CAACE,QAAQ,CAACD,MAAM,CAACF,IAAI,CAAC,CAAC,EAAE;gBACnC,OAAO,IAAI,CAACC,IAAI,CAACX,IAAI,CAACY,MAAM,CAACF,IAAI,CAAC,CAAC;cACvC;YACJ,CAAC;YACDT,KAAK,WAAAA,MAAA,EAAG;cACJ,OAAOG,EAAE,CAAC,IAAI,CAACO,IAAI,CAAC;YACxB,CAAC;YACDT,MAAM,EAAEN,SAAS;YACjBkB,SAAS,EAAGJ,IAAI,IAAI,IAAI,GAAI,CAAC,GAAG;UACpC,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAEDK,GAAG,WAAAA,IAACnB,SAAS,EAAE;MACX,IAAIA,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGL,KAAK;MACrB;MACA,OAAO,YAAmB;QACtB,IAAAyB,KAAA,GAAAV,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAAW,KAAA,GAAAR,cAAA,CAAAO,KAAA;UAAON,IAAI,GAAAO,KAAA;QACX,OAAO,UAAUpB,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACHgB,GAAG,EAAE,CAAC;YACNf,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAI,CAACzB,KAAK,CAAC+B,UAAU,CAACN,MAAM,CAACF,IAAI,CAAC,CAAC,CAAC,EAAE;gBAClC,OAAO,IAAI,CAACK,GAAG,IAAIG,UAAU,CAACN,MAAM,CAACF,IAAI,CAAC,CAAC;cAC/C;YACJ,CAAC;YACDT,KAAK,WAAAA,MAAA,EAAG;cACJ,OAAO,IAAI,CAACc,GAAG;YACnB,CAAC;YACDb,MAAM,EAAEN,SAAS;YACjBkB,SAAS,EAAGJ,IAAI,IAAI,IAAI,GAAI,CAAC,GAAG;UACpC,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAEDS,QAAQ,WAAAA,SAACC,IAAI,EAAExB,SAAS,EAAE;MACtB,IAAIA,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGL,KAAK;MACrB;MACA,OAAO,YAAmB;QACtB,IAAA8B,KAAA,GAAAf,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAAgB,KAAA,GAAAb,cAAA,CAAAY,KAAA;UAAOX,IAAI,GAAAY,KAAA;QACX,OAAO,UAAUzB,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACHwB,GAAG,EAAE,IAAI;YACTC,MAAM,EAAEC,OAAO,CAAC5B,IAAI,IAAI,IAAI,GAAGA,IAAI,CAAC6B,OAAO,GAAGnB,SAAS,EAAEG,IAAI,CAAC;YAC9DV,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAIxC,CAAC,GAAGwC,MAAM,CAACF,IAAI,CAAC;cACpB,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAACG,QAAQ,CAACO,IAAI,CAAC,EAAE;gBAC/BhD,CAAC,GAAG8C,UAAU,CAAC9C,CAAC,CAAC;gBACjB,IAAI,CAACe,KAAK,CAACf,CAAC,CAAC,EAAE;kBACX,IAAI,CAACmD,GAAG,GAAGrE,IAAI,CAACkE,IAAI,CAAC,CAAChD,CAAC,EAAE,IAAI,CAACmD,GAAG,IAAI,IAAI,GAAG,IAAI,CAACA,GAAG,GAAGnD,CAAC,CAAC;gBAC7D;cACJ;cACA,IAAIgD,IAAI,KAAK,OAAO,EAAE;gBAClB,IAAI,IAAI,CAACI,MAAM,CAACpD,CAAC,EAAE,IAAI,CAACmD,GAAG,IAAI,IAAI,GAAG,IAAI,CAACA,GAAG,GAAGnD,CAAC,CAAC,IAAI,CAAC,EAAE;kBACtD,IAAI,CAACmD,GAAG,GAAGnD,CAAC;gBAChB;cACJ;cACA,IAAIgD,IAAI,KAAK,MAAM,EAAE;gBACjB,IAAI,IAAI,CAACI,MAAM,CAACpD,CAAC,EAAE,IAAI,CAACmD,GAAG,IAAI,IAAI,GAAG,IAAI,CAACA,GAAG,GAAGnD,CAAC,CAAC,IAAI,CAAC,EAAE;kBACtD,OAAO,IAAI,CAACmD,GAAG,GAAGnD,CAAC;gBACvB;cACJ;YACJ,CAAC;YACD6B,KAAK,WAAAA,MAAA,EAAG;cACJ,OAAO,IAAI,CAACsB,GAAG;YACnB,CAAC;YACDrB,MAAM,WAAAA,OAAC9B,CAAC,EAAE;cACN,IAAIe,KAAK,CAACf,CAAC,CAAC,EAAE;gBACV,OAAOA,CAAC;cACZ,CAAC,MAAM;gBACH,OAAOwB,SAAS,CAACxB,CAAC,CAAC;cACvB;YACJ,CAAC;YACD0C,SAAS,EAAGJ,IAAI,IAAI,IAAI,GAAI,CAAC,GAAG;UACpC,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAEDiB,QAAQ,WAAAA,SAACC,CAAC,EAAEhC,SAAS,EAAE;MACnB,IAAIA,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGL,KAAK;MACrB;MACA,OAAO,YAAmB;QACtB,IAAAsC,KAAA,GAAAvB,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAAwB,KAAA,GAAArB,cAAA,CAAAoB,KAAA;UAAOnB,IAAI,GAAAoB,KAAA;QACX,OAAO,UAAUjC,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACHgC,IAAI,EAAE,EAAE;YACR/B,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAMxC,CAAC,GAAG8C,UAAU,CAACN,MAAM,CAACF,IAAI,CAAC,CAAC;cAClC,IAAI,CAACvB,KAAK,CAACf,CAAC,CAAC,EAAE;gBACX,OAAO,IAAI,CAAC2D,IAAI,CAAC/B,IAAI,CAAC5B,CAAC,CAAC;cAC5B;YACJ,CAAC;YACD6B,KAAK,WAAAA,MAAA,EAAG;cACJ,IAAI,IAAI,CAAC8B,IAAI,CAAC1E,MAAM,KAAK,CAAC,EAAE;gBACxB,OAAO,IAAI;cACf;cACA,IAAI,CAAC0E,IAAI,CAACC,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;gBAAA,OAAKD,CAAC,GAAGC,CAAC;cAAA,EAAC;cAC/B,IAAMvE,CAAC,GAAG,CAAC,IAAI,CAACoE,IAAI,CAAC1E,MAAM,GAAG,CAAC,IAAIuE,CAAC;cACpC,OAAO,CAAC,IAAI,CAACG,IAAI,CAAC7E,IAAI,CAACiF,KAAK,CAACxE,CAAC,CAAC,CAAC,GAAG,IAAI,CAACoE,IAAI,CAAC7E,IAAI,CAACkF,IAAI,CAACzE,CAAC,CAAC,CAAC,IAAI,GAAG;YACrE,CAAC;YACDuC,MAAM,EAAEN,SAAS;YACjBkB,SAAS,EAAGJ,IAAI,IAAI,IAAI,GAAI,CAAC,GAAG;UACpC,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAED2B,WAAW,WAAAA,YAACjB,IAAI,EAAEkB,IAAI,EAAE1C,SAAS,EAAE;MAC/B,IAAIwB,IAAI,IAAI,IAAI,EAAE;QACdA,IAAI,GAAG,MAAM;MACjB;MACA,IAAIkB,IAAI,IAAI,IAAI,EAAE;QACdA,IAAI,GAAG,CAAC;MACZ;MACA,IAAI1C,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGL,KAAK;MACrB;MACA,OAAO,YAAmB;QACtB,IAAAgD,MAAA,GAAAjC,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAAkC,MAAA,GAAA/B,cAAA,CAAA8B,MAAA;UAAO7B,IAAI,GAAA8B,MAAA;QACX,OAAO,UAAU3C,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACH0C,CAAC,EAAE,GAAG;YAAEC,CAAC,EAAE,GAAG;YAAEC,CAAC,EAAE,GAAG;YACtB3C,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAMxC,CAAC,GAAG8C,UAAU,CAACN,MAAM,CAACF,IAAI,CAAC,CAAC;cAClC,IAAIvB,KAAK,CAACf,CAAC,CAAC,EAAE;gBACV;cACJ;cACA,IAAI,CAACqE,CAAC,IAAI,GAAG;cACb,IAAI,IAAI,CAACA,CAAC,KAAK,GAAG,EAAE;gBAChB,OAAO,IAAI,CAACC,CAAC,GAAGtE,CAAC;cACrB,CAAC,MAAM;gBACH,IAAMwE,KAAK,GAAG,IAAI,CAACF,CAAC,GAAI,CAACtE,CAAC,GAAG,IAAI,CAACsE,CAAC,IAAI,IAAI,CAACD,CAAE;gBAC9C,IAAI,CAACE,CAAC,GAAG,IAAI,CAACA,CAAC,GAAI,CAACvE,CAAC,GAAG,IAAI,CAACsE,CAAC,KAAKtE,CAAC,GAAGwE,KAAK,CAAE;gBAC9C,OAAO,IAAI,CAACF,CAAC,GAAGE,KAAK;cACzB;YACJ,CAAC;YACD3C,KAAK,WAAAA,MAAA,EAAG;cACJ,IAAImB,IAAI,KAAK,MAAM,EAAE;gBACjB,IAAI,IAAI,CAACqB,CAAC,KAAK,CAAC,EAAE;kBACd,OAAO,CAAC,GAAG,CAAC;gBAChB,CAAC,MAAM;kBACH,OAAO,IAAI,CAACC,CAAC;gBACjB;cACJ;cACA,IAAI,IAAI,CAACD,CAAC,IAAIH,IAAI,EAAE;gBAChB,OAAO,CAAC;cACZ;cACA,QAAQlB,IAAI;gBACR,KAAK,KAAK;kBACN,OAAO,IAAI,CAACuB,CAAC,IAAI,IAAI,CAACF,CAAC,GAAGH,IAAI,CAAC;gBACnC,KAAK,OAAO;kBACR,OAAOpF,IAAI,CAAC2F,IAAI,CAAC,IAAI,CAACF,CAAC,IAAI,IAAI,CAACF,CAAC,GAAGH,IAAI,CAAC,CAAC;cAClD;YACJ,CAAC;YACDpC,MAAM,EAAEN,SAAS;YACjBkB,SAAS,EAAGJ,IAAI,IAAI,IAAI,GAAI,CAAC,GAAG;UACpC,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAEDoC,UAAU,WAAAA,WAAClD,SAAS,EAAE;MAClB,IAAIA,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGL,KAAK;MACrB;MACA,OAAO,YAAmB;QACtB,IAAAwD,MAAA,GAAAzC,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAA0C,MAAA,GAAAvC,cAAA,CAAAsC,MAAA;UAAOE,GAAG,GAAAD,MAAA;UAAEE,KAAK,GAAAF,MAAA;QACjB,OAAO,UAAUnD,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACHoD,MAAM,EAAE,CAAC;YACTC,QAAQ,EAAE,CAAC;YACXpD,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAI,CAACzB,KAAK,CAAC+B,UAAU,CAACN,MAAM,CAACqC,GAAG,CAAC,CAAC,CAAC,EAAE;gBACjC,IAAI,CAACE,MAAM,IAAIjC,UAAU,CAACN,MAAM,CAACqC,GAAG,CAAC,CAAC;cAC1C;cACA,IAAI,CAAC9D,KAAK,CAAC+B,UAAU,CAACN,MAAM,CAACsC,KAAK,CAAC,CAAC,CAAC,EAAE;gBACnC,OAAO,IAAI,CAACE,QAAQ,IAAIlC,UAAU,CAACN,MAAM,CAACsC,KAAK,CAAC,CAAC;cACrD;YACJ,CAAC;YACDjD,KAAK,WAAAA,MAAA,EAAG;cACJ,OAAO,IAAI,CAACkD,MAAM,GAAG,IAAI,CAACC,QAAQ;YACtC,CAAC;YACDlD,MAAM,EAAEN,SAAS;YACjBkB,SAAS,EAAGmC,GAAG,IAAI,IAAI,IAAMC,KAAK,IAAI,IAAK,GAAG,CAAC,GAAG;UACtD,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAEDG,iBAAiB,WAAAA,kBAACC,KAAK,EAAE1D,SAAS,EAAE;MAChC,IAAI0D,KAAK,IAAI,IAAI,EAAE;QACfA,KAAK,GAAG,IAAI;MAChB;MACA,IAAI1D,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGL,KAAK;MACrB;MACA,OAAO,YAAmB;QACtB,IAAAgE,MAAA,GAAAjD,SAAA,CAAAjD,MAAA,QAAAkD,SAAA,GAAAD,SAAA;UAAAkD,MAAA,GAAA/C,cAAA,CAAA8C,MAAA;UAAON,GAAG,GAAAO,MAAA;UAAEN,KAAK,GAAAM,MAAA;QACjB,OAAO,UAAU3D,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UACnC,OAAO;YACHoD,MAAM,EAAE,CAAC;YACTC,QAAQ,EAAE,CAAC;YACXpD,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,IAAI,CAACzB,KAAK,CAAC+B,UAAU,CAACN,MAAM,CAACqC,GAAG,CAAC,CAAC,CAAC,EAAE;gBACjC,IAAI,CAACE,MAAM,IAAIjC,UAAU,CAACN,MAAM,CAACqC,GAAG,CAAC,CAAC;cAC1C;cACA,IAAI,CAAC9D,KAAK,CAAC+B,UAAU,CAACN,MAAM,CAACsC,KAAK,CAAC,CAAC,CAAC,EAAE;gBACnC,OAAO,IAAI,CAACE,QAAQ,IAAIlC,UAAU,CAACN,MAAM,CAACsC,KAAK,CAAC,CAAC;cACrD;YACJ,CAAC;YACDjD,KAAK,WAAAA,MAAA,EAAG;cACJ,IAAMwD,IAAI,GAAGH,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;cAC3B,OAAO,CAAE,iBAAiB,GAAG,IAAI,CAACF,QAAQ,GAAK,IAAI,CAACD,MAAM,GAAG,IAAI,CAACC,QAAS,GAAI,kBAAkB,GAAGK,IAAI,GAChGvG,IAAI,CAAC2F,IAAI,CAAE,iBAAiB,IAAI,IAAI,CAACO,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAAC,GAAM,IAAI,CAACD,MAAM,IAAI,CAAC,GAAI,IAAI,CAACA,MAAM,GAAG,IAAI,CAACC,QAAS,CAAC,IAAK,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAAE,CAAE,KAC9J,CAAC,GAAI,iBAAiB,GAAG,IAAI,CAACA,QAAS,CAAC;YACjD,CAAC;YACDlD,MAAM,EAAEN,SAAS;YACjBkB,SAAS,EAAGmC,GAAG,IAAI,IAAI,IAAMC,KAAK,IAAI,IAAK,GAAG,CAAC,GAAG;UACtD,CAAC;QACL,CAAC;MACL,CAAC;IACL,CAAC;IAEDQ,UAAU,WAAAA,WAACC,OAAO,EAAEC,IAAI,EAAEhE,SAAS,EAAE;MACjC,IAAIgE,IAAI,IAAI,IAAI,EAAE;QACdA,IAAI,GAAG,OAAO;MAClB;MACA,IAAIhE,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAGH,QAAQ;MACxB;MACA,OAAO;QAAA,SAAAoE,IAAA,GAAAvD,SAAA,CAAAjD,MAAA,EAAIe,CAAC,OAAA0F,KAAA,CAAAD,IAAA,GAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;UAAD3F,CAAC,CAAA2F,IAAA,IAAAzD,SAAA,CAAAyD,IAAA;QAAA;QAAA,OAAM,UAAUlE,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE;UAC9C,OAAO;YACHiE,QAAQ,EAAE;cAAEC,KAAK,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;cAAEC,GAAG,EAAE,CAACpE,MAAM,EAAE,EAAE,CAAC;cAAEqE,GAAG,EAAE,CAAC,EAAE,EAAEpE,MAAM;YAAE,CAAC,CAAC6D,IAAI,CAAC;YACzEQ,KAAK,EAAET,OAAO,CAAAU,KAAA,SAAAC,kBAAA,CAAKlG,CAAC,IAAI,EAAE,CAAC,CAAC,CAACyB,IAAI,EAAEC,MAAM,EAAEC,MAAM,CAAC;YAClDC,IAAI,WAAAA,KAACY,MAAM,EAAE;cACT,OAAO,IAAI,CAACwD,KAAK,CAACpE,IAAI,CAACY,MAAM,CAAC;YAClC,CAAC;YACDV,MAAM,EAAEN,SAAS;YACjBK,KAAK,WAAAA,MAACsE,EAAE,EAAE;cACN,IAAMC,GAAG,GAAG3E,IAAI,CAAC4E,aAAa,CAAAJ,KAAA,CAAlBxE,IAAI,EAAAyE,kBAAA,CAAmB,GAAAI,MAAA,CAAAJ,kBAAA,CAAI,IAAI,CAACN,QAAQ,IAAEO,EAAE,MAAK,EAAE,CAAC,CAAC;cACjE,OAAO,IAAI,CAACH,KAAK,CAACnE,KAAK,CAAC,CAAC,GAAGuE,GAAG,CAACJ,KAAK,CAACnE,KAAK,CAAC,CAAC;YACjD,CAAC;YACDa,SAAS,EAAE6C,OAAO,CAAAU,KAAA,SAAAC,kBAAA,CAAKlG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC0C;UACvC,CAAC;QACL,CAAC;MAAA,CAAC;IACN;EACJ,CAAC;EAEDpB,mBAAmB,CAACiF,WAAW,GAAG,UAAAC,CAAC;IAAA,OAAIlF,mBAAmB,CAACS,OAAO,CAAE,UAAA/B,CAAC;MAAA,OAAIA,CAAC,CAACf,MAAM;IAAA,GAAGuH,CAAC,CAAC;EAAA;EACtFlF,mBAAmB,CAACmF,UAAU,GAAG,UAAAlC,CAAC;IAAA,OAAIjD,mBAAmB,CAACS,OAAO,CAAE,UAAA/B,CAAC;MAAA,OAAIA,CAAC,CAAC4D,IAAI,CAAC8C,WAAW,CAAC,CAACC,IAAI,CAACpC,CAAC,CAAC;IAAA,GAAI,UAAAvE,CAAC;MAAA,OAAIA,CAAC;IAAA,CAAC,CAAC;EAAA;EAC/GsB,mBAAmB,CAACvC,GAAG,GAAG,UAAAyH,CAAC;IAAA,OAAIlF,mBAAmB,CAACyB,QAAQ,CAAC,KAAK,EAAEyD,CAAC,CAAC;EAAA;EACrElF,mBAAmB,CAACsF,GAAG,GAAG,UAAAJ,CAAC;IAAA,OAAIlF,mBAAmB,CAACyB,QAAQ,CAAC,KAAK,EAAEyD,CAAC,CAAC;EAAA;EACrElF,mBAAmB,CAACuF,KAAK,GAAG,UAAAL,CAAC;IAAA,OAAIlF,mBAAmB,CAACyB,QAAQ,CAAC,OAAO,EAAEyD,CAAC,CAAC;EAAA;EACzElF,mBAAmB,CAACwF,IAAI,GAAG,UAAAN,CAAC;IAAA,OAAIlF,mBAAmB,CAACyB,QAAQ,CAAC,MAAM,EAAEyD,CAAC,CAAC;EAAA;EACvElF,mBAAmB,CAACyF,MAAM,GAAG,UAAAP,CAAC;IAAA,OAAIlF,mBAAmB,CAACiC,QAAQ,CAAC,GAAG,EAAEiD,CAAC,CAAC;EAAA;EACtElF,mBAAmB,CAAC0F,OAAO,GAAG,UAAAR,CAAC;IAAA,OAAIlF,mBAAmB,CAAC2C,WAAW,CAAC,MAAM,EAAE,CAAC,EAAEuC,CAAC,CAAC;EAAA;EAChFlF,mBAAmB,CAAC2F,GAAG,GAAG,UAAC/C,IAAI,EAAEsC,CAAC;IAAA,OAAKlF,mBAAmB,CAAC2C,WAAW,CAAC,KAAK,EAAEC,IAAI,EAAEsC,CAAC,CAAC;EAAA;EACtFlF,mBAAmB,CAAC4F,KAAK,GAAG,UAAChD,IAAI,EAAEsC,CAAC;IAAA,OAAKlF,mBAAmB,CAAC2C,WAAW,CAAC,OAAO,EAAEC,IAAI,EAAEsC,CAAC,CAAC;EAAA;EAE1F,SAASW,eAAeA,CAACC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAE;IAC1C,OAAO;MACH,OAAO,EAAEhG,mBAAmB,CAACC,KAAK,CAAC8F,MAAM,CAAC;MAC1C,qBAAqB,EAAE/F,mBAAmB,CAACiF,WAAW,CAACc,MAAM,CAAC;MAC9D,oBAAoB,EAAE/F,mBAAmB,CAACmF,UAAU,CAAC,IAAI,CAAC;MAC1D,KAAK,EAAEnF,mBAAmB,CAACqB,GAAG,CAACyE,GAAG,CAAC;MACnC,aAAa,EAAE9F,mBAAmB,CAACqB,GAAG,CAAC0E,MAAM,CAAC;MAC9C,SAAS,EAAE/F,mBAAmB,CAAC0F,OAAO,CAACI,GAAG,CAAC;MAC3C,QAAQ,EAAE9F,mBAAmB,CAACyF,MAAM,CAACK,GAAG,CAAC;MACzC,iBAAiB,EAAE9F,mBAAmB,CAAC2F,GAAG,CAAC,CAAC,EAAEG,GAAG,CAAC;MAClD,2BAA2B,EAAE9F,mBAAmB,CAAC4F,KAAK,CAAC,CAAC,EAAEE,GAAG,CAAC;MAC9D,SAAS,EAAE9F,mBAAmB,CAACsF,GAAG,CAACQ,GAAG,CAAC;MACvC,SAAS,EAAE9F,mBAAmB,CAACvC,GAAG,CAACqI,GAAG,CAAC;MACvC,OAAO,EAAE9F,mBAAmB,CAACuF,KAAK,CAACO,GAAG,CAAC;MACvC,MAAM,EAAE9F,mBAAmB,CAACwF,IAAI,CAACM,GAAG,CAAC;MACrC,cAAc,EAAE9F,mBAAmB,CAACoD,UAAU,CAAC0C,GAAG,CAAC;MACnD,iBAAiB,EAAE9F,mBAAmB,CAAC2D,iBAAiB,CAAC,IAAI,EAAEmC,GAAG,CAAC;MACnE,iBAAiB,EAAE9F,mBAAmB,CAAC2D,iBAAiB,CAAC,KAAK,EAAEmC,GAAG,CAAC;MACpE,0BAA0B,EAAE9F,mBAAmB,CAACgE,UAAU,CAAChE,mBAAmB,CAACqB,GAAG,CAAC,CAAC,EAAE,OAAO,EAAE2E,MAAM,CAAC;MACtG,yBAAyB,EAAEhG,mBAAmB,CAACgE,UAAU,CAAChE,mBAAmB,CAACqB,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE2E,MAAM,CAAC;MACnG,4BAA4B,EAAEhG,mBAAmB,CAACgE,UAAU,CAAChE,mBAAmB,CAACqB,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE2E,MAAM,CAAC;MACtG,4BAA4B,EAAEhG,mBAAmB,CAACgE,UAAU,CAAChE,mBAAmB,CAACC,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE+F,MAAM,CAAC;MAC1G,2BAA2B,EAAEhG,mBAAmB,CAACgE,UAAU,CAAChE,mBAAmB,CAACC,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE+F,MAAM,CAAC;MACvG,8BAA8B,EAAEhG,mBAAmB,CAACgE,UAAU,CAAChE,mBAAmB,CAACC,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE+F,MAAM;IAC7G,CAAC;EACL;;EAEA;EACA,IAAMC,kBAAkB,GAAGJ,eAAe,CAAChG,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,CAAC;EAErE,IAAMmG,SAAS,GAAG;IACd,OAAO,WAAAC,MAAChG,IAAI,EAAEjB,IAAI,EAAE;MAChB,OAAOkH,kBAAkB,CAACjG,IAAI,EAAEjB,IAAI,CAAC;IACzC,CAAC;IACD,gBAAgB,WAAAmH,cAAClG,IAAI,EAAEjB,IAAI,EAAE;MACzB,OAAOrC,CAAC,CAACuJ,kBAAkB,CAACjG,IAAI,EAAEjB,IAAI,CAAC,CAAC,CAACoH,QAAQ,CAAC,CAAC;IACvD,CAAC;IACD,SAAS,WAAAC,QAACpG,IAAI,EAAEjB,IAAI,EAAE;MAClB,OAAOrC,CAAC,CAACuJ,kBAAkB,CAACjG,IAAI,EAAEjB,IAAI,CAAC,CAAC,CAACsH,OAAO,CAAC,SAAS,EAAEtH,IAAI,CAAC;IACrE,CAAC;IACD,aAAa,WAAAuH,WAACtG,IAAI,EAAEjB,IAAI,EAAE;MACtB,OAAOrC,CAAC,CAACuJ,kBAAkB,CAACjG,IAAI,EAAEjB,IAAI,CAAC,CAAC,CAACsH,OAAO,CAAC,YAAY,EAAEtH,IAAI,CAAC;IACxE,CAAC;IACD,aAAa,WAAAwH,WAACvG,IAAI,EAAEjB,IAAI,EAAE;MACtB,OAAOrC,CAAC,CAACuJ,kBAAkB,CAACjG,IAAI,EAAEjB,IAAI,CAAC,CAAC,CAACsH,OAAO,CAAC,YAAY,EAAEtH,IAAI,CAAC;IACxE;EACJ,CAAC;EAED,IAAMyH,OAAO,GAAG;IACZC,EAAE,EAAE;MACAC,UAAU,EAAE;QACRrG,MAAM,EAAEX,KAAK;QACbiH,SAAS,EAAEhH,QAAQ;QACnBiH,SAAS,EAAEhH;MACf,CAAC;MACDmG,SAAS,EAATA,SAAS;MACTc,aAAa,EAAE;QACXC,WAAW,EAAE,qDAAqD;QAClEC,YAAY,EAAE,qDAAqD;QACnEC,aAAa,EAAE,gDAAgD;QAC/DC,SAAS,EAAE,YAAY;QACvBC,UAAU,EAAE,aAAa;QACzBC,OAAO,EAAE,oBAAoB;QAC7BC,aAAa,EAAE,eAAe;QAC9B5C,KAAK,EAAE,OAAO;QACd6C,MAAM,EAAE,QAAQ;QAChBC,MAAM,EAAE,QAAQ;QAAE;QAClBC,EAAE,EAAE,IAAI;QAAE;QACVC,EAAE,EAAE,IAAI;QAAE;QACVC,aAAa,EAAE,UAAU;QACzBC,WAAW,EAAE,QAAQ;QACrBC,WAAW,EAAE,QAAQ;QACrBC,SAAS,EAAE,SAAS;QACpBC,SAAS,EAAE,MAAM;QACjBC,WAAW,EAAE;MACjB;IACJ;EACJ,CAAC;EAED,SAAAC,EAAA,MAAAC,YAAA,GAAkBC,MAAM,CAACnL,IAAI,CAACgJ,kBAAkB,CAAC,EAAAiC,EAAA,GAAAC,YAAA,CAAAxK,MAAA,EAAAuK,EAAA,IAAE;IAA9C,IAAMpD,GAAG,GAAAqD,YAAA,CAAAD,EAAA;IACVvB,OAAO,CAACC,EAAE,CAACI,aAAa,CAAClC,GAAG,CAAC,GAAGA,GAAG;EACvC;;EAEA;EACA,IAAMuD,UAAU,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;EACvG,IAAMC,UAAU,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;EACpE,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAGC,MAAM;IAAA,OAAI,CAAC,GAAG,GAAGA,MAAM,EAAEC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAAA;EAEtD,IAAMC,QAAQ,GAAG;IACbC,GAAG,WAAAA,IAAClE,GAAG,EAAEmE,QAAQ,EAAE;MACf,OAAO,UAAA1H,MAAM;QAAA,OAAIA,MAAM,CAACuD,GAAG,CAAC,GAAIvD,MAAM,CAACuD,GAAG,CAAC,GAAGmE,QAAS;MAAA;IAC3D,CAAC;IACDC,UAAU,WAAAA,WAACpE,GAAG,EAAEqE,YAAY,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;MACzD,IAAIF,SAAS,IAAI,IAAI,EAAE;QACnBA,SAAS,GAAG,KAAK;MACrB;MACA,IAAIC,QAAQ,IAAI,IAAI,EAAE;QAClBA,QAAQ,GAAGX,UAAU;MACzB;MACA,IAAIY,QAAQ,IAAI,IAAI,EAAE;QAClBA,QAAQ,GAAGX,UAAU;MACzB;MACA,IAAMY,GAAG,GAAGH,SAAS,GAAG,KAAK,GAAG,EAAE;MAClC,OAAO,UAAU7H,MAAM,EAAE;QAAE;QACvB,IAAMiI,IAAI,GAAG,IAAIC,IAAI,CAACA,IAAI,CAACC,KAAK,CAACnI,MAAM,CAACuD,GAAG,CAAC,CAAC,CAAC;QAC9C,IAAIhF,KAAK,CAAC0J,IAAI,CAAC,EAAE;UACb,OAAO,EAAE;QACb;QACA,OAAOL,YAAY,CAAC9J,OAAO,CAAC,OAAO,EAAE,UAAUgE,CAAC,EAAE9E,CAAC,EAAE;UACjD,QAAQA,CAAC;YACL,KAAK,GAAG;cACJ,OAAOiL,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,cAAW,CAAC,CAAC;YACtC,KAAK,GAAG;cACJ,OAAOX,OAAO,CAACY,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,WAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;YAChD,KAAK,GAAG;cACJ,OAAOF,QAAQ,CAACG,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,WAAQ,CAAC,CAAC,CAAC;YAC7C,KAAK,GAAG;cACJ,OAAOX,OAAO,CAACY,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,UAAO,CAAC,CAAC,CAAC;YAC3C,KAAK,GAAG;cACJ,OAAOD,QAAQ,CAACE,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,SAAM,CAAC,CAAC,CAAC;YAC3C,KAAK,GAAG;cACJ,OAAOC,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,SAAM,CAAC,CAAC;YACjC,KAAK,GAAG;cACJ,OAAOX,OAAO,CAACY,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,WAAQ,CAAC,CAAC,CAAC;YAC5C,KAAK,GAAG;cACJ,OAAOX,OAAO,CAACY,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,aAAU,CAAC,CAAC,CAAC;YAC9C,KAAK,GAAG;cACJ,OAAOX,OAAO,CAACY,IAAI,OAAAnE,MAAA,CAAOkE,GAAG,aAAU,CAAC,CAAC,CAAC;YAC9C;cACI,OAAO,GAAG,GAAGhL,CAAC;UACtB;QACJ,CAAC,CAAC;MACN,CAAC;IACL;EACJ,CAAC;EAED,IAAMoL,EAAE,GAAG,cAAc;EACzB,IAAMC,EAAE,GAAG,IAAI;EACf,IAAMC,EAAE,GAAG,IAAI;EACf,IAAMpE,WAAW,GAAG,SAAdA,WAAWA,CAAIqE,EAAE,EAAEC,EAAE,EAAEC,WAAW,EAAK;IACzC;IACA,IAAIA,WAAW,IAAI,IAAI,EAAE;MACrBA,WAAW,GAAG,IAAI;IACtB;IACA,IAAMC,EAAE,GAAGD,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;IAC/B,IAAKD,EAAE,IAAI,IAAI,IAAMD,EAAE,IAAI,IAAK,EAAE;MAC9B,OAAO,CAAC,CAAC,GAAGG,EAAE;IAClB;IACA,IAAKH,EAAE,IAAI,IAAI,IAAMC,EAAE,IAAI,IAAK,EAAE;MAC9B,OAAO,CAAC,GAAGE,EAAE;IACjB;;IAEA;IACA,IAAK,OAAOH,EAAE,KAAK,QAAQ,IAAKhK,KAAK,CAACgK,EAAE,CAAC,EAAE;MACvC,OAAO,CAAC,CAAC;IACb;IACA,IAAK,OAAOC,EAAE,KAAK,QAAQ,IAAKjK,KAAK,CAACiK,EAAE,CAAC,EAAE;MACvC,OAAO,CAAC;IACZ;;IAEA;IACA,IAAMG,GAAG,GAAG,CAACJ,EAAE;IACf,IAAMK,GAAG,GAAG,CAACJ,EAAE;IACf,IAAIG,GAAG,GAAGC,GAAG,EAAE;MACX,OAAO,CAAC,CAAC;IACb;IACA,IAAID,GAAG,GAAGC,GAAG,EAAE;MACX,OAAO,CAAC;IACZ;;IAEA;IACA,IAAK,OAAOL,EAAE,KAAK,QAAQ,IAAM,OAAOC,EAAE,KAAK,QAAS,EAAE;MACtD,OAAO,CAAC,CAAC;IACb;IACA,IAAK,OAAOA,EAAE,KAAK,QAAQ,IAAM,OAAOD,EAAE,KAAK,QAAS,EAAE;MACtD,OAAO,CAAC;IACZ;IACA,IAAK,OAAOA,EAAE,KAAK,QAAQ,IAAM,OAAOC,EAAE,KAAK,QAAS,EAAE;MACtD,OAAO,CAAC;IACZ;;IAEA;IACA,IAAIjK,KAAK,CAACqK,GAAG,CAAC,IAAI,CAACrK,KAAK,CAACoK,GAAG,CAAC,EAAE;MAC3B,OAAO,CAAC,CAAC;IACb;IACA,IAAIpK,KAAK,CAACoK,GAAG,CAAC,IAAI,CAACpK,KAAK,CAACqK,GAAG,CAAC,EAAE;MAC3B,OAAO,CAAC;IACZ;;IAEA;IACA,IAAIvH,CAAC,GAAGwH,MAAM,CAACN,EAAE,CAAC;IAClB,IAAIjH,CAAC,GAAGuH,MAAM,CAACL,EAAE,CAAC;IAClB,IAAInH,CAAC,KAAKC,CAAC,EAAE;MACT,OAAO,CAAC;IACZ;IACA,IAAI,CAAC+G,EAAE,CAACxK,IAAI,CAACwD,CAAC,CAAC,IAAI,CAACgH,EAAE,CAACxK,IAAI,CAACyD,CAAC,CAAC,EAAE;MAC5B,OAAQD,CAAC,GAAGC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC1B;;IAEA;IACAD,CAAC,GAAGA,CAAC,CAACyH,KAAK,CAACV,EAAE,CAAC,CAAC,CAAC;IACjB9G,CAAC,GAAGA,CAAC,CAACwH,KAAK,CAACV,EAAE,CAAC;IACf,OAAO/G,CAAC,CAAC5E,MAAM,IAAI6E,CAAC,CAAC7E,MAAM,EAAE;MACzB,IAAMsM,EAAE,GAAG1H,CAAC,CAAC2H,KAAK,CAAC,CAAC;MACpB,IAAMC,EAAE,GAAG3H,CAAC,CAAC0H,KAAK,CAAC,CAAC;MACpB,IAAID,EAAE,KAAKE,EAAE,EAAE;QACX,IAAIZ,EAAE,CAACxK,IAAI,CAACkL,EAAE,CAAC,IAAIV,EAAE,CAACxK,IAAI,CAACoL,EAAE,CAAC,EAAE;UAAE;UAC9B,OAAOF,EAAE,CAACjL,OAAO,CAACwK,EAAE,EAAE,IAAI,CAAC,GAAGW,EAAE,CAACnL,OAAO,CAACwK,EAAE,EAAE,IAAI,CAAC;QACtD,CAAC,MAAM;UACH,OAAQS,EAAE,GAAGE,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;QAC5B;MACJ;IACJ;IACA,OAAO5H,CAAC,CAAC5E,MAAM,GAAG6E,CAAC,CAAC7E,MAAM;EAC9B,CAAC;EAED,IAAMyM,MAAM,GAAG,SAATA,MAAMA,CAAaC,KAAK,EAAE;IAC5B,IAAMC,OAAO,GAAG,CAAC,CAAC;IAClB,IAAMC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;IACtB,KAAK,IAAItM,CAAC,IAAIoM,KAAK,EAAE;MACjB,IAAM3L,CAAC,GAAG2L,KAAK,CAACpM,CAAC,CAAC;MAClBqM,OAAO,CAAC5L,CAAC,CAAC,GAAGT,CAAC;MACd,IAAI,OAAOS,CAAC,KAAK,QAAQ,EAAE;QACvB6L,SAAS,CAAC7L,CAAC,CAAC8L,WAAW,CAAC,CAAC,CAAC,GAAGvM,CAAC;MAClC;IACJ;IACA,OAAO,UAAUsE,CAAC,EAAEC,CAAC,EAAE;MACnB,IAAK8H,OAAO,CAAC/H,CAAC,CAAC,IAAI,IAAI,IAAM+H,OAAO,CAAC9H,CAAC,CAAC,IAAI,IAAK,EAAE;QAC9C,OAAO8H,OAAO,CAAC/H,CAAC,CAAC,GAAG+H,OAAO,CAAC9H,CAAC,CAAC;MAClC,CAAC,MAAM,IAAI8H,OAAO,CAAC/H,CAAC,CAAC,IAAI,IAAI,EAAE;QAC3B,OAAO,CAAC,CAAC;MACb,CAAC,MAAM,IAAI+H,OAAO,CAAC9H,CAAC,CAAC,IAAI,IAAI,EAAE;QAC3B,OAAO,CAAC;MACZ,CAAC,MAAM,IAAK+H,SAAS,CAAChI,CAAC,CAAC,IAAI,IAAI,IAAMgI,SAAS,CAAC/H,CAAC,CAAC,IAAI,IAAK,EAAE;QACzD,OAAO+H,SAAS,CAAChI,CAAC,CAAC,GAAGgI,SAAS,CAAC/H,CAAC,CAAC;MACtC,CAAC,MAAM,IAAI+H,SAAS,CAAChI,CAAC,CAAC,IAAI,IAAI,EAAE;QAC7B,OAAO,CAAC,CAAC;MACb,CAAC,MAAM,IAAIgI,SAAS,CAAC/H,CAAC,CAAC,IAAI,IAAI,EAAE;QAC7B,OAAO,CAAC;MACZ,CAAC,MAAM;QACH,OAAO4C,WAAW,CAAC7C,CAAC,EAAEC,CAAC,CAAC;MAC5B;IACJ,CAAC;EACL,CAAC;EAED,SAAST,OAAOA,CAAEC,OAAO,EAAEhB,IAAI,EAAE;IAC7B,IAAIgB,OAAO,IAAI,IAAI,EAAE;MACjB,IAAInF,CAAC,CAAC4N,UAAU,CAACzI,OAAO,CAAC,EAAE;QACvB,IAAMM,IAAI,GAAGN,OAAO,CAAChB,IAAI,CAAC;QAC1B,IAAInE,CAAC,CAAC4N,UAAU,CAACnI,IAAI,CAAC,EAAE;UACpB,OAAOA,IAAI;QACf;MACJ,CAAC,MAAM,IAAIN,OAAO,CAAChB,IAAI,CAAC,IAAI,IAAI,EAAE;QAC9B,OAAOgB,OAAO,CAAChB,IAAI,CAAC;MACxB;IACJ;IACA,OAAOoE,WAAW;EACtB;EAEA,IAAMsF,cAAc,GAAG,SAAjBA,cAAcA,CAAIzN,IAAI,EAAEU,MAAM;IAAA,OAAKV,IAAI,CAAC0N,MAAM,CAAC,UAAAjM,CAAC;MAAA,OAAIA,CAAC,CAACf,MAAM,KAAKA,MAAM;IAAA,EAAC;EAAA;EAE9E,IAAMiN,SAAS,GAAG,SAAZA,SAASA,CAAGC,KAAK;IAAA,OAAIA,KAAK,CAACC,GAAG,CAAC,UAACC,CAAC,EAAE9M,CAAC;MAAA,OAAK4M,KAAK,CAACG,KAAK,CAAC,CAAC,EAAE/M,CAAC,GAAG,CAAC,CAAC;IAAA,EAAC;EAAA,EAAC,CAAE;;EAExE;AACJ;AACA;EAFI,IAIMgN,SAAS;IACX,SAAAA,UAAYC,KAAK,EAAEhM,IAAI,EAAE;MAAA,IAAAiM,KAAA;MAAAC,eAAA,OAAAH,SAAA;MACrB,IAAI,CAACI,OAAO,GAAG,IAAI,CAACA,OAAO,CAACC,IAAI,CAAC,IAAI,CAAC;MACtC,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACD,IAAI,CAAC,IAAI,CAAC;MACxC,IAAI,CAACE,UAAU,GAAG,IAAI,CAACA,UAAU,CAACF,IAAI,CAAC,IAAI,CAAC;MAC5C,IAAI,CAACG,UAAU,GAAG,IAAI,CAACA,UAAU,CAACH,IAAI,CAAC,IAAI,CAAC;MAC5C,IAAI,CAACvG,aAAa,GAAG,IAAI,CAACA,aAAa,CAACuG,IAAI,CAAC,IAAI,CAAC;MAClD,IAAIpM,IAAI,IAAI,IAAI,EAAE;QACdA,IAAI,GAAG,CAAC,CAAC;MACb;MACA,IAAI,CAACgM,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC9G,KAAK,CAACsH,OAAO,CAACxM,IAAI,CAACxB,UAAU,CAAC,EAAE;QACjCwB,IAAI,CAACxB,UAAU,GAAGwB,IAAI,CAACxB,UAAU,IAAI,IAAI,GAAGwB,IAAI,CAACxB,UAAU,GAAGsC,mBAAmB,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC3Ff,IAAI,CAACxB,UAAU,GAAG,CAACwB,IAAI,CAACxB,UAAU,CAAC;MACvC;MACA,IAAI,CAACA,UAAU,GAAGwB,IAAI,CAACxB,UAAU,IAAI,IAAI,GAAGwB,IAAI,CAACxB,UAAU,GAAG,CAACsC,mBAAmB,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MAC7F,IAAI,CAAC0L,cAAc,GAAGzM,IAAI,CAACyM,cAAc,IAAI,IAAI,GAAGzM,IAAI,CAACyM,cAAc,GAAG,OAAO;MACjF,IAAI,CAACC,QAAQ,GAAG1M,IAAI,CAAC2M,IAAI,IAAI,IAAI,GAAG3M,IAAI,CAAC2M,IAAI,GAAG,EAAE;MAClD,IAAI,CAACC,QAAQ,GAAG5M,IAAI,CAAClC,IAAI,IAAI,IAAI,GAAGkC,IAAI,CAAClC,IAAI,GAAG,EAAE;MAClD,IAAI,CAAC+O,QAAQ,GAAG7M,IAAI,CAACmD,IAAI,IAAI,IAAI,GAAGnD,IAAI,CAACmD,IAAI,GAAG,EAAE;MAClD,IAAI,CAACL,OAAO,GAAG9C,IAAI,CAAC8C,OAAO,IAAI,IAAI,GAAG9C,IAAI,CAAC8C,OAAO,GAAG,CAAC,CAAC;MACvD,IAAI,CAACgK,QAAQ,GAAG9M,IAAI,CAAC8M,QAAQ,IAAI,IAAI,GAAG9M,IAAI,CAAC8M,QAAQ,GAAG,YAAY;MACpE,IAAI,CAACC,QAAQ,GAAG/M,IAAI,CAAC+M,QAAQ,IAAI,IAAI,GAAG/M,IAAI,CAAC+M,QAAQ,GAAG,YAAY;MACpE,IAAI,CAACC,iBAAiB,GAAGhN,IAAI,CAACgN,iBAAiB,IAAI,IAAI,GAAGhN,IAAI,CAACgN,iBAAiB,GAAG,CAAC,CAAC;MACrF,IAAI,CAACvB,MAAM,GAAGzL,IAAI,CAACyL,MAAM,IAAI,IAAI,GAAGzL,IAAI,CAACyL,MAAM,GAAI;QAAA,OAAM,IAAI;MAAA,CAAC;MAC9D,IAAI,CAACwB,IAAI,GAAG,CAAC,CAAC;MACd,IAAI,CAACC,OAAO,GAAG,EAAE;MACjB,IAAI,CAACC,OAAO,GAAG,EAAE;MACjB,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;MACnB,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;MACnB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAC9O,UAAU,CAACoN,GAAG,CAAC,UAAAhG,GAAG;QAAA,OAAIA,GAAG,CAACqG,KAAI,EAAE,EAAE,EAAE,EAAE,CAAC;MAAA,EAAC;MAC7D,IAAI,CAACsB,MAAM,GAAG,KAAK;MACnB,IAAI,CAACC,gBAAgB,GAAGxN,IAAI,CAACwN,gBAAgB,IAAI,IAAI,GAAGxN,IAAI,CAACwN,gBAAgB,GAAG,EAAE;MAClF,IAAI,CAACC,QAAQ,GAAGzN,IAAI,CAACyN,QAAQ,IAAI,IAAI,GAAGzN,IAAI,CAACyN,QAAQ,GAAG,KAAK;MAC7D,IAAI,CAACC,cAAc,GAAG,CAAC1N,IAAI,CAACyN,QAAQ,IAAI,IAAI,GAAGzN,IAAI,CAACyN,QAAQ,CAACC,cAAc,GAAG/L,SAAS,KAAK,IAAI,GAAI3B,IAAI,CAACyN,QAAQ,IAAI,IAAI,GAAGzN,IAAI,CAACyN,QAAQ,CAACC,cAAc,GAAG/L,SAAS,GAAI,IAAI;MAC5K,IAAI,CAACgM,cAAc,GAAG,CAAC3N,IAAI,CAACyN,QAAQ,IAAI,IAAI,GAAGzN,IAAI,CAACyN,QAAQ,CAACE,cAAc,GAAGhM,SAAS,KAAK,IAAI,GAAI3B,IAAI,CAACyN,QAAQ,IAAI,IAAI,GAAGzN,IAAI,CAACyN,QAAQ,CAACE,cAAc,GAAGhM,SAAS,GAAI,KAAK;;MAE7K;MACAoK,SAAS,CAAC6B,aAAa,CAAC,IAAI,CAAC5B,KAAK,EAAE,IAAI,CAACgB,iBAAiB,EAAE,UAAAhL,MAAM,EAAI;QAClE,IAAIiK,KAAI,CAACR,MAAM,CAACzJ,MAAM,CAAC,EAAE;UACrB,OAAOiK,KAAI,CAAC4B,aAAa,CAAC7L,MAAM,CAAC;QACrC;MACJ,CAAC,CAAC;IACN;;IAEA;IAAA,OAAA8L,YAAA,CAAA/B,SAAA;MAAAgC,GAAA;MAAA1M,KAAA,EAgEA,SAAA2M,sBAAsBC,QAAQ,EAAEC,QAAQ,EAAE;QAAA,IAAAC,MAAA;QACtC,OAAOpC,SAAS,CAAC6B,aAAa,CAAC,IAAI,CAAC5B,KAAK,EAAE,IAAI,CAACgB,iBAAiB,EAAE,UAAAhL,MAAM,EAAI;UACzE,IAAI,CAACmM,MAAI,CAAC1C,MAAM,CAACzJ,MAAM,CAAC,EAAE;YACtB;UACJ;UACA,KAAK,IAAIoM,CAAC,IAAIH,QAAQ,EAAE;YACpB,IAAMI,CAAC,GAAGJ,QAAQ,CAACG,CAAC,CAAC;YACrB,IAAIC,CAAC,MAAMrM,MAAM,CAACoM,CAAC,CAAC,IAAI,IAAI,GAAGpM,MAAM,CAACoM,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE;cAChD;YACJ;UACJ;UACA,OAAOF,QAAQ,CAAClM,MAAM,CAAC;QAC3B,CAAC,CAAC;MACN;IAAC;MAAA+L,GAAA;MAAA1M,KAAA,EAED,SAAA8K,QAAQmC,KAAK,EAAE7D,WAAW,EAAE;QAExB,IAAM8D,UAAU,GAAG,EAAE;QAAC,IAAAC,SAAA,GAAAC,0BAAA,CACNH,KAAK;UAAAI,KAAA;QAAA;UAArB,KAAAF,SAAA,CAAAzK,CAAA,MAAA2K,KAAA,GAAAF,SAAA,CAAA3K,CAAA,IAAA8K,IAAA,GAAuB;YAAA,IAAZtL,CAAC,GAAAqL,KAAA,CAAArN,KAAA;YACRkN,UAAU,CAACnN,IAAI,CAACyB,OAAO,CAAC,IAAI,CAACC,OAAO,EAAEO,CAAC,CAAC,CAAC;UAC7C;QAAC,SAAAuL,GAAA;UAAAJ,SAAA,CAAAK,CAAA,CAAAD,GAAA;QAAA;UAAAJ,SAAA,CAAAxI,CAAA;QAAA;QAED,OAAO,UAAU3C,CAAC,EAAEC,CAAC,EAAE;UACnB,SAAAwL,GAAA,MAAAC,aAAA,GAAc7F,MAAM,CAACnL,IAAI,CAACwQ,UAAU,IAAI,CAAC,CAAC,CAAC,EAAAO,GAAA,GAAAC,aAAA,CAAAtQ,MAAA,EAAAqQ,GAAA,IAAE;YAAxC,IAAI/P,CAAC,GAAAgQ,aAAA,CAAAD,GAAA;YACN,IAAMlM,MAAM,GAAG2L,UAAU,CAACxP,CAAC,CAAC;YAC5B,IAAMiQ,UAAU,GAAGpM,MAAM,CAACS,CAAC,CAACtE,CAAC,CAAC,EAAEuE,CAAC,CAACvE,CAAC,CAAC,EAAE0L,WAAW,CAAC;YAClD,IAAIuE,UAAU,KAAK,CAAC,EAAE;cAClB,OAAOA,UAAU;YACrB;UACJ;UACA,OAAO,CAAC;QACZ,CAAC;MACL;IAAC;MAAAjB,GAAA;MAAA1M,KAAA,EAED,SAAAgL,SAAA,EAAW;QAAA,IAAA4C,MAAA;QACP,IAAI,CAAC,IAAI,CAAC1B,MAAM,EAAE;UACd,IAAI,CAACA,MAAM,GAAG,IAAI;UAClB,IAAMc,CAAC,GAAG,SAAJA,CAACA,CAAIa,CAAC,EAAEC,CAAC;YAAA,OAAKF,MAAI,CAACpJ,aAAa,CAACqJ,CAAC,EAAEC,CAAC,CAAC,CAAC9N,KAAK,CAAC,CAAC;UAAA;UACpD,QAAQ,IAAI,CAACyL,QAAQ;YACjB,KAAK,cAAc;cACf,IAAI,CAACI,OAAO,CAAC9J,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;gBAAA,OAAK4C,WAAW,CAACmI,CAAC,CAAChL,CAAC,EAAE,EAAE,CAAC,EAAEgL,CAAC,CAAC/K,CAAC,EAAE,EAAE,CAAC,CAAC;cAAA,EAAC;cAC5D;YACJ,KAAK,cAAc;cACf,IAAI,CAAC4J,OAAO,CAAC9J,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;gBAAA,OAAK,CAAC4C,WAAW,CAACmI,CAAC,CAAChL,CAAC,EAAE,EAAE,CAAC,EAAEgL,CAAC,CAAC/K,CAAC,EAAE,EAAE,CAAC,CAAC;cAAA,EAAC;cAC7D;YACJ;cACI,IAAI,CAAC4J,OAAO,CAAC9J,IAAI,CAAC,IAAI,CAAC+I,OAAO,CAAC,IAAI,CAACS,QAAQ,EAAE,IAAI,CAACc,cAAc,CAAC,CAAC;UAC3E;UACA,QAAQ,IAAI,CAACX,QAAQ;YACjB,KAAK,cAAc;cACf,OAAO,IAAI,CAACI,OAAO,CAAC/J,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;gBAAA,OAAK4C,WAAW,CAACmI,CAAC,CAAC,EAAE,EAAEhL,CAAC,CAAC,EAAEgL,CAAC,CAAC,EAAE,EAAE/K,CAAC,CAAC,CAAC;cAAA,EAAC;YACvE,KAAK,cAAc;cACf,OAAO,IAAI,CAAC6J,OAAO,CAAC/J,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;gBAAA,OAAK,CAAC4C,WAAW,CAACmI,CAAC,CAAC,EAAE,EAAEhL,CAAC,CAAC,EAAEgL,CAAC,CAAC,EAAE,EAAE/K,CAAC,CAAC,CAAC;cAAA,EAAC;YACxE;cACI,OAAO,IAAI,CAAC6J,OAAO,CAAC/J,IAAI,CAAC,IAAI,CAAC+I,OAAO,CAAC,IAAI,CAACO,QAAQ,EAAE,IAAI,CAACiB,cAAc,CAAC,CAAC;UAClF;QACJ;MACJ;IAAC;MAAAI,GAAA;MAAA1M,KAAA,EAED,SAAAiL,WAAW8C,QAAQ,EAAE;QACjB,IAAIA,QAAQ,IAAI,IAAI,EAAE;UAClBA,QAAQ,GAAG,KAAK;QACpB;QACA,IAAI,CAAC/C,QAAQ,CAAC,CAAC;QACf,IAAI+C,QAAQ,EAAE;UACV,OAAO,IAAI,CAACjC,OAAO;QACvB,CAAC,MAAM;UACH,OAAO3B,cAAc,CAAC,IAAI,CAAC2B,OAAO,EAAE,IAAI,CAACT,QAAQ,CAACjO,MAAM,CAAC;QAC7D;MACJ;IAAC;MAAAsP,GAAA;MAAA1M,KAAA,EAED,SAAAkL,WAAW6C,QAAQ,EAAE;QACjB,IAAIA,QAAQ,IAAI,IAAI,EAAE;UAClBA,QAAQ,GAAG,KAAK;QACpB;QACA,IAAI,CAAC/C,QAAQ,CAAC,CAAC;QACf,IAAI+C,QAAQ,EAAE;UACV,OAAO,IAAI,CAAClC,OAAO;QACvB,CAAC,MAAM;UACH,OAAO1B,cAAc,CAAC,IAAI,CAAC0B,OAAO,EAAE,IAAI,CAACN,QAAQ,CAACnO,MAAM,CAAC;QAC7D;MACJ;IAAC;MAAAsP,GAAA;MAAA1M,KAAA,EAED,SAAAwM,cAAc7L,MAAM,EAAE;QAAA,IAAAqN,MAAA;QAAE;QACpB,IAAI7P,CAAC;QACL,IAAI2N,OAAO,GAAG,EAAE;QAChB,IAAID,OAAO,GAAG,EAAE;QAAC,IAAAoC,UAAA,GAAAb,0BAAA,CACP,IAAI,CAAC/B,QAAQ;UAAA6C,MAAA;QAAA;UAAvB,KAAAD,UAAA,CAAAvL,CAAA,MAAAwL,MAAA,GAAAD,UAAA,CAAAzL,CAAA,IAAA8K,IAAA,GAAyB;YAApBnP,CAAC,GAAA+P,MAAA,CAAAlO,KAAA;YACF8L,OAAO,CAAC/L,IAAI,CAACY,MAAM,CAACxC,CAAC,CAAC,IAAI,IAAI,GAAGwC,MAAM,CAACxC,CAAC,CAAC,GAAG,MAAM,CAAC;UACxD;QAAC,SAAAoP,GAAA;UAAAU,UAAA,CAAAT,CAAA,CAAAD,GAAA;QAAA;UAAAU,UAAA,CAAAtJ,CAAA;QAAA;QAAA,IAAAwJ,UAAA,GAAAf,0BAAA,CACS,IAAI,CAAC7B,QAAQ;UAAA6C,MAAA;QAAA;UAAvB,KAAAD,UAAA,CAAAzL,CAAA,MAAA0L,MAAA,GAAAD,UAAA,CAAA3L,CAAA,IAAA8K,IAAA,GAAyB;YAApBnP,CAAC,GAAAiQ,MAAA,CAAApO,KAAA;YACF6L,OAAO,CAAC9L,IAAI,CAACY,MAAM,CAACxC,CAAC,CAAC,IAAI,IAAI,GAAGwC,MAAM,CAACxC,CAAC,CAAC,GAAG,MAAM,CAAC;UACxD;QAAC,SAAAoP,GAAA;UAAAY,UAAA,CAAAX,CAAA,CAAAD,GAAA;QAAA;UAAAY,UAAA,CAAAxJ,CAAA;QAAA;QACDmH,OAAO,GAAG,IAAI,CAACM,QAAQ,IAAIN,OAAO,CAAC1O,MAAM,GAAGiN,SAAS,CAACyB,OAAO,CAAC,GAAG,CAACA,OAAO,CAAC;QAC1ED,OAAO,GAAG,IAAI,CAACO,QAAQ,IAAIP,OAAO,CAACzO,MAAM,GAAGiN,SAAS,CAACwB,OAAO,CAAC,GAAG,CAACA,OAAO,CAAC;QAE1E,IAAI,CAAC1O,UAAU,CAACkR,OAAO,CAAC,UAAC9J,GAAG,EAAED,EAAE,EAAK;UACjC,OAAO0J,MAAI,CAAC/B,QAAQ,CAAC3H,EAAE,CAAC,CAACvE,IAAI,CAACY,MAAM,CAAC;QACzC,CAAC,CAAC;QAEF,IAAMvB,MAAM,GAAG,EAAE;QAAC,IAAAkP,KAAA,YAAAA,MAAA,EACK;UACnB,IAAMzO,MAAM,GAAGgM,OAAO,CAAC0C,CAAC,CAAC;UACzB,IAAMC,UAAU,GAAG3O,MAAM,CAACiF,IAAI,CAAC0E,MAAM,CAACiF,YAAY,CAAC,CAAC,CAAC,CAAC;UAEtD,IAAMC,OAAO,GAAG,EAAE;UAAC,IAAAC,MAAA,YAAAA,OAAA,EACI;YACnB,IAAM7O,MAAM,GAAGgM,OAAO,CAACpO,CAAC,CAAC;YACzB,IAAMkR,UAAU,GAAG9O,MAAM,CAACgF,IAAI,CAAC0E,MAAM,CAACiF,YAAY,CAAC,CAAC,CAAC,CAAC;YAEtD,IAAI5O,MAAM,CAACzC,MAAM,KAAK,CAAC,EAAE;cACrB,IAAI,CAAC4Q,MAAI,CAACjC,SAAS,CAACyC,UAAU,CAAC,EAAE;gBAC7BR,MAAI,CAACnC,OAAO,CAAC9L,IAAI,CAACF,MAAM,CAAC;gBACzBmO,MAAI,CAACjC,SAAS,CAACyC,UAAU,CAAC,GAAGR,MAAI,CAAC7Q,UAAU,CAACoN,GAAG,CAAC,UAAAhG,GAAG;kBAAA,OAAIA,GAAG,CAACyJ,MAAI,EAAEnO,MAAM,EAAE,EAAE,CAAC;gBAAA,EAAC;cAClF;cACAmO,MAAI,CAACjC,SAAS,CAACyC,UAAU,CAAC,CAACH,OAAO,CAAC,UAAC9J,GAAG,EAAED,EAAE,EAAK;gBAC5C,IAAI,CAAC0J,MAAI,CAAC5B,QAAQ,IAAKtM,MAAM,CAAC1C,MAAM,KAAK,CAAE,EAAE;kBACzC,OAAOmH,GAAG,CAACxE,IAAI,CAACY,MAAM,CAAC;gBAC3B;cACJ,CAAC,CAAC;YACN;YAEA,IAAIb,MAAM,CAAC1C,MAAM,KAAK,CAAC,EAAE;cACrB,IAAI,CAAC4Q,MAAI,CAAChC,SAAS,CAAC4C,UAAU,CAAC,EAAE;gBAC7BZ,MAAI,CAAClC,OAAO,CAAC/L,IAAI,CAACD,MAAM,CAAC;gBACzBkO,MAAI,CAAChC,SAAS,CAAC4C,UAAU,CAAC,GAAGZ,MAAI,CAAC7Q,UAAU,CAACoN,GAAG,CAAC,UAAAhG,GAAG;kBAAA,OAAIA,GAAG,CAACyJ,MAAI,EAAE,EAAE,EAAElO,MAAM,CAAC;gBAAA,EAAC;cAClF;cACAkO,MAAI,CAAChC,SAAS,CAAC4C,UAAU,CAAC,CAACP,OAAO,CAAC,UAAC9J,GAAG,EAAED,EAAE,EAAK;gBAC5C,IAAI,CAAC0J,MAAI,CAAC5B,QAAQ,IAAKvM,MAAM,CAACzC,MAAM,KAAK,CAAE,EAAE;kBACzC,OAAOmH,GAAG,CAACxE,IAAI,CAACY,MAAM,CAAC;gBAC3B;cACJ,CAAC,CAAC;YACN;YAEA,IAAKb,MAAM,CAAC1C,MAAM,KAAK,CAAC,IAAMyC,MAAM,CAACzC,MAAM,KAAK,CAAE,EAAE;cAChD,IAAI,CAAC4Q,MAAI,CAACpC,IAAI,CAAC4C,UAAU,CAAC,EAAE;gBACxBR,MAAI,CAACpC,IAAI,CAAC4C,UAAU,CAAC,GAAG,CAAC,CAAC;cAC9B;cACA,IAAI,CAACR,MAAI,CAACpC,IAAI,CAAC4C,UAAU,CAAC,CAACI,UAAU,CAAC,EAAE;gBACpCZ,MAAI,CAACpC,IAAI,CAAC4C,UAAU,CAAC,CAACI,UAAU,CAAC,GAAGZ,MAAI,CAAC7Q,UAAU,CAACoN,GAAG,CAAC,UAAAhG,GAAG;kBAAA,OAAIA,GAAG,CAACyJ,MAAI,EAAEnO,MAAM,EAAEC,MAAM,CAAC;gBAAA,EAAC;cAC7F;cACA4O,OAAO,CAAC3O,IAAI,CAACiO,MAAI,CAACpC,IAAI,CAAC4C,UAAU,CAAC,CAACI,UAAU,CAAC,CAACP,OAAO,CAAC,UAAC9J,GAAG,EAAED,EAAE;gBAAA,OAAKC,GAAG,CAACxE,IAAI,CAACY,MAAM,CAAC;cAAA,EAAC,CAAC;YAC1F,CAAC,MAAM;cACH+N,OAAO,CAAC3O,IAAI,CAACO,SAAS,CAAC;YAC3B;UACJ,CAAC;UAvCD,KAAK,IAAI5C,CAAC,IAAIoO,OAAO;YAAA6C,MAAA;UAAA;UAwCrBvP,MAAM,CAACW,IAAI,CAAC2O,OAAO,CAAC;QACxB,CAAC;QA9CD,KAAK,IAAIH,CAAC,IAAI1C,OAAO;UAAAyC,KAAA;QAAA;QA+CrB,OAAOlP,MAAM;MACjB;IAAC;MAAAsN,GAAA;MAAA1M,KAAA,EAED,SAAAwE,cAAc3E,MAAM,EAAEC,MAAM,EAAEwE,EAAE,EAAE;QAC9B,IAAIC,GAAG;QACP,IAAID,EAAE,IAAI,IAAI,EAAE;UACZA,EAAE,GAAG,CAAC;QACV;QACA,IAAMkK,UAAU,GAAG3O,MAAM,CAACiF,IAAI,CAAC0E,MAAM,CAACiF,YAAY,CAAC,CAAC,CAAC,CAAC;QACtD,IAAMG,UAAU,GAAG9O,MAAM,CAACgF,IAAI,CAAC0E,MAAM,CAACiF,YAAY,CAAC,CAAC,CAAC,CAAC;QACtD,IAAK5O,MAAM,CAACzC,MAAM,KAAK,CAAC,IAAM0C,MAAM,CAAC1C,MAAM,KAAK,CAAE,EAAE;UAChDmH,GAAG,GAAG,IAAI,CAAC0H,QAAQ,CAAC3H,EAAE,CAAC;QAC3B,CAAC,MAAM,IAAIzE,MAAM,CAACzC,MAAM,KAAK,CAAC,EAAE;UAC5BmH,GAAG,GAAG,IAAI,CAACyH,SAAS,CAAC4C,UAAU,CAAC,IAAI,IAAI,CAAC5C,SAAS,CAAC4C,UAAU,CAAC,CAACtK,EAAE,CAAC;QACtE,CAAC,MAAM,IAAIxE,MAAM,CAAC1C,MAAM,KAAK,CAAC,EAAE;UAC5BmH,GAAG,GAAG,IAAI,CAACwH,SAAS,CAACyC,UAAU,CAAC,IAAI,IAAI,CAACzC,SAAS,CAACyC,UAAU,CAAC,CAAClK,EAAE,CAAC;QACtE,CAAC,MAAM;UACHC,GAAG,GAAG,IAAI,CAACqH,IAAI,CAAC4C,UAAU,CAAC,CAACI,UAAU,CAAC,IAAI,IAAI,CAAChD,IAAI,CAAC4C,UAAU,CAAC,CAACI,UAAU,CAAC,CAACtK,EAAE,CAAC;QACpF;QACA,OAAOC,GAAG,IAAI,IAAI,GAAGA,GAAG,GAAG;UACvBvE,KAAK,WAAAA,MAAA,EAAG;YACJ,OAAO,IAAI;UACf,CAAC;UAAEC,MAAM,WAAAA,OAAA,EAAG;YACR,OAAO,EAAE;UACb;QACJ,CAAC;MACL;IAAC;MAAAyM,GAAA;MAAA1M,KAAA,EA7OD,SAAAuM,cAAqB5B,KAAK,EAAEgB,iBAAiB,EAAEhH,CAAC,EAAE;QAC9C,IAAIkK,SAAS;QACb,IAAIvS,CAAC,CAACwS,aAAa,CAACnD,iBAAiB,CAAC,EAAE;UACpCkD,SAAS,GAAGlK,CAAC;QACjB,CAAC,MAAM;UACHkK,SAAS,GAAG,SAAAA,UAAUlO,MAAM,EAAE;YAC1B,KAAK,IAAIoM,CAAC,IAAIpB,iBAAiB,EAAE;cAC7B,IAAMqB,CAAC,GAAGrB,iBAAiB,CAACoB,CAAC,CAAC;cAC9B,IAAMgC,IAAI,GAAG/B,CAAC,CAACrM,MAAM,CAAC;cACtB,IAAIoO,IAAI,IAAI,IAAI,EAAE;gBACdpO,MAAM,CAACoM,CAAC,CAAC,GAAGgC,IAAI;cACpB;YACJ;YACA,OAAOpK,CAAC,CAAChE,MAAM,CAAC;UACpB,CAAC;QACL;;QAEA;QACA,IAAIrE,CAAC,CAAC4N,UAAU,CAACS,KAAK,CAAC,EAAE;UACrB,OAAOA,KAAK,CAACkE,SAAS,CAAC;QAC3B,CAAC,MAAM,IAAIvS,CAAC,CAAC6O,OAAO,CAACR,KAAK,CAAC,EAAE;UACzB,IAAIrO,CAAC,CAAC6O,OAAO,CAACR,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;YAAE;YACvB,OAAQ,YAAM;cACV,IAAMvL,MAAM,GAAG,EAAE;cACjB,SAAA4P,GAAA,MAAAC,aAAA,GAAcpH,MAAM,CAACnL,IAAI,CAACiO,KAAK,IAAI,CAAC,CAAC,CAAC,EAAAqE,GAAA,GAAAC,aAAA,CAAA7R,MAAA,EAAA4R,GAAA,IAAE;gBAAnC,IAAItR,CAAC,GAAAuR,aAAA,CAAAD,GAAA;gBACN,IAAME,aAAa,GAAGvE,KAAK,CAACjN,CAAC,CAAC;gBAC9B,IAAIA,CAAC,GAAG,CAAC,EAAE;kBACP,IAAMiD,MAAM,GAAG,CAAC,CAAC;kBACjB,SAAAwO,GAAA,MAAAC,aAAA,GAAcvH,MAAM,CAACnL,IAAI,CAACiO,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAAwE,GAAA,GAAAC,aAAA,CAAAhS,MAAA,EAAA+R,GAAA,IAAE;oBAAtC,IAAIZ,CAAC,GAAAa,aAAA,CAAAD,GAAA;oBACN,IAAMpC,CAAC,GAAGpC,KAAK,CAAC,CAAC,CAAC,CAAC4D,CAAC,CAAC;oBACrB5N,MAAM,CAACoM,CAAC,CAAC,GAAGmC,aAAa,CAACX,CAAC,CAAC;kBAChC;kBACAnP,MAAM,CAACW,IAAI,CAAC8O,SAAS,CAAClO,MAAM,CAAC,CAAC;gBAClC;cACJ;cACA,OAAOvB,MAAM;YACjB,CAAC,CAAE,CAAC;UACR,CAAC,MAAM;YAAE;YACL,OAAQ,YAAM;cACV,IAAMsP,OAAO,GAAG,EAAE;cAAC,IAAAW,UAAA,GAAAjC,0BAAA,CACAzC,KAAK;gBAAA2E,MAAA;cAAA;gBAAxB,KAAAD,UAAA,CAAA3M,CAAA,MAAA4M,MAAA,GAAAD,UAAA,CAAA7M,CAAA,IAAA8K,IAAA,GAA0B;kBAAA,IAAjB3M,MAAM,GAAA2O,MAAA,CAAAtP,KAAA;kBACX0O,OAAO,CAAC3O,IAAI,CAAC8O,SAAS,CAAClO,MAAM,CAAC,CAAC;gBACnC;cAAC,SAAA4M,GAAA;gBAAA8B,UAAA,CAAA7B,CAAA,CAAAD,GAAA;cAAA;gBAAA8B,UAAA,CAAA1K,CAAA;cAAA;cACD,OAAO+J,OAAO;YAClB,CAAC,CAAE,CAAC;UACR;QACJ,CAAC,MAAM,IAAI/D,KAAK,YAAYrO,CAAC,EAAE;UAC3B,IAAMiT,OAAO,GAAG,EAAE;UAClBjT,CAAC,CAAC,iBAAiB,EAAEqO,KAAK,CAAC,CAAC6E,IAAI,CAAC,UAAU9R,CAAC,EAAE;YAC1C,OAAO6R,OAAO,CAACxP,IAAI,CAACzD,CAAC,CAAC,IAAI,CAAC,CAACmT,IAAI,CAAC,CAAC,CAAC;UACvC,CAAC,CAAC;UACF,OAAOnT,CAAC,CAAC,YAAY,EAAEqO,KAAK,CAAC,CAAC6E,IAAI,CAAC,UAAU9R,CAAC,EAAE;YAC5C,IAAMiD,MAAM,GAAG,CAAC,CAAC;YACjBrE,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAACkT,IAAI,CAAC,UAAUjB,CAAC,EAAE;cAC5B,OAAO5N,MAAM,CAAC4O,OAAO,CAAChB,CAAC,CAAC,CAAC,GAAGjS,CAAC,CAAC,IAAI,CAAC,CAACmT,IAAI,CAAC,CAAC;YAC9C,CAAC,CAAC;YACF,OAAOZ,SAAS,CAAClO,MAAM,CAAC;UAC5B,CAAC,CAAC;QACN,CAAC,MAAM;UACH,MAAM,IAAI+O,KAAK,CAAC,sBAAsB,CAAC;QAC3C;MACJ;IAAC;EAAA,KAmLL;EACApT,CAAC,CAACqT,cAAc,GAAG;IACflQ,mBAAmB,EAAnBA,mBAAmB;IAAEmQ,WAAW,EAAElK,kBAAkB;IAAEC,SAAS,EAATA,SAAS;IAAEwC,QAAQ,EAARA,QAAQ;IAAE/B,OAAO,EAAPA,OAAO;IAClFvB,WAAW,EAAXA,WAAW;IAAEnG,YAAY,EAAZA,YAAY;IAAEmL,MAAM,EAANA,MAAM;IAAEa,SAAS,EAATA;EACvC,CAAC;;EAED;AACJ;AACA;;EAEI,SAAS7E,kBAAkBA,CAAEgK,SAAS,EAAElR,IAAI,EAAE;IAE1C,IAAI4F,GAAG,EAAEpH,UAAU,EAAE2C,MAAM,EAAEgQ,eAAe,EAAEpS,CAAC,EAAE4G,EAAE,EAAEiK,CAAC,EAAEwB,EAAE,EAAEC,EAAE,EAAEC,eAAe,EAAEC,EAAE,EAAE5O,GAAG,EAAEnD,CAAC;IAC3F,IAAMS,QAAQ,GAAG;MACb/B,KAAK,EAAE;QACHsT,aAAa,EAAE,IAAI;QACnBpE,SAAS,EAAE,IAAI;QACfC,SAAS,EAAE;MACf,CAAC;MACDvF,aAAa,EAAE;QACXS,MAAM,EAAE;MACZ;IACJ,CAAC;IAEDvI,IAAI,GAAGrC,CAAC,CAAC2C,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEL,QAAQ,EAAED,IAAI,CAAC;IAEzC,IACI0M,QAAQ,GACRwE,SAAS,CADTxE,QAAQ;IAEZ,IACIE,QAAQ,GACRsE,SAAS,CADTtE,QAAQ;IAEZ,IAAMM,OAAO,GAAGgE,SAAS,CAAC3E,UAAU,CAAC,IAAI,CAAC;IAC1C,IAAMY,OAAO,GAAG+D,SAAS,CAAC5E,UAAU,CAAC,IAAI,CAAC;IAE1C,IAAItM,IAAI,CAAC9B,KAAK,CAACsT,aAAa,EAAE;MAC1BL,eAAe,GAAG,SAAAA,gBAAU9P,KAAK,EAAEoQ,SAAS,EAAEC,SAAS,EAAE;QACrD,IAAI5P,IAAI,EAAE/C,CAAC;QACX,IAAM4S,OAAO,GAAG,CAAC,CAAC;QAClB,SAAAC,GAAA,MAAAC,aAAA,GAAU3I,MAAM,CAACnL,IAAI,CAAC2O,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAAkF,GAAA,GAAAC,aAAA,CAAApT,MAAA,EAAAmT,GAAA,IAAE;UAAlC7S,CAAC,GAAA8S,aAAA,CAAAD,GAAA;UACF9P,IAAI,GAAG4K,QAAQ,CAAC3N,CAAC,CAAC;UAClB,IAAI2S,SAAS,CAAC3S,CAAC,CAAC,IAAI,IAAI,EAAE;YACtB4S,OAAO,CAAC7P,IAAI,CAAC,GAAG4P,SAAS,CAAC3S,CAAC,CAAC;UAChC;QACJ;QACA,SAAA+S,GAAA,MAAAC,aAAA,GAAU7I,MAAM,CAACnL,IAAI,CAAC6O,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAAkF,GAAA,GAAAC,aAAA,CAAAtT,MAAA,EAAAqT,GAAA,IAAE;UAAlC/S,CAAC,GAAAgT,aAAA,CAAAD,GAAA;UACFhQ,IAAI,GAAG8K,QAAQ,CAAC7N,CAAC,CAAC;UAClB,IAAI0S,SAAS,CAAC1S,CAAC,CAAC,IAAI,IAAI,EAAE;YACtB4S,OAAO,CAAC7P,IAAI,CAAC,GAAG2P,SAAS,CAAC1S,CAAC,CAAC;UAChC;QACJ;QACA,OAAO,UAAA8P,CAAC;UAAA,OAAI7O,IAAI,CAAC9B,KAAK,CAACsT,aAAa,CAAC3C,CAAC,EAAExN,KAAK,EAAEsQ,OAAO,EAAET,SAAS,CAAC;QAAA;MACtE,CAAC;IACL;IAEA,IAAMc,aAAa,GAAG,CAAChS,IAAI,CAAC9B,KAAK,CAAC8T,aAAa,IAAI,IAAI,GAAGhS,IAAI,CAAC9B,KAAK,CAAC8T,aAAa,GAAG,IAAI,KAAKd,SAAS,CAACzD,QAAQ;IAChH,IAAMwE,gBAAgB,GAAGD,aAAa,GAAG9S,YAAY,GAAGgS,SAAS,CAACxD,cAAc,GAAG9P,cAAc,GAAGsU,oBAAoB;IAExH,IAAMC,iBAAiB,GAAGC,gBAAgB,CAAClF,OAAO,EAAE,IAAI,EAAE+E,gBAAgB,CAAC7F,IAAI,CAAC8E,SAAS,CAAC,CAAC;IAC3F,IAAMmB,iBAAiB,GAAGD,gBAAgB,CAACjF,OAAO,EAAE,KAAK,EAAEvP,cAAc,CAACwO,IAAI,CAAC8E,SAAS,CAAC,CAAC;;IAE1F;IACA,IAAMzQ,MAAM,GAAG6R,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC9C9R,MAAM,CAAC+R,SAAS,GAAG,UAAU;;IAE7B;IACA,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAaC,GAAG,EAAE3T,CAAC,EAAE6Q,CAAC,EAAE;MAClC,IAAIpQ,CAAC;MACL,IAAIT,CAAC,KAAK,CAAC,EAAE;QACT,IAAI4T,GAAG,EAAEC,GAAG;QACZ,IAAIC,MAAM,GAAG,IAAI;QACjB,KAAKrT,CAAC,GAAG,CAAC,EAAEoT,GAAG,GAAGhD,CAAC,EAAE+C,GAAG,GAAG,CAAC,IAAIC,GAAG,EAAED,GAAG,GAAGnT,CAAC,IAAIoT,GAAG,GAAGpT,CAAC,IAAIoT,GAAG,EAAED,GAAG,GAAGnT,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;UAC7E,IAAIkT,GAAG,CAAC3T,CAAC,GAAG,CAAC,CAAC,CAACS,CAAC,CAAC,KAAKkT,GAAG,CAAC3T,CAAC,CAAC,CAACS,CAAC,CAAC,EAAE;YAC7BqT,MAAM,GAAG,KAAK;UAClB;QACJ;QACA,IAAIA,MAAM,EAAE;UACR,OAAO,CAAC,CAAC,CAAC,CAAC;QACf;MACJ;MACA,IAAIC,GAAG,GAAG,CAAC;MACX,OAAQ/T,CAAC,GAAG+T,GAAG,GAAIJ,GAAG,CAACjU,MAAM,EAAE;QAC3B,IAAIsU,IAAI;UAAEC,IAAI;QACd,IAAIC,IAAI,GAAG,KAAK;QAChB,KAAKzT,CAAC,GAAG,CAAC,EAAEwT,IAAI,GAAGpD,CAAC,EAAEmD,IAAI,GAAG,CAAC,IAAIC,IAAI,EAAED,IAAI,GAAGvT,CAAC,IAAIwT,IAAI,GAAGxT,CAAC,IAAIwT,IAAI,EAAED,IAAI,GAAGvT,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;UACpF,IAAIkT,GAAG,CAAC3T,CAAC,CAAC,CAACS,CAAC,CAAC,KAAKkT,GAAG,CAAC3T,CAAC,GAAG+T,GAAG,CAAC,CAACtT,CAAC,CAAC,EAAE;YAC/ByT,IAAI,GAAG,IAAI;UACf;QACJ;QACA,IAAIA,IAAI,EAAE;UACN;QACJ;QACAH,GAAG,EAAE;MACT;MACA,OAAOA,GAAG;IACd,CAAC;;IAED;IACA,IAAMI,KAAK,GAAGZ,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC7C,SAAAY,GAAA,MAAAC,aAAA,GAAUlK,MAAM,CAACnL,IAAI,CAAC2O,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAAyG,GAAA,GAAAC,aAAA,CAAA3U,MAAA,EAAA0U,GAAA,IAAE;MAAlCvD,CAAC,GAAAwD,aAAA,CAAAD,GAAA;MACF,IAAMhE,CAAC,GAAGzC,QAAQ,CAACkD,CAAC,CAAC;MACrB2B,EAAE,GAAGe,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjC,IAAKc,QAAQ,CAACzD,CAAC,CAAC,KAAK,CAAC,IAAMhD,QAAQ,CAACnO,MAAM,KAAK,CAAE,EAAE;QAChD4S,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;QACjClB,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE1G,QAAQ,CAACnO,MAAM,CAAC;QAC3C4S,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE5G,QAAQ,CAACjO,MAAM,CAAC;QAC3C8S,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MACtB;MACAA,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjClB,EAAE,CAACmB,SAAS,GAAG,cAAc;MAC7BnB,EAAE,CAACmC,WAAW,GAAGrE,CAAC;MAClB,IAAI+B,SAAS,CAACzD,QAAQ,IAAKmC,CAAC,GAAIlD,QAAQ,CAACjO,MAAM,GAAG,CAAG,EAAE;QACnD4S,EAAE,CAACoC,OAAO,GAAGtU,mBAAmB,CAAC+R,SAAS,EAAE,CAACtB,CAAC,EAAE,KAAK,CAAC;QACtDyB,EAAE,CAACmB,SAAS,kBAAA1M,MAAA,CAAkB8J,CAAC,CAAE;MACrC;MACA2B,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MAClB,SAAAqC,GAAA,MAAAC,aAAA,GAAUzK,MAAM,CAACnL,IAAI,CAACoP,OAAO,IAAI,CAAC,CAAC,CAAC,EAAAuG,GAAA,GAAAC,aAAA,CAAAlV,MAAA,EAAAiV,GAAA,IAAE;QAAjC3U,CAAC,GAAA4U,aAAA,CAAAD,GAAA;QACFvS,MAAM,GAAGgM,OAAO,CAACpO,CAAC,CAAC;QACnBS,CAAC,GAAGiT,QAAQ,CAACtF,OAAO,EAAEkG,QAAQ,CAACtU,CAAC,CAAC,EAAEsU,QAAQ,CAACzD,CAAC,CAAC,CAAC;QAC/C,IAAIpQ,CAAC,KAAK,CAAC,CAAC,EAAE;UACV6R,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjClB,EAAE,CAACmB,SAAS,GAAG,aAAa;UAC5BnB,EAAE,CAACmB,SAAS,WAAA1M,MAAA,CAAWoL,SAAS,CAACvD,cAAc,GAAG,CAAC5O,CAAC,GAAI,CAACA,CAAC,GAAGS,CAAC,GAAI,CAAC,CAAE;UACrE6R,EAAE,CAACmC,WAAW,GAAGrS,MAAM,CAACyO,CAAC,CAAC;UAC1ByB,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE9T,CAAC,GAAGlB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE2S,SAAS,CAAC1S,UAAU,CAACC,MAAM,CAAC,CAAC;UACxE,IAAK4U,QAAQ,CAACzD,CAAC,CAAC,KAAMlD,QAAQ,CAACjO,MAAM,GAAG,CAAE,IAAMmO,QAAQ,CAACnO,MAAM,KAAK,CAAE,EAAE;YACpE4S,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE,CAAC,CAAC;UACjC;UACA,IAAIpC,SAAS,CAACzD,QAAQ,IAAKmC,CAAC,GAAIlD,QAAQ,CAACjO,MAAM,GAAG,CAAG,IAAI0C,MAAM,CAACyO,CAAC,CAAC,EAAE;YAChEyB,EAAE,CAACmB,SAAS,IAAI,mBAAmB;YACnCnB,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE9T,CAAC,GAAGlB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE2S,SAAS,CAAC1S,UAAU,CAACC,MAAM,CAAC,CAAC;YACxE4S,EAAE,CAACoC,OAAO,GAAGpB,iBAAiB;UAClC;UACAd,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;QACtB;MACJ;MACA,IAAKgC,QAAQ,CAACzD,CAAC,CAAC,KAAK,CAAC,IAAK5P,IAAI,CAAC9B,KAAK,CAACkP,SAAS,EAAE;QAC7CiE,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;QACjClB,EAAE,CAACmB,SAAS,GAAG,gCAAgC;QAC/CnB,EAAE,CAACuC,SAAS,GAAG5T,IAAI,CAAC8H,aAAa,CAACS,MAAM;QACxC8I,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAEhV,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE2S,SAAS,CAAC1S,UAAU,CAACC,MAAM,CAAC,CAAC;QACpE4S,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE5G,QAAQ,CAACjO,MAAM,IAAImO,QAAQ,CAACnO,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7E8S,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MACtB;MACA6B,KAAK,CAACK,WAAW,CAAChC,EAAE,CAAC;IACzB;;IAEA;IACA,IAAI3E,QAAQ,CAACnO,MAAM,KAAK,CAAC,EAAE;MACvB8S,EAAE,GAAGe,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjC,SAAAsB,GAAA,MAAAC,aAAA,GAAU5K,MAAM,CAACnL,IAAI,CAAC6O,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAAiH,GAAA,GAAAC,aAAA,CAAArV,MAAA,EAAAoV,GAAA,IAAE;QAAlC9U,CAAC,GAAA+U,aAAA,CAAAD,GAAA;QACF,IAAM3E,CAAC,GAAGtC,QAAQ,CAAC7N,CAAC,CAAC;QACrBsS,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;QACjClB,EAAE,CAACmB,SAAS,GAAG,cAAc;QAC7BnB,EAAE,CAACmC,WAAW,GAAGtE,CAAC;QAClB,IAAIgC,SAAS,CAACzD,QAAQ,IAAK1O,CAAC,GAAI6N,QAAQ,CAACnO,MAAM,GAAG,CAAG,EAAE;UACnD4S,EAAE,CAACmB,SAAS,kBAAA1M,MAAA,CAAkB/G,CAAC,CAAE;UACjCsS,EAAE,CAACoC,OAAO,GAAGtU,mBAAmB,CAAC+R,SAAS,EAAE,CAACnS,CAAC,EAAE,IAAI,CAAC;QACzD;QACAwS,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MACtB;MACAA,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjC,IAAI7F,QAAQ,CAACjO,MAAM,KAAK,CAAC,EAAE;QACvB4S,EAAE,CAACmB,SAAS,GAAG,gCAAgC;QAC/CnB,EAAE,CAACuC,SAAS,GAAG5T,IAAI,CAAC8H,aAAa,CAACS,MAAM;QACxC8I,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAEpC,SAAS,CAAC1S,UAAU,CAACC,MAAM,CAAC;MAC3D;MACA8S,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MAClB6B,KAAK,CAACK,WAAW,CAAChC,EAAE,CAAC;IACzB;IACA9Q,MAAM,CAAC8S,WAAW,CAACL,KAAK,CAAC;;IAEzB;IACA,IAAMa,KAAK,GAAGzB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAE7C,IAAIrB,SAAS,CAAC1D,gBAAgB,IAAK0D,SAAS,CAAC1D,gBAAgB,CAAC/O,MAAM,GAAG,CAAE,EAAE;MACvE,IAAIuV,GAAG;MACPzC,EAAE,GAAGe,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjClB,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjC,IAAM0B,OAAO,GAAGrH,QAAQ,CAACnO,MAAM,IAAIiO,QAAQ,CAACjO,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACjE4S,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAEW,OAAO,CAAC;MACnC1C,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MAElB,SAAA6C,IAAA,MAAAC,cAAA,GAAUjL,MAAM,CAACnL,IAAI,CAACoP,OAAO,IAAI,CAAC,CAAC,CAAC,EAAA+G,IAAA,GAAAC,cAAA,CAAA1V,MAAA,EAAAyV,IAAA,IAAE;QAAjCtE,CAAC,GAAAuE,cAAA,CAAAD,IAAA;QAAkC;QACpC/S,MAAM,GAAGgM,OAAO,CAACyC,CAAC,CAAC;QAAC,IAAAwE,UAAA,GAAA3F,0BAAA,CACRyC,SAAS,CAAC1D,gBAAgB;UAAA6G,MAAA;QAAA;UAAtC,KAAAD,UAAA,CAAArQ,CAAA,MAAAsQ,MAAA,GAAAD,UAAA,CAAAvQ,CAAA,IAAA8K,IAAA,GAAwC;YAAnCqF,GAAG,GAAAK,MAAA,CAAAhT,KAAA;YACJgQ,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;YACjClB,EAAE,CAACmB,SAAS,4BAAA1M,MAAA,CAA4B8J,CAAC,CAAE;YAC3CyB,EAAE,CAACmC,WAAW,GAAGQ,GAAG;YACpBzC,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;UACtB;QAAC,SAAAzC,GAAA;UAAAwF,UAAA,CAAAvF,CAAA,CAAAD,GAAA;QAAA;UAAAwF,UAAA,CAAApO,CAAA;QAAA;MACL;MAAC,IAAAsO,UAAA,GAAA7F,0BAAA,CAEWyC,SAAS,CAAC1D,gBAAgB;QAAA+G,MAAA;MAAA;QAAtC,KAAAD,UAAA,CAAAvQ,CAAA,MAAAwQ,MAAA,GAAAD,UAAA,CAAAzQ,CAAA,IAAA8K,IAAA,GAAwC;UAAnCqF,GAAG,GAAAO,MAAA,CAAAlT,KAAA;UACJgQ,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjClB,EAAE,CAACmB,SAAS,GAAG,oBAAoB;UACnCnB,EAAE,CAACmC,WAAW,GAAGQ,GAAG;UACpBzC,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;QACtB;MAAC,SAAAzC,GAAA;QAAA0F,UAAA,CAAAzF,CAAA,CAAAD,GAAA;MAAA;QAAA0F,UAAA,CAAAtO,CAAA;MAAA;MAED+N,KAAK,CAACR,WAAW,CAAChC,EAAE,CAAC;IACzB;IAGA,SAAAiD,IAAA,MAAAC,cAAA,GAAUvL,MAAM,CAACnL,IAAI,CAACmP,OAAO,IAAI,CAAC,CAAC,CAAC,EAAAsH,IAAA,GAAAC,cAAA,CAAAhW,MAAA,EAAA+V,IAAA,IAAE;MAAjCzV,CAAC,GAAA0V,cAAA,CAAAD,IAAA;MACF,IAAMtT,MAAM,GAAGgM,OAAO,CAACnO,CAAC,CAAC;MACzBwS,EAAE,GAAGe,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjC,IAAMmC,MAAM,GAAG9H,QAAQ,CAACnO,MAAM,GAAGyC,MAAM,CAACzC,MAAM;MAC9C8S,EAAE,CAACiB,SAAS,GAAGkC,MAAM,uBAAA5O,MAAA,CAAuB5E,MAAM,CAACzC,MAAM,IAAK,SAAS;MACvE,SAAAkW,IAAA,MAAAC,cAAA,GAAU1L,MAAM,CAACnL,IAAI,CAACmD,MAAM,IAAI,CAAC,CAAC,CAAC,EAAAyT,IAAA,GAAAC,cAAA,CAAAnW,MAAA,EAAAkW,IAAA,IAAE;QAAhC/E,CAAC,GAAAgF,cAAA,CAAAD,IAAA;QACF,IAAME,GAAG,GAAG3T,MAAM,CAAC0O,CAAC,CAAC;QACrB,IAAIoC,aAAa,IAAKpC,CAAC,GAAI1O,MAAM,CAACzC,MAAM,GAAG,CAAG,EAAE;UAC5C;QACJ;QACAe,CAAC,GAAGwS,aAAa,GAAG,CAAC,GAAGS,QAAQ,CAACvF,OAAO,EAAEmG,QAAQ,CAACtU,CAAC,CAAC,EAAEsU,QAAQ,CAACzD,CAAC,CAAC,CAAC;QACnE,IAAIpQ,CAAC,KAAK,CAAC,CAAC,EAAE;UACV6R,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjClB,EAAE,CAACmB,SAAS,GAAG,aAAa;UAC5BnB,EAAE,CAACmB,SAAS,WAAA1M,MAAA,CAAWoL,SAAS,CAACxD,cAAc,GAAG,CAAC3O,CAAC,GAAI,CAACA,CAAC,GAAGS,CAAC,GAAI,CAAC,CAAE;UACrE6R,EAAE,CAACmC,WAAW,GAAGqB,GAAG;UACpBxD,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE9T,CAAC,CAAC;UAC7B,IAAIwS,aAAa,EAAE;YACfX,EAAE,CAACyD,OAAO,GAAGlI,QAAQ,CAACnO,MAAM;YAC5B4S,EAAE,CAAC0D,KAAK,CAACC,WAAW,GAAG,CAAC,GAAI3B,QAAQ,CAACzD,CAAC,CAAC,GAAG,EAAG,GAAG,IAAI;UACxD;UACA,IAAIsB,SAAS,CAACzD,QAAQ,IAAKmC,CAAC,GAAIhD,QAAQ,CAACnO,MAAM,GAAG,CAAG,EAAE;YACnD4S,EAAE,CAACmB,SAAS,IAAI,OAAO;YACvBnB,EAAE,CAACoC,OAAO,GAAGtB,iBAAiB;UAClC;UACAZ,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;QACtB;MACJ;MAEA,IAAI,CAACW,aAAa,IAAI0C,MAAM,EAAE;QAC1BrD,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;QACjClB,EAAE,CAACyD,OAAO,GAAGJ,MAAM;QACnBrD,EAAE,CAACmC,WAAW,aAAA1N,MAAA,CAAa5E,MAAM,CAAC0O,CAAC,CAAC,MAAG;QACvC2B,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MACtB;MAEA,IAAI3E,QAAQ,CAACjO,MAAM,EAAE;QACjB4S,EAAE,CAACyD,OAAO,EAAE;MAChB;MAEA,SAAAG,IAAA,MAAAC,cAAA,GAAUhM,MAAM,CAACnL,IAAI,CAACoP,OAAO,IAAI,CAAC,CAAC,CAAC,EAAA8H,IAAA,GAAAC,cAAA,CAAAzW,MAAA,EAAAwW,IAAA,IAAE;QAAjCrF,CAAC,GAAAsF,cAAA,CAAAD,IAAA;QAAkC;QACpC9T,MAAM,GAAGgM,OAAO,CAACyC,CAAC,CAAC;QACnB,KAAKjK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGuL,SAAS,CAAC1S,UAAU,CAACC,MAAM,EAAEkH,EAAE,EAAE,EAAE;UACjDC,GAAG,GAAGsL,SAAS,CAAC1S,UAAU,CAACmH,EAAE,CAAC;UAC9BnH,UAAU,GAAG0S,SAAS,CAACrL,aAAa,CAAC3E,MAAM,EAAEC,MAAM,EAAEwE,EAAE,CAAC;UACxDhD,GAAG,GAAGnE,UAAU,CAAC6C,KAAK,CAACsE,EAAE,CAAC;UAC1ByL,EAAE,GAAGkB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjC,IAAI,CAACmC,MAAM,EAAE;YACTtD,EAAE,CAACoB,SAAS,GAAG,SAAS;UAC5B;UACApB,EAAE,CAACoB,SAAS,UAAA1M,MAAA,CAAU/G,CAAC,UAAA+G,MAAA,CAAO8J,CAAC,CAAE;UACjC,IAAIlD,QAAQ,CAACjO,MAAM,GAAG0C,MAAM,CAAC1C,MAAM,EAAE;YACjC2S,EAAE,CAACoB,SAAS,uBAAA1M,MAAA,CAAuB3E,MAAM,CAAC1C,MAAM,UAAAqH,MAAA,CAAO/G,CAAC,UAAA+G,MAAA,CAAO8J,CAAC,CAAE;UACtE;UACAwB,EAAE,CAACoC,WAAW,GAAGhV,UAAU,CAAC8C,MAAM,CAACqB,GAAG,CAAC;UACvCyO,EAAE,CAACkC,YAAY,CAAC,YAAY,EAAE3Q,GAAG,CAAC;UAClC,IAAIwO,eAAe,IAAI,IAAI,EAAE;YACzBC,EAAE,CAACqC,OAAO,GAAGtC,eAAe,CAACxO,GAAG,EAAEzB,MAAM,EAAEC,MAAM,CAAC;UACrD;UACAoQ,EAAE,CAACgC,WAAW,CAACnC,EAAE,CAAC;QACtB;MACJ;MAEA,IAAIpR,IAAI,CAAC9B,KAAK,CAACkP,SAAS,IAAKV,QAAQ,CAACjO,MAAM,KAAK,CAAE,EAAE;QACjD,KAAKkH,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGuL,SAAS,CAAC1S,UAAU,CAACC,MAAM,EAAEkH,EAAE,EAAE,EAAE;UACjDC,GAAG,GAAGsL,SAAS,CAAC1S,UAAU,CAACmH,EAAE,CAAC;UAC9B2L,eAAe,GAAGJ,SAAS,CAACrL,aAAa,CAAC3E,MAAM,EAAE,EAAE,EAAEyE,EAAE,CAAC;UACzDhD,GAAG,GAAG2O,eAAe,CAACjQ,KAAK,CAACsE,EAAE,CAAC;UAC/ByL,EAAE,GAAGkB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjCnB,EAAE,CAACoB,SAAS,GAAG,mBAAmB;UAClCpB,EAAE,CAACoC,WAAW,GAAGlC,eAAe,CAAChQ,MAAM,CAACqB,GAAG,CAAC;UAC5CyO,EAAE,CAACkC,YAAY,CAAC,YAAY,EAAE3Q,GAAG,CAAC;UAClC,IAAIwO,eAAe,IAAI,IAAI,EAAE;YACzBC,EAAE,CAACqC,OAAO,GAAGtC,eAAe,CAACxO,GAAG,EAAEzB,MAAM,EAAE,EAAE,CAAC;UACjD;UACAkQ,EAAE,CAACkC,YAAY,CAAC,UAAU,EAAE,KAAK,GAAGvU,CAAC,CAAC;UACtCwS,EAAE,CAACgC,WAAW,CAACnC,EAAE,CAAC;QACtB;MACJ;MACA2C,KAAK,CAACR,WAAW,CAAChC,EAAE,CAAC;IACzB;;IAEA;IACA,IAAIvR,IAAI,CAAC9B,KAAK,CAACmP,SAAS,IAAKT,QAAQ,CAACnO,MAAM,KAAK,CAAE,EAAE;MACjD8S,EAAE,GAAGe,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;MACjC,IAAIvS,IAAI,CAAC9B,KAAK,CAACmP,SAAS,IAAKT,QAAQ,CAACnO,MAAM,KAAK,CAAE,EAAE;QACjD4S,EAAE,GAAGiB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;QACjClB,EAAE,CAACmB,SAAS,GAAG,gCAAgC;QAC/CnB,EAAE,CAACuC,SAAS,GAAG5T,IAAI,CAAC8H,aAAa,CAACS,MAAM;QACxC8I,EAAE,CAACiC,YAAY,CAAC,SAAS,EAAE1G,QAAQ,CAACnO,MAAM,IAAIiO,QAAQ,CAACjO,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7E8S,EAAE,CAACgC,WAAW,CAAClC,EAAE,CAAC;MACtB;MACA,SAAA8D,IAAA,MAAAC,cAAA,GAAUlM,MAAM,CAACnL,IAAI,CAACoP,OAAO,IAAI,CAAC,CAAC,CAAC,EAAAgI,IAAA,GAAAC,cAAA,CAAA3W,MAAA,EAAA0W,IAAA,IAAE;QAAjCvF,CAAC,GAAAwF,cAAA,CAAAD,IAAA;QACFhU,MAAM,GAAGgM,OAAO,CAACyC,CAAC,CAAC;QACnB,KAAKjK,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGuL,SAAS,CAAC1S,UAAU,CAACC,MAAM,EAAEkH,EAAE,EAAE,EAAE;UACjDC,GAAG,GAAGsL,SAAS,CAAC1S,UAAU,CAACmH,EAAE,CAAC;UAC9B2L,eAAe,GAAGJ,SAAS,CAACrL,aAAa,CAAC,EAAE,EAAE1E,MAAM,EAAEwE,EAAE,CAAC;UACzDhD,GAAG,GAAG2O,eAAe,CAACjQ,KAAK,CAACsE,EAAE,CAAC;UAC/ByL,EAAE,GAAGkB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjCnB,EAAE,CAACoB,SAAS,2BAAA1M,MAAA,CAA2B8J,CAAC,CAAE;UAC1C,IAAIzO,MAAM,CAAC1C,MAAM,KAAKiO,QAAQ,CAACjO,MAAM,EAAE;YACnC2S,EAAE,CAACoB,SAAS,yBAAA1M,MAAA,CAAyB3E,MAAM,CAAC1C,MAAM,CAAE;UACxD;UACA2S,EAAE,CAACoC,WAAW,GAAGlC,eAAe,CAAChQ,MAAM,CAACqB,GAAG,CAAC;UAC5CyO,EAAE,CAACkC,YAAY,CAAC,YAAY,EAAE3Q,GAAG,CAAC;UAClC,IAAIwO,eAAe,IAAI,IAAI,EAAE;YACzBC,EAAE,CAACqC,OAAO,GAAGtC,eAAe,CAACxO,GAAG,EAAE,EAAE,EAAExB,MAAM,CAAC;UACjD;UACAiQ,EAAE,CAACkC,YAAY,CAAC,UAAU,EAAE,KAAK,GAAG1D,CAAC,CAAC;UACtC2B,EAAE,CAACgC,WAAW,CAACnC,EAAE,CAAC;QACtB;MACJ;MACA,IAAIpR,IAAI,CAAC9B,KAAK,CAACkP,SAAS,IAAKV,QAAQ,CAACjO,MAAM,KAAK,CAAE,EAAE;QACjD,KAAKkH,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGuL,SAAS,CAAC1S,UAAU,CAACC,MAAM,EAAEkH,EAAE,EAAE,EAAE;UACjDC,GAAG,GAAGsL,SAAS,CAAC1S,UAAU,CAACmH,EAAE,CAAC;UAC9B2L,eAAe,GAAGJ,SAAS,CAACrL,aAAa,CAAC,EAAE,EAAE,EAAE,EAAEF,EAAE,CAAC;UACrDhD,GAAG,GAAG2O,eAAe,CAACjQ,KAAK,CAACsE,EAAE,CAAC;UAC/ByL,EAAE,GAAGkB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC;UACjCnB,EAAE,CAACoB,SAAS,GAAG,eAAe;UAC9BpB,EAAE,CAACoC,WAAW,GAAGlC,eAAe,CAAChQ,MAAM,CAACqB,GAAG,CAAC;UAC5CyO,EAAE,CAACkC,YAAY,CAAC,YAAY,EAAE3Q,GAAG,CAAC;UAClC,IAAIwO,eAAe,IAAI,IAAI,EAAE;YACzBC,EAAE,CAACqC,OAAO,GAAGtC,eAAe,CAACxO,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;UAC7C;UACA4O,EAAE,CAACgC,WAAW,CAACnC,EAAE,CAAC;QACtB;MACJ;MACA2C,KAAK,CAACR,WAAW,CAAChC,EAAE,CAAC;IACzB;IACA9Q,MAAM,CAAC8S,WAAW,CAACQ,KAAK,CAAC;;IAEzB;IACAtT,MAAM,CAAC6S,YAAY,CAAC,cAAc,EAAEpG,OAAO,CAACzO,MAAM,CAAC;IACnDgC,MAAM,CAAC6S,YAAY,CAAC,cAAc,EAAEnG,OAAO,CAAC1O,MAAM,CAAC;IAEnD,OAAOgC,MAAM;EACjB;;EAEA;AACJ;AACA;;EAEI9C,CAAC,CAAC6D,EAAE,CAAC6T,KAAK,GAAG,UAAUrJ,KAAK,EAAEsJ,SAAS,EAAEC,MAAM,EAAE;IAC7C,IAAI1G,CAAC;IACL,IAAI0G,MAAM,IAAI,IAAI,EAAE;MAChBA,MAAM,GAAG,IAAI;IACjB;IACA,IAAK9N,OAAO,CAAC8N,MAAM,CAAC,IAAI,IAAI,EAAG;MAC3BA,MAAM,GAAG,IAAI;IACjB;IACAD,SAAS,GAAGA,SAAS,IAAI,CAAC,CAAC;IAC3B,IAAMrV,QAAQ,GAAG;MACb0M,IAAI,EAAE,EAAE;MAAE7O,IAAI,EAAE,EAAE;MAAEqF,IAAI,EAAE,EAAE;MAC5B2J,QAAQ,EAAE,YAAY;MAAEC,QAAQ,EAAE,YAAY;MAC9CyI,SAAS,EAAEzJ,SAAS;MACpBN,MAAM,WAAAA,OAAA,EAAG;QACL,OAAO,IAAI;MACf,CAAC;MACDjN,UAAU,EAAEsC,mBAAmB,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;MACzC0L,cAAc,EAAE,OAAO;MACvB3J,OAAO,EAAE,CAAC,CAAC;MACXkK,iBAAiB,EAAE,CAAC,CAAC;MACrByI,QAAQ,EAAEvO;IACd,CAAC;IAED,IAAMY,aAAa,GAAGnK,CAAC,CAAC2C,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEmH,OAAO,CAACC,EAAE,CAACI,aAAa,EAAEL,OAAO,CAAC8N,MAAM,CAAC,CAACzN,aAAa,CAAC;IACjG,IAAM4N,cAAc,GAAG;MACnBC,eAAe,EAAE;QAAE7N,aAAa,EAAbA;MAAc,CAAC;MAClCA,aAAa,EAAbA;IACJ,CAAC;IAED,IAAM9H,IAAI,GAAGrC,CAAC,CAAC2C,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEoV,cAAc,EAAE/X,CAAC,CAAC2C,MAAM,CAAC,CAAC,CAAC,EAAEL,QAAQ,EAAEqV,SAAS,CAAC,CAAC;IAElF,IAAI7U,MAAM;IACV6U,SAAS,CAACpE,SAAS,GAAG,IAAI;IAC1B,IAAI;MACA,IAAMA,SAAS,GAAG,IAAIlR,IAAI,CAACwV,SAAS,CAACxJ,KAAK,EAAEhM,IAAI,CAAC;MACjD,IAAI;QACAS,MAAM,GAAGT,IAAI,CAACyV,QAAQ,CAACvE,SAAS,EAAElR,IAAI,CAAC2V,eAAe,CAAC;QACvDL,SAAS,CAACpE,SAAS,GAAGA,SAAS;MACnC,CAAC,CAAC,OAAO0E,KAAK,EAAE;QACZ/G,CAAC,GAAG+G,KAAK;QACT,IAAI,OAAOC,OAAO,KAAK,WAAW,IAAIA,OAAO,KAAK,IAAI,EAAE;UACpDA,OAAO,CAACD,KAAK,CAAC/G,CAAC,CAACiH,KAAK,CAAC;QAC1B;QACArV,MAAM,GAAG9C,CAAC,CAAC,QAAQ,CAAC,CAACoY,IAAI,CAAC/V,IAAI,CAAC8H,aAAa,CAACC,WAAW,CAAC;MAC7D;IACJ,CAAC,CAAC,OAAOiO,MAAM,EAAE;MACbnH,CAAC,GAAGmH,MAAM;MACV,IAAI,OAAOH,OAAO,KAAK,WAAW,IAAIA,OAAO,KAAK,IAAI,EAAE;QACpDA,OAAO,CAACD,KAAK,CAAC/G,CAAC,CAACiH,KAAK,CAAC;MAC1B;MACArV,MAAM,GAAG9C,CAAC,CAAC,QAAQ,CAAC,CAACoY,IAAI,CAAC/V,IAAI,CAAC8H,aAAa,CAACE,YAAY,CAAC;IAC9D;IAEA,IAAMxI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;IACjB,OAAOA,CAAC,CAACyW,aAAa,CAAC,CAAC,EAAE;MACtBzW,CAAC,CAAC0W,WAAW,CAAC1W,CAAC,CAAC2W,SAAS,CAAC;IAC9B;IACA,OAAO,IAAI,CAACC,MAAM,CAAC3V,MAAM,CAAC;EAC9B,CAAC;;EAGD;AACJ;AACA;;EAEI9C,CAAC,CAAC6D,EAAE,CAAC6U,OAAO,GAAG,UAAUrK,KAAK,EAAEsJ,SAAS,EAAEgB,SAAS,EAAEf,MAAM,EAAE;IAAA,IAAAgB,MAAA;IAC1D,IAAIvW,IAAI;IACR,IAAIqD,CAAC,EAAE8L,CAAC;IACR,IAAImH,SAAS,IAAI,IAAI,EAAE;MACnBA,SAAS,GAAG,KAAK;IACrB;IACA,IAAIf,MAAM,IAAI,IAAI,EAAE;MAChBA,MAAM,GAAG,IAAI;IACjB;IACA,IAAK9N,OAAO,CAAC8N,MAAM,CAAC,IAAI,IAAI,EAAG;MAC3BA,MAAM,GAAG,IAAI;IACjB;IAEA,IAAMtV,QAAQ,GAAG;MACb+M,iBAAiB,EAAE,CAAC,CAAC;MACrBiE,WAAW,EAAElK,kBAAkB;MAC/BC,SAAS,EAAES,OAAO,CAAC8N,MAAM,CAAC,CAACvO,SAAS;MACpCwP,gBAAgB,EAAE,EAAE;MACpBC,qBAAqB,EAAE,EAAE;MACzBC,kBAAkB,EAAE,EAAE;MACtBC,SAAS,EAAE,GAAG;MACdhK,IAAI,EAAE,EAAE;MAAE7O,IAAI,EAAE,EAAE;MAAEqF,IAAI,EAAE,EAAE;MAC5B2J,QAAQ,EAAE,YAAY;MAAEC,QAAQ,EAAE,YAAY;MAC9CyI,SAAS,EAAEzJ,SAAS;MACpB6K,UAAU,EAAE,CAAC,CAAC;MACdC,UAAU,EAAE,CAAC,CAAC;MACdC,mBAAmB,EAAE,EAAE;MACvBC,mBAAmB,EAAE,KAAK;MAC1BC,SAAS,EAAE,IAAI;MACfC,MAAM,EAAE,IAAI;MACZxL,MAAM,WAAAA,OAAA,EAAG;QACL,OAAO,IAAI;MACf,CAAC;MACD3I,OAAO,EAAE,CAAC,CAAC;MACXoU,QAAQ,EAAE,IAAI;MACdC,gBAAgB,EAAE;IACtB,CAAC;IAED,IAAIC,OAAO,GAAG,CAAC;IACf,IAAInG,WAAW,GAAG,EAAE;IACpB,IAAMnJ,aAAa,GAAGnK,CAAC,CAAC2C,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEmH,OAAO,CAACC,EAAE,CAACI,aAAa,EAAEL,OAAO,CAAC8N,MAAM,CAAC,CAACzN,aAAa,CAAC;IACjG,IAAM4N,cAAc,GAAG;MACnBC,eAAe,EAAE;QAAE7N,aAAa,EAAbA;MAAc,CAAC;MAClCA,aAAa,EAAbA;IACJ,CAAC;IAED,IAAMuP,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA;MAAA,OAASpG,WAAW,CAACrF,GAAG,CAAC,UAAChG,GAAG,EAAED,EAAE;QAAA,OACnDC,GAAG,CAAC0R,WAAW,GAAGzM,MAAM,CAACiF,YAAY,CAAC,EAAE,GAAGnK,EAAE,CAAC,CAAC4R,WAAW,CAAC,CAAC;MAAA,CAAC,CAAC;IAAA;IAEnE,IAAMC,YAAY,GAAG,IAAI,CAACvW,IAAI,CAAC,gBAAgB,CAAC;IAChD,IAAKuW,YAAY,IAAI,IAAI,IAAKlB,SAAS,EAAE;MACrCtW,IAAI,GAAGrC,CAAC,CAAC2C,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEoV,cAAc,EAAE/X,CAAC,CAAC2C,MAAM,CAAC,CAAC,CAAC,EAAEL,QAAQ,EAAEqV,SAAS,CAAC,CAAC;IAChF,CAAC,MAAM;MACHtV,IAAI,GAAGwX,YAAY;IACvB;IAEA,IAAI,EAAClC,SAAS,aAATA,SAAS,eAATA,SAAS,CAAErE,WAAW,KAAIxJ,OAAO,CAAC8N,MAAM,CAAC,CAAC5N,UAAU,EAAE;MACvD3H,IAAI,CAACiR,WAAW,GAAGtK,eAAe,CAC9Bc,OAAO,CAAC8N,MAAM,CAAC,CAAC5N,UAAU,CAACrG,MAAM,EACjCmG,OAAO,CAAC8N,MAAM,CAAC,CAAC5N,UAAU,CAACC,SAAS,EACpCH,OAAO,CAAC8N,MAAM,CAAC,CAAC5N,UAAU,CAACE,SAAS,CAAC;IAC7C;IAEA,IAAI;MACA;MACA;MACA,IAAI/F,IAAI,EAAE/C,CAAC,EAAE0Y,6BAA6B,EAAEjY,CAAC;MAC7C,IAAMkY,UAAU,GAAG,CAAC,CAAC;MACrB,IAAMC,iBAAiB,GAAG,EAAE;MAC5B,IAAIC,gBAAgB,GAAG,CAAC;MACxB7L,SAAS,CAAC6B,aAAa,CAAC5B,KAAK,EAAEhM,IAAI,CAACgN,iBAAiB,EAAE,UAAUhL,MAAM,EAAE;QACrE,IAAIF,IAAI;QACR,IAAI,CAAC9B,IAAI,CAACyL,MAAM,CAACzJ,MAAM,CAAC,EAAE;UACtB;QACJ;QACA2V,iBAAiB,CAACvW,IAAI,CAACY,MAAM,CAAC;QAC9B,SAAA6V,IAAA,MAAAC,cAAA,GAAa5O,MAAM,CAACnL,IAAI,CAACiE,MAAM,IAAI,CAAC,CAAC,CAAC,EAAA6V,IAAA,GAAAC,cAAA,CAAArZ,MAAA,EAAAoZ,IAAA,IAAE;UAAnC/V,IAAI,GAAAgW,cAAA,CAAAD,IAAA;UACL,IAAKH,UAAU,CAAC5V,IAAI,CAAC,IAAI,IAAI,EAAG;YAC5B4V,UAAU,CAAC5V,IAAI,CAAC,GAAG,CAAC,CAAC;YACrB,IAAI8V,gBAAgB,GAAG,CAAC,EAAE;cACtBF,UAAU,CAAC5V,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG8V,gBAAgB;YAC/C;UACJ;QACJ;QACA,KAAK9V,IAAI,IAAI4V,UAAU,EAAE;UACrB,IAAMrW,KAAK,GAAGW,MAAM,CAACF,IAAI,CAAC,IAAI,IAAI,GAAGE,MAAM,CAACF,IAAI,CAAC,GAAG,MAAM;UAC1D,IAAI4V,UAAU,CAAC5V,IAAI,CAAC,CAACT,KAAK,CAAC,IAAI,IAAI,EAAE;YACjCqW,UAAU,CAAC5V,IAAI,CAAC,CAACT,KAAK,CAAC,GAAG,CAAC;UAC/B;UACAqW,UAAU,CAAC5V,IAAI,CAAC,CAACT,KAAK,CAAC,EAAE;QAC7B;QACA,OAAOuW,gBAAgB,EAAE;MAC7B,CAAC,CAAC;MAEF,IAAMG,WAAW,GAAGpa,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,OAAO,CAAC;MAEhD,IAAMC,MAAM,GAAGta,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,WAAW,CAAC;MAC/C,IAAME,YAAY,GAAGva,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,iBAAiB,CAAC;MAC3D,IAAMG,gBAAgB,GAAGxa,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,gBAAgB,CAAC;MAE9D,IAAMI,eAAe,GAAGza,CAAC,CAAC,OAAO,CAAC,CAC7Bqa,QAAQ,CAAC,qBAAqB,CAAC,CAC/BA,QAAQ,CAAC,oBAAoB,CAAC,CAC9BA,QAAQ,CAAC,QAAQ,CAAC,CAClBlH,IAAI,CAAChJ,aAAa,CAACe,SAAS,CAAC,CAC7BwP,EAAE,CAAC,OAAO,EAAE,YAAY;QACrBrY,IAAI,CAACmX,gBAAgB,GAAG,CAACnX,IAAI,CAACmX,gBAAgB;QAC9C,IAAInX,IAAI,CAACmX,gBAAgB,EAAE;UACvBiB,eAAe,CAACJ,QAAQ,CAAC,QAAQ,CAAC;UAClC,OAAOE,YAAY,CAACI,IAAI,CAAC,CAAC;QAC9B,CAAC,MAAM;UACHF,eAAe,CAACG,WAAW,CAAC,QAAQ,CAAC;UACrC,OAAOL,YAAY,CAACM,IAAI,CAAC,CAAC;QAC9B;MACJ,CAAC,CAAC,CACDC,QAAQ,CAACR,MAAM,CAAC;MAErB,IAAMS,cAAc,GAAG/a,CAAC,CAAC,OAAO,CAAC,CAC5Bqa,QAAQ,CAAC,qBAAqB,CAAC,CAC/BA,QAAQ,CAAC,mBAAmB,CAAC,CAC7BlH,IAAI,CAAChJ,aAAa,CAACiB,WAAW,CAAC,CAC/BsP,EAAE,CAAC,OAAO,EAAE,YAAY;QACrB,IAAIrY,IAAI,CAACyN,QAAQ,EAAE;UACfiL,cAAc,CAACH,WAAW,CAAC,QAAQ,CAAC;UACpCvY,IAAI,CAACyN,QAAQ,GAAG,KAAK;QACzB,CAAC,MAAM;UACHiL,cAAc,CAACV,QAAQ,CAAC,QAAQ,CAAC;UACjChY,IAAI,CAACyN,QAAQ,GAAG;YACZE,cAAc,EAAE;UACpB,CAAC;QACL;QACA,OAAOgL,OAAO,CAAC,CAAC;MACpB,CAAC,CAAC,CACDF,QAAQ,CAACR,MAAM,CAAC;MAErBF,WAAW,CACN3B,MAAM,CAAC6B,MAAM,CAAC,CACd7B,MAAM,CAAC8B,YAAY,CAAC,CACpB9B,MAAM,CAAC+B,gBAAgB,CAAC;;MAE7B;MACAxa,CAAC,CAAC,OAAO,CAAC,CACLqa,QAAQ,CAAC,mBAAmB,CAAC,CAC7BS,QAAQ,CAACP,YAAY,CAAC,CACtBpH,IAAI,CAAChJ,aAAa,CAACY,aAAa,CAAC;MACtC,IAAIkQ,aAAa,GAAGjb,CAAC,CAAC,OAAO,CAAC,CACzBqa,QAAQ,CAAC,iBAAiB,CAAC,CAC3BA,QAAQ,CAAC,cAAc,CAAC,CACxBS,QAAQ,CAACP,YAAY,CAAC;MAC3B,IAAMzC,QAAQ,GAAG9X,CAAC,CAAC,UAAU,CAAC,CACzBqa,QAAQ,CAAC,aAAa,CAAC,CACvBS,QAAQ,CAACG,aAAa,CAAC,CACvBxM,IAAI,CAAC,QAAQ,EAAE;QAAA,OAAMuM,OAAO,CAAC,CAAC;MAAA,EAAC,CAAC,CAAC;MACtC,SAAAE,IAAA,MAAAC,cAAA,GAAU5P,MAAM,CAACnL,IAAI,CAACiC,IAAI,CAACgH,SAAS,IAAI,CAAC,CAAC,CAAC,EAAA6R,IAAA,GAAAC,cAAA,CAAAra,MAAA,EAAAoa,IAAA,IAAE;QAAxCrZ,CAAC,GAAAsZ,cAAA,CAAAD,IAAA;QACFlb,CAAC,CAAC,UAAU,CAAC,CAACgF,GAAG,CAACnD,CAAC,CAAC,CAACuW,IAAI,CAACvW,CAAC,CAAC,CAACiZ,QAAQ,CAAChD,QAAQ,CAAC;MACnD;;MAGA;MACA,IAAMsD,MAAM,GAAGpb,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,4BAA4B,CAAC;MAChE,IAAMgB,eAAe,GAAG,EAAE;MAC1B,KAAK3V,CAAC,IAAIqU,UAAU,EAAE;QAClB,IAAI,CAAC1X,IAAI,CAACwW,gBAAgB,CAACvU,QAAQ,CAACoB,CAAC,CAAC,EAAE;UACpC2V,eAAe,CAAC5X,IAAI,CAACiC,CAAC,CAAC;QAC3B;MACJ;MACA,IAAM4V,kBAAkB,GAAG,EAAE;MAC7B,SAAAC,IAAA,MAAAC,gBAAA,GAAUH,eAAe,EAAAE,IAAA,GAAAC,gBAAA,CAAA1a,MAAA,EAAAya,IAAA,IAAE;QAAtB/J,CAAC,GAAAgK,gBAAA,CAAAD,IAAA;QACF,IAAI,CAAClZ,IAAI,CAACyW,qBAAqB,CAACxU,QAAQ,CAACkN,CAAC,CAAC,EAAE;UACzC8J,kBAAkB,CAAC7X,IAAI,CAAC+N,CAAC,CAAC;QAC9B;MACJ;MACA,IAAMiK,eAAe,GAAG,EAAE;MAC1B,SAAAC,IAAA,MAAAC,iBAAA,GAAUN,eAAe,EAAAK,IAAA,GAAAC,iBAAA,CAAA7a,MAAA,EAAA4a,IAAA,IAAE;QAAtBlK,CAAC,GAAAmK,iBAAA,CAAAD,IAAA;QACF,IAAI,CAACrZ,IAAI,CAAC0W,kBAAkB,CAACzU,QAAQ,CAACkN,CAAC,CAAC,EAAE;UACtCiK,eAAe,CAAChY,IAAI,CAAC+N,CAAC,CAAC;QAC3B;MACJ;MAEA,IAAIoK,+BAA+B,GAAG,KAAK;MAC3C,IAAIvZ,IAAI,CAAC8W,mBAAmB,KAAK,MAAM,EAAE;QACrCW,6BAA6B,GAAG,GAAG,CAAC,CAAC;MACzC,CAAC,MAAM;QACHA,6BAA6B,GAAGpE,QAAQ,CAACrT,IAAI,CAAC8W,mBAAmB,CAAC;MACtE;MAEA,IAAI,CAACvW,KAAK,CAACkX,6BAA6B,CAAC,EAAE;QACvC,IAAI+B,UAAU,GAAG,CAAC;QAAC,IAAAC,UAAA,GAAAhL,0BAAA,CACT2K,eAAe;UAAAM,MAAA;QAAA;UAAzB,KAAAD,UAAA,CAAA1V,CAAA,MAAA2V,MAAA,GAAAD,UAAA,CAAA5V,CAAA,IAAA8K,IAAA,GAA2B;YAAtBtL,CAAC,GAAAqW,MAAA,CAAArY,KAAA;YACFmY,UAAU,IAAInW,CAAC,CAAC5E,MAAM;UAC1B;QAAC,SAAAmQ,GAAA;UAAA6K,UAAA,CAAA5K,CAAA,CAAAD,GAAA;QAAA;UAAA6K,UAAA,CAAAzT,CAAA;QAAA;QACDuT,+BAA+B,GAAGC,UAAU,GAAG/B,6BAA6B;MAChF;MAAC,IAAAkC,MAAA,YAAAA,OAAA,EAE6C;QAAzC5a,CAAC,GAAA6a,cAAA,CAAAC,IAAA;QACF/X,IAAI,GAAGsX,eAAe,CAACra,CAAC,CAAC;QACzB,IAAM+a,MAAM,GAAG,EAAE;QACjB,KAAK,IAAMzL,CAAC,IAAIqJ,UAAU,CAAC5V,IAAI,CAAC,EAAE;UAC9BgY,MAAM,CAAC1Y,IAAI,CAACiN,CAAC,CAAC;QAClB;QACA,IAAI0L,eAAe,GAAG,KAAK;QAC3B,IAAMC,SAAS,GAAGrc,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,cAAc,CAAC,CAACQ,IAAI,CAAC,CAAC;QAE5DwB,SAAS,CAAC5D,MAAM,CAACzY,CAAC,CAAC,MAAM,CAAC,CAACyY,MAAM,CACzBzY,CAAC,CAAC,QAAQ,CAAC,CAACmT,IAAI,CAAChP,IAAI,CAAC,EACtBnE,CAAC,CAAC,QAAQ,CAAC,CAACqa,QAAQ,CAAC,OAAO,CAAC,CAAClH,IAAI,KAAAhL,MAAA,CAAKgU,MAAM,CAACrb,MAAM,MAAG,CAC3D,CACJ,CAAC;QACD,IAAIqb,MAAM,CAACrb,MAAM,GAAGuB,IAAI,CAAC2W,SAAS,EAAE;UAChCqD,SAAS,CAAC5D,MAAM,CAACzY,CAAC,CAAC,KAAK,CAAC,CAACoY,IAAI,CAAC/V,IAAI,CAAC8H,aAAa,CAACM,OAAO,CAAC,CAAC;QAC/D,CAAC,MAAM;UACH,IAAI0R,MAAM,CAACrb,MAAM,GAAG,CAAC,EAAE;YACnB,IAAMwb,QAAQ,GAAGtc,CAAC,CAAC,KAAK,CAAC,CAAC8a,QAAQ,CAACuB,SAAS,CAAC;YAC7C,IAAMpX,MAAM,GAAGC,OAAO,CAAC7C,IAAI,CAAC8C,OAAO,EAAEhB,IAAI,CAAC;YAC1C,IAAMoY,WAAW,GAAGla,IAAI,CAAC8H,aAAa,CAACO,aAAa;YACpD1K,CAAC,CAAC,SAAS,EAAE;cAAEqH,IAAI,EAAE;YAAO,CAAC,CAAC,CAACyT,QAAQ,CAACwB,QAAQ,CAAC,CAC5CnY,IAAI,CAAC;cAAEoY,WAAW,EAAXA,WAAW;cAAEC,KAAK,EAAE;YAAY,CAAC,CAAC,CACzC/N,IAAI,CAAC,OAAO,EAAE,YAAY;cACvB,IAAMX,MAAM,GAAG9N,CAAC,CAAC,IAAI,CAAC,CAACgF,GAAG,CAAC,CAAC,CAAC2I,WAAW,CAAC,CAAC,CAAC8O,IAAI,CAAC,CAAC;cACjD,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAIja,MAAM,EAAEka,QAAQ;gBAAA,OAAM,UAAUjM,CAAC,EAAE;kBACnD,IAAMkM,WAAW,GAAG9O,MAAM,CAAC+O,SAAS,CAACpa,MAAM,CAAC3B,MAAM,CAAC,CAAC2b,IAAI,CAAC,CAAC;kBAC1D,IAAIG,WAAW,CAAC9b,MAAM,KAAK,CAAC,EAAE;oBAC1B,OAAO,IAAI;kBACf;kBACA,IAAIgc,MAAM,GAAGnc,IAAI,CAACuG,IAAI,CAACjC,MAAM,CAACyL,CAAC,CAAC/C,WAAW,CAAC,CAAC,EAAEiP,WAAW,CAAC,CAAC;kBAC5D,OAAOD,QAAQ,CAACrY,QAAQ,CAACwY,MAAM,CAAC;gBACpC,CAAC;cAAA,CAAC;cACF,IAAMC,MAAM,GACRjP,MAAM,CAACkP,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAGN,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAC/C5O,MAAM,CAACkP,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAGN,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAClD5O,MAAM,CAACkP,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAGN,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAC5C5O,MAAM,CAACkP,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAGN,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAC7C5O,MAAM,CAACkP,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,UAAUtM,CAAC,EAAE;gBACnC,IAAI5C,MAAM,CAAC+O,SAAS,CAAC,CAAC,CAAC,CAACJ,IAAI,CAAC,CAAC,CAAC3b,MAAM,KAAK,CAAC,EAAE;kBACzC,OAAO,IAAI;gBACf;gBACA,OAAO4P,CAAC,CAAC/C,WAAW,CAAC,CAAC,CAACR,KAAK,CAACW,MAAM,CAAC+O,SAAS,CAAC,CAAC,CAAC,CAAC;cACrD,CAAC,GACC,UAAAnM,CAAC;gBAAA,OAAIA,CAAC,CAAC/C,WAAW,CAAC,CAAC,CAACqP,OAAO,CAAClP,MAAM,CAAC,KAAK,CAAC,CAAC;cAAA;cAErE,OAAOuO,SAAS,CAACY,IAAI,CAAC,uCAAuC,CAAC,CAAC/J,IAAI,CAAC,YAAY;gBAC5E,IAAI6J,MAAM,CAAC/c,CAAC,CAAC,IAAI,CAAC,CAACmT,IAAI,CAAC,CAAC,CAAC,EAAE;kBACxB,OAAOnT,CAAC,CAAC,IAAI,CAAC,CAACM,MAAM,CAAC,CAAC,CAACA,MAAM,CAAC,CAAC,CAACqa,IAAI,CAAC,CAAC;gBAC3C,CAAC,MAAM;kBACH,OAAO3a,CAAC,CAAC,IAAI,CAAC,CAACM,MAAM,CAAC,CAAC,CAACA,MAAM,CAAC,CAAC,CAACua,IAAI,CAAC,CAAC;gBAC3C;cACJ,CAAC,CAAC;YACN,CAAC,CAAC;YACNyB,QAAQ,CAAC7D,MAAM,CAACzY,CAAC,CAAC,MAAM,CAAC,CAAC;YAC1BA,CAAC,CAAC,UAAU,EAAE;cAAEqH,IAAI,EAAE;YAAS,CAAC,CAAC,CAACyT,QAAQ,CAACwB,QAAQ,CAAC,CAC/ClE,IAAI,CAAC/V,IAAI,CAAC8H,aAAa,CAACI,SAAS,CAAC,CAClCkE,IAAI,CAAC,OAAO,EAAE,YAAY;cACvB4N,SAAS,CAACY,IAAI,CAAC,6BAA6B,CAAC,CACxCC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAACC,WAAW,CAAC,SAAS,CAAC;cACjD,OAAO,KAAK;YAChB,CAAC,CAAC;YACNnd,CAAC,CAAC,UAAU,EAAE;cAAEqH,IAAI,EAAE;YAAS,CAAC,CAAC,CAACyT,QAAQ,CAACwB,QAAQ,CAAC,CAC/ClE,IAAI,CAAC/V,IAAI,CAAC8H,aAAa,CAACK,UAAU,CAAC,CACnCiE,IAAI,CAAC,OAAO,EAAE,YAAY;cACvB4N,SAAS,CAACY,IAAI,CAAC,uBAAuB,CAAC,CAClCC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAACC,WAAW,CAAC,SAAS,CAAC;cAClD,OAAO,KAAK;YAChB,CAAC,CAAC;UACV;UAEA,IAAMC,cAAc,GAAGpd,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,mBAAmB,CAAC,CAACS,QAAQ,CAACuB,SAAS,CAAC;UAAC,IAAAgB,UAAA,GAAAvM,0BAAA,CAElEqL,MAAM,CAAC1W,IAAI,CAACP,OAAO,CAAC7C,IAAI,CAAC8C,OAAO,EAAEhB,IAAI,CAAC,CAAC;YAAAmZ,MAAA;UAAA;YAA1D,KAAAD,UAAA,CAAAjX,CAAA,MAAAkX,MAAA,GAAAD,UAAA,CAAAnX,CAAA,IAAA8K,IAAA,GAA4D;cAAA,IAAnDtN,KAAK,GAAA4Z,MAAA,CAAA5Z,KAAA;cACV,IAAM6Z,UAAU,GAAGxD,UAAU,CAAC5V,IAAI,CAAC,CAACT,KAAK,CAAC;cAC1C,IAAM8Z,UAAU,GAAGxd,CAAC,CAAC,SAAS,CAAC;cAC/B,IAAIyd,kBAAkB,GAAG,KAAK;cAC9B,IAAIpb,IAAI,CAAC6W,UAAU,CAAC/U,IAAI,CAAC,EAAE;gBACvBsZ,kBAAkB,GAAI,CAACpb,IAAI,CAAC6W,UAAU,CAAC/U,IAAI,CAAC,CAACG,QAAQ,CAACZ,KAAK,CAAE;cACjE,CAAC,MAAM,IAAIrB,IAAI,CAAC4W,UAAU,CAAC9U,IAAI,CAAC,EAAE;gBAC9BsZ,kBAAkB,GAAIpb,IAAI,CAAC4W,UAAU,CAAC9U,IAAI,CAAC,CAACG,QAAQ,CAACZ,KAAK,CAAE;cAChE;cACA,IAAI,CAAC0Y,eAAe,EAAE;gBAClBA,eAAe,GAAGqB,kBAAkB;cACxC;cACAzd,CAAC,CAAC,SAAS,CAAC,CACPmE,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAACkW,QAAQ,CAAC,WAAW,CAAC,CAC9ClW,IAAI,CAAC,SAAS,EAAE,CAACsZ,kBAAkB,CAAC,CAACna,IAAI,CAAC,QAAQ,EAAE,CAACa,IAAI,EAAET,KAAK,CAAC,CAAC,CAClEoX,QAAQ,CAAC0C,UAAU,CAAC,CACpB/O,IAAI,CAAC,QAAQ,EAAE,YAAY;gBACxB,OAAOzO,CAAC,CAAC,IAAI,CAAC,CAACmd,WAAW,CAAC,SAAS,CAAC;cACzC,CAAC,CAAC;cACNK,UAAU,CAAC/E,MAAM,CAACzY,CAAC,CAAC,QAAQ,CAAC,CAACqa,QAAQ,CAAC,OAAO,CAAC,CAAClH,IAAI,CAACzP,KAAK,CAAC,CAAC;cAC5D8Z,UAAU,CAAC/E,MAAM,CAACzY,CAAC,CAAC,QAAQ,CAAC,CAACqa,QAAQ,CAAC,OAAO,CAAC,CAAClH,IAAI,CAAC,GAAG,GAAGoK,UAAU,GAAG,GAAG,CAAC,CAAC;cAC7EH,cAAc,CAAC3E,MAAM,CAACzY,CAAC,CAAC,KAAK,CAAC,CAACyY,MAAM,CAAC+E,UAAU,CAAC,CAAC;YACtD;UAAC,SAAAvM,GAAA;YAAAoM,UAAA,CAAAnM,CAAA,CAAAD,GAAA;UAAA;YAAAoM,UAAA,CAAAhV,CAAA;UAAA;QACL;QAEA,IAAMqV,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAe;UAC/B,IAAIrB,SAAS,CAACY,IAAI,CAAC,qBAAqB,CAAC,CAACnc,MAAM,GAC5Cub,SAAS,CAACY,IAAI,CAAC,6BAA6B,CAAC,CAACnc,MAAM,EAAE;YACtD6c,QAAQ,CAACtD,QAAQ,CAAC,sBAAsB,CAAC;UAC7C,CAAC,MAAM;YACHsD,QAAQ,CAAC/C,WAAW,CAAC,sBAAsB,CAAC;UAChD;UAEAyB,SAAS,CAACY,IAAI,CAAC,YAAY,CAAC,CAACjY,GAAG,CAAC,EAAE,CAAC;UACpCqX,SAAS,CAACY,IAAI,CAAC,sBAAsB,CAAC,CAACtC,IAAI,CAAC,CAAC;UAC7C,OAAO0B,SAAS,CAACxB,IAAI,CAAC,CAAC;QAC3B,CAAC;QAGD,IAAM+C,YAAY,GAAG5d,CAAC,CAAC,KAAK,CAAC,CAAC8a,QAAQ,CAACuB,SAAS,CAAC;QAEjD,IAAIF,MAAM,CAACrb,MAAM,IAAIuB,IAAI,CAAC2W,SAAS,EAAE;UACjChZ,CAAC,CAAC,UAAU,EAAE;YAAEqH,IAAI,EAAE;UAAS,CAAC,CAAC,CAAC8L,IAAI,CAAC9Q,IAAI,CAAC8H,aAAa,CAACrC,KAAK,CAAC,CAC3DgT,QAAQ,CAAC8C,YAAY,CAAC,CAACnP,IAAI,CAAC,OAAO,EAAE,YAAY;YAClD,IAAI4N,SAAS,CAACY,IAAI,CAAC,UAAU,CAAC,CAACrC,WAAW,CAAC,SAAS,CAAC,CAAC9Z,MAAM,EAAE;cAC1Dka,OAAO,CAAC,CAAC;YACb;YACA,OAAO0C,cAAc,CAAC,CAAC;UAC3B,CAAC,CAAC;QACN;QAEA1d,CAAC,CAAC,UAAU,EAAE;UAAEqH,IAAI,EAAE;QAAS,CAAC,CAAC,CAAC8L,IAAI,CAAC9Q,IAAI,CAAC8H,aAAa,CAACQ,MAAM,CAAC,CAC5DmQ,QAAQ,CAAC8C,YAAY,CAAC,CAACnP,IAAI,CAAC,OAAO,EAAE,YAAY;UAClD4N,SAAS,CAACY,IAAI,CAAC,kBAAkB,CAAC,CAC7BrC,WAAW,CAAC,SAAS,CAAC,CAACsC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC;UAClDb,SAAS,CAACY,IAAI,CAAC,wBAAwB,CAAC,CACnCrC,WAAW,CAAC,SAAS,CAAC,CAACsC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC;UACjD,OAAOQ,cAAc,CAAC,CAAC;QAC3B,CAAC,CAAC;QAEF,IAAMG,YAAY,GAAG7d,CAAC,CAAC,QAAQ,CAAC,CAACqa,QAAQ,CAAC,aAAa,CAAC,CACnDjC,IAAI,CAAC,WAAW,CAAC,CAAC3J,IAAI,CAAC,OAAO,EAAE,UAAUyC,CAAC,EAAE;UAC1C,IAAA4M,WAAA,GAAsB9d,CAAC,CAACkR,CAAC,CAAC6M,aAAa,CAAC,CAACC,QAAQ,CAAC,CAAC;YAA3CvL,IAAI,GAAAqL,WAAA,CAAJrL,IAAI;YAAEwL,GAAG,GAAAH,WAAA,CAAHG,GAAG;UACjB,OAAO5B,SAAS,CAAC6B,GAAG,CAAC;YAAEzL,IAAI,EAAEA,IAAI,GAAG,EAAE;YAAEwL,GAAG,EAAEA,GAAG,GAAG;UAAG,CAAC,CAAC,CAACtD,IAAI,CAAC,CAAC;QACnE,CAAC,CAAC;QAEN,IAAMgD,QAAQ,GAAG3d,CAAC,CAAC,MAAM,CAAC,CAACqa,QAAQ,SAAAlS,MAAA,CAAS/G,CAAC,CAAE,CAAC,CAC3CqX,MAAM,CAACzY,CAAC,CAAC,QAAQ,CAAC,CAACqa,QAAQ,CAAC,SAAS,CAAC,CAAClH,IAAI,CAAChP,IAAI,CAAC,CAACb,IAAI,CAAC,UAAU,EAAEa,IAAI,CAAC,CAACsU,MAAM,CAACoF,YAAY,CAAC,CAAC;QAEnG,IAAIzB,eAAe,EAAE;UACjBuB,QAAQ,CAACtD,QAAQ,CAAC,sBAAsB,CAAC;QAC7C;QACAe,MAAM,CAAC3C,MAAM,CAACkF,QAAQ,CAAC,CAAClF,MAAM,CAAC4D,SAAS,CAAC;MAC7C,CAAC;MAlJD,SAAAH,IAAA,MAAAD,cAAA,GAAU1Q,MAAM,CAACnL,IAAI,CAACqb,eAAe,IAAI,CAAC,CAAC,CAAC,EAAAS,IAAA,GAAAD,cAAA,CAAAnb,MAAA,EAAAob,IAAA;QAAAF,MAAA;MAAA;MAoJ5Chc,CAAC,CAAC,OAAO,CAAC,CACLqa,QAAQ,CAAC,mBAAmB,CAAC,CAC7BS,QAAQ,CAACP,YAAY,CAAC,CACtBpH,IAAI,CAAChJ,aAAa,CAACa,WAAW,CAAC;;MAEpC;MACA,IAAMmT,aAAa,GAAGne,CAAC,CAAC,OAAO,CAAC,CAC3Bqa,QAAQ,CAAC,qBAAqB,CAAC,CAC/BA,QAAQ,CAAC,cAAc,CAAC,CACxBS,QAAQ,CAACP,YAAY,CAAC;MAE3B,IAAM1Z,UAAU,GAAGb,CAAC,CAAC,UAAU,CAAC,CAC3Bqa,QAAQ,CAAC,eAAe,CAAC,CACzBS,QAAQ,CAACqD,aAAa,CAAC,CACvB1P,IAAI,CAAC,QAAQ,EAAE,YAAM;QAClB,IAAI,CAACpM,IAAI,CAACkX,QAAQ,EAAE;UAChBX,MAAI,CAACqE,IAAI,CAAC,2BAA2B,CAAC,CAAC/J,IAAI,CAAC,YAAY;YACpD,OAAO,IAAI,CAACkL,MAAM,CAAC,CAAC;UACxB,CAAC,CAAC;UACF9K,WAAW,GAAG,CAAC;YAAEtL,EAAE,EAAE,CAAC;YAAEtE,KAAK,EAAE7C,UAAU,CAACmE,GAAG,CAAC;UAAE,CAAC,CAAC;UAClD,OAAOgW,OAAO,CAAC,CAAC;QACpB;MACJ,CAAC,CAAC,CAAC,CAAC;;MAER,SAAAqD,IAAA,MAAAC,cAAA,GAAU/S,MAAM,CAACnL,IAAI,CAACiC,IAAI,CAACiR,WAAW,IAAI,CAAC,CAAC,CAAC,EAAA+K,IAAA,GAAAC,cAAA,CAAAxd,MAAA,EAAAud,IAAA,IAAE;QAA1Cxc,CAAC,GAAAyc,cAAA,CAAAD,IAAA;QACFxd,UAAU,CAAC4X,MAAM,CAACzY,CAAC,CAAC,UAAU,CAAC,CAACgF,GAAG,CAACnD,CAAC,CAAC,CAACuW,IAAI,CAACtO,OAAO,CAAC8N,MAAM,CAAC,CAACzN,aAAa,CAACtI,CAAC,CAAC,IAAIiI,OAAO,CAAC,IAAI,CAAC,CAACK,aAAa,CAACtI,CAAC,CAAC,IAAIA,CAAC,CAAC,CAAC;MACzH;MAEA,IAAIQ,IAAI,CAACkX,QAAQ,EAAE;QACfvZ,CAAC,CAAC,KAAK,EAAE;UAAEue,IAAI,EAAE;QAAS,CAAC,CAAC,CACvBlE,QAAQ,CAAC,kBAAkB,CAAC,CAC5BA,QAAQ,CAAC,eAAe,CAAC,CACzBS,QAAQ,CAACqD,aAAa,CAAC,CACvB/F,IAAI,CAAC,GAAG,CAAC,CACT3J,IAAI,CAAC,OAAO,EAAE,YAAY;UACvB6E,WAAW,CAAC7P,IAAI,CAAC;YAAEuE,EAAE,EAAE,EAAEyR,OAAO;YAAE/V,KAAK,EAAE7C,UAAU,CAACmE,GAAG,CAAC;UAAE,CAAC,CAAC;UAC5D0U,iBAAiB,CAAC,CAAC;UACnB,OAAOsB,OAAO,CAAC,CAAC;QACpB,CAAC,CAAC;MACV;MAEA,IAAMwD,QAAQ,GAAG;QACbC,UAAU,EAAE;UAAEC,SAAS,EAAE,QAAQ;UAAEC,SAAS,EAAE,QAAQ;UAAEC,IAAI,EAAE;QAAe,CAAC;QAC9EC,YAAY,EAAE;UAAEH,SAAS,EAAE,QAAQ;UAAEC,SAAS,EAAE,QAAQ;UAAEC,IAAI,EAAE;QAAe,CAAC;QAChFE,YAAY,EAAE;UAAEJ,SAAS,EAAE,QAAQ;UAAEC,SAAS,EAAE,QAAQ;UAAEC,IAAI,EAAE;QAAa;MACjF,CAAC;MAED,IAAMG,aAAa,GAAG/e,CAAC,CAAC,KAAK,EAAE;QAAEue,IAAI,EAAE;MAAS,CAAC,CAAC,CAC7ClE,QAAQ,CAAC,aAAa,CAAC,CACvBA,QAAQ,CAAC,eAAe,CAAC,CACzBS,QAAQ,CAACqD,aAAa,CAAC,CACvB7a,IAAI,CAAC,OAAO,EAAEjB,IAAI,CAAC8M,QAAQ,CAAC,CAACiJ,IAAI,CAACoG,QAAQ,CAACnc,IAAI,CAAC8M,QAAQ,CAAC,CAACuP,SAAS,CAAC,CACpEjQ,IAAI,CAAC,OAAO,EAAE,YAAY;QACvBzO,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,EAAEkb,QAAQ,CAACxe,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,CAAC,CAAC,CAACsb,IAAI,CAAC;QAC3D5e,CAAC,CAAC,IAAI,CAAC,CAACoY,IAAI,CAACoG,QAAQ,CAACxe,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,CAAC,CAAC,CAACob,SAAS,CAAC;QACvD,OAAO1D,OAAO,CAAC,CAAC;MACpB,CAAC,CAAC;MAEN,IAAMgE,aAAa,GAAGhf,CAAC,CAAC,KAAK,EAAE;QAAEue,IAAI,EAAE;MAAS,CAAC,CAAC,CAC7ClE,QAAQ,CAAC,aAAa,CAAC,CACvBA,QAAQ,CAAC,eAAe,CAAC,CACzBS,QAAQ,CAACqD,aAAa,CAAC,CACvB7a,IAAI,CAAC,OAAO,EAAEjB,IAAI,CAAC+M,QAAQ,CAAC,CAACgJ,IAAI,CAACoG,QAAQ,CAACnc,IAAI,CAAC+M,QAAQ,CAAC,CAACuP,SAAS,CAAC,CACpElQ,IAAI,CAAC,OAAO,EAAE,YAAY;QACvBzO,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,EAAEkb,QAAQ,CAACxe,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,CAAC,CAAC,CAACsb,IAAI,CAAC;QAC3D5e,CAAC,CAAC,IAAI,CAAC,CAACoY,IAAI,CAACoG,QAAQ,CAACxe,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,CAAC,CAAC,CAACqb,SAAS,CAAC;QACvD,OAAO3D,OAAO,CAAC,CAAC;MACpB,CAAC,CAAC;MAEN,IAAMiE,MAAM,GAAGjf,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,SAAS,CAAC,CACxCA,QAAQ,CAAC,cAAc,CAAC,CACxBS,QAAQ,CAACP,YAAY,CAAC;MAE3BA,YAAY,CAAC9B,MAAM,CAACwG,MAAM,CAAC;;MAE3B;MACAjf,CAAC,CAAC,OAAO,CAAC,CACLqa,QAAQ,CAAC,mBAAmB,CAAC,CAC7BS,QAAQ,CAACP,YAAY,CAAC,CACtBpH,IAAI,CAAChJ,aAAa,CAACc,WAAW,CAAC;MAEpCsP,YAAY,CAAC9B,MAAM,CAAC2C,MAAM,CAAC;;MAE3B;MACApb,CAAC,CAAC,OAAO,CAAC,CACLqa,QAAQ,CAAC,mBAAmB,CAAC,CAC7BS,QAAQ,CAACP,YAAY,CAAC,CACtBpH,IAAI,CAAChJ,aAAa,CAACe,SAAS,CAAC;MAElClL,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,0BAA0B,CAAC,CAACS,QAAQ,CAACP,YAAY,CAAC;;MAEtE;MACAva,CAAC,CAAC,OAAO,CAAC,CACLqa,QAAQ,CAAC,mBAAmB,CAAC,CAC7BS,QAAQ,CAACP,YAAY,CAAC,CACtBpH,IAAI,CAAChJ,aAAa,CAACgB,SAAS,CAAC;MAClCnL,CAAC,CAAC,OAAO,CAAC,CAACqa,QAAQ,CAAC,0BAA0B,CAAC,CAACS,QAAQ,CAACP,YAAY,CAAC;;MAEtE;MACA,IAAM2E,UAAU,GAAGlf,CAAC,CAAC,OAAO,CAAC,CACxBqa,QAAQ,CAAC,iBAAiB,CAAC,CAC3BS,QAAQ,CAACN,gBAAgB,CAAC;;MAE/B;MACA,IAAI,CAACpC,IAAI,CAACgC,WAAW,CAAC;MAEtB,IAAI,CAAC/X,IAAI,CAACmX,gBAAgB,EAAE;QACxBiB,eAAe,CAACG,WAAW,CAAC,QAAQ,CAAC;QACrCL,YAAY,CAACM,IAAI,CAAC,CAAC;MACvB;;MAEA;;MAEA,IAAIsE,aAAa,GAAG,IAAI;;MAExB;MACA,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;QACzB,IAAI5Z,IAAI;QACR,IAAM6Z,OAAO,GAAG;UACZhQ,iBAAiB,EAAEhN,IAAI,CAACgN,iBAAiB;UACzClF,aAAa,EAAE9H,IAAI,CAAC8H,aAAa;UACjC6N,eAAe,EAAE3V,IAAI,CAAC2V,eAAe;UACrC7S,OAAO,EAAE9C,IAAI,CAAC8C,OAAO;UACrB6J,IAAI,EAAE,EAAE;UAAE7O,IAAI,EAAE,EAAE;UAClB0X,SAAS,EAAExV,IAAI,CAACwV,SAAS;UACzB/H,QAAQ,EAAEzN,IAAI,CAACyN;QACnB,CAAC;QAED8I,MAAI,CAACqE,IAAI,CAAC,0BAA0B,CAAC,CAAC/J,IAAI,CAAC,YAAY;UACnD,OAAOmM,OAAO,CAAClf,IAAI,CAACsD,IAAI,CAACzD,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,UAAU,CAAC,CAAC;QACtD,CAAC,CAAC;QACFsV,MAAI,CAACqE,IAAI,CAAC,0BAA0B,CAAC,CAAC/J,IAAI,CAAC,YAAY;UACnD,OAAOmM,OAAO,CAACrQ,IAAI,CAACvL,IAAI,CAACzD,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,UAAU,CAAC,CAAC;QACtD,CAAC,CAAC;QAEF,IAAIgc,kBAAkB,GAAG,CAAC;QAE1B,IAAMC,OAAO,GAAG,EAAE;QAClB,IAAItN,CAAC,GAAG,CAAC;UAAEuN,GAAG,GAAGvN,CAAC;QAAC,IAAAwN,MAAA,YAAAA,OAAA,EAC0B;UACzC,IAAIC,cAAc;UAClB,IAAMzX,GAAG,GAAGqL,WAAW,CAACkM,GAAG,CAAC;UAC5B,IAAI9f,OAAA,CAAOuI,GAAG,MAAK,QAAQ,EAAE;YACzByX,cAAc,GAAGzX,GAAG,CAACvE,KAAK;UAC9B;UACA,IAAMic,MAAM,GAAG1X,GAAG,CAACD,EAAE;UACrB,IAAM4X,WAAW,GAAG3X,GAAG,CAACzC,IAAI;UAE5B,IAAMiN,IAAI,GAAGpQ,IAAI,CAACiR,WAAW,CAACoM,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACnb,SAAS;UAC7D,IAAIkO,IAAI,IAAI,IAAI,EAAE;YACd6M,kBAAkB,GAAG7M,IAAI;UAC7B,CAAC,MAAM;YACH6M,kBAAkB,GAAG,CAAC;UAC1B;UACA9Z,IAAI,GAAG,EAAE;UACToT,MAAI,CAACqE,IAAI,CAAC,iCAAiC,GAAG0C,MAAM,CAAC,CAACzM,IAAI,CAAC,YAAY;YACnE,IAAIoM,kBAAkB,KAAK,CAAC,EAAE;cAC1BA,kBAAkB,EAAE;cACpB,IAAItf,CAAC,CAAC,IAAI,CAAC,CAACgF,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;gBACtB,OAAOQ,IAAI,CAAC/B,IAAI,CAACzD,CAAC,CAAC,IAAI,CAAC,CAACgF,GAAG,CAAC,CAAC,CAAC;cACnC;YACJ;UACJ,CAAC,CAAC;UAGF,IAAM6a,OAAO,GAAGjH,MAAI,CAACqE,IAAI,CAAC,UAAU,CAAC;UACrC,IAAI6C,SAAS,GAAGlH,MAAI,CAACqE,IAAI,CAAC,oCAAoC,GAAG0C,MAAM,CAAC;UACxE,IAAMI,KAAK,GAAGD,SAAS,CAAChf,MAAM,GAAG,CAAC;UAClC,IAAIuB,IAAI,CAACkX,QAAQ,EAAE;YACf,IAAIyG,eAAe;YACnB,IAAI,CAACD,KAAK,EAAE;cACRD,SAAS,GAAG9f,CAAC,CAAC,OAAO,CAAC,CACjBqa,QAAQ,CAAC,0BAA0B,CAAC,CACpCA,QAAQ,CAAC,0BAA0B,GAAGsF,MAAM,CAAC,CAC7C7E,QAAQ,CAAC+E,OAAO,CAAC;cACtBG,eAAe,GAAGlW,OAAO,CAAC8N,MAAM,CAAC,CAACzN,aAAa,CAACuV,cAAc,CAAC,IAAI5V,OAAO,CAAC,IAAI,CAAC,CAACK,aAAa,CAACuV,cAAc,CAAC,IAAIA,cAAc;cAChI1f,CAAC,CAAC,SAAS,CAAC,CACPqa,QAAQ,CAAC,iBAAiB,CAAC,CAC3BA,QAAQ,CAAC,iBAAiB,GAAGsF,MAAM,CAAC,CACpC7E,QAAQ,CAACgF,SAAS,CAAC,CACnB1H,IAAI,CAAC,KAAK,GAAGnQ,GAAG,CAAC0R,WAAW,GAAG,QAAQ,GAAGqG,eAAe,CAAC;cAC/Db,aAAa,GAAG,IAAI;YACxB;YAEA,IAAI,CAACA,aAAa,EAAE;cAChBvG,MAAI,CAACqE,IAAI,CAAC,oCAAoC,GAAG0C,MAAM,GAAG,wBAAwB,CAAC,CAC9EzM,IAAI,CAAC,YAAY;gBACd8M,eAAe,GAAGlW,OAAO,CAAC8N,MAAM,CAAC,CAACzN,aAAa,CAACuV,cAAc,CAAC,IAAI5V,OAAO,CAAC,IAAI,CAAC,CAACK,aAAa,CAACuV,cAAc,CAAC,IAAIA,cAAc;gBAChI,OAAO1f,CAAC,CAAC,IAAI,CAAC,CAACoY,IAAI,CAAC,KAAK,GAAGnQ,GAAG,CAAC0R,WAAW,GAAG,QAAQ,GAAGqG,eAAe,CAAC;cAC7E,CAAC,CAAC;YACV;UACJ,CAAC,MAAM;YACHF,SAAS,GAAGD,OAAO;UACvB;UAEA,IAAIP,kBAAkB,KAAK,CAAC,EAAE;YAC1B,IAAItK,GAAG,EAAEC,GAAG;YACZ,KAAKpT,CAAC,GAAG,CAAC,EAAEoT,GAAG,GAAGqK,kBAAkB,EAAEtK,GAAG,GAAG,CAAC,IAAIC,GAAG,EAAED,GAAG,GAAGnT,CAAC,GAAGoT,GAAG,GAAGpT,CAAC,GAAGoT,GAAG,EAAED,GAAG,GAAGnT,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;cAC5F,IAAMoe,WAAW,GAAGjgB,CAAC,CAAC,UAAU,CAAC,CAC5Bqa,QAAQ,CAAC,iBAAiB,GAAGsF,MAAM,CAAC,CACpCtF,QAAQ,CAAC,iBAAiB,CAAC,CAC3B5B,MAAM,CAACzY,CAAC,CAAC,UAAU,CAAC,CAAC,CACrByO,IAAI,CAAC,QAAQ,EAAE;gBAAA,OAAMuM,OAAO,CAAC,CAAC;cAAA,EAAC;cACpC,SAAAkF,IAAA,MAAAC,mBAAA,GAAa7E,kBAAkB,EAAA4E,IAAA,GAAAC,mBAAA,CAAArf,MAAA,EAAAof,IAAA,IAAE;gBAA5B/b,IAAI,GAAAgc,mBAAA,CAAAD,IAAA;gBACLD,WAAW,CAACxH,MAAM,CAACzY,CAAC,CAAC,UAAU,CAAC,CAACgF,GAAG,CAACb,IAAI,CAAC,CAACgP,IAAI,CAAChP,IAAI,CAAC,CAAC;cAC1D;cACA2b,SAAS,CAACrH,MAAM,CAACwH,WAAW,CAAC;YACjC;UACJ;UAGA,IAAI5d,IAAI,CAACkX,QAAQ,IAAI,CAACwG,KAAK,EAAE;YACzB/f,CAAC,CAAC,KAAK,CAAC,CACHoY,IAAI,CAAC,GAAG,CAAC,CACTiC,QAAQ,CAAC,qBAAqB,CAAC,CAC/BA,QAAQ,CAAC,eAAe,CAAC,CACzBA,QAAQ,CAAC,iBAAiB,GAAGsF,MAAM,CAAC,CACpC7E,QAAQ,CAACgF,SAAS,CAAC,CACnBrR,IAAI,CAAC,OAAO,EAAG,YAAY;cAAA,IAAA2R,MAAA;cACpB,IAAI,CAACC,QAAQ,CAACpD,IAAI,CAAC,oCAAoC,GAAG,IAAI,CAAC0C,MAAM,CAAC,CAACvB,MAAM,CAAC,CAAC;cAC/EoB,GAAG,GAAGlM,WAAW,CAACgN,SAAS,CAAC,UAAArY,GAAG;gBAAA,OAAIA,GAAG,CAACD,EAAE,KAAKoY,MAAI,CAACT,MAAM;cAAA,EAAC;cAC1DrM,WAAW,CAACiN,MAAM,CAACf,GAAG,EAAE,CAAC,CAAC;cAC1B9F,iBAAiB,CAAC,CAAC;cACnB,OAAOsB,OAAO,CAAC,CAAC;YACpB,CAAC,CAAEvM,IAAI,CAAC;cAAE4R,QAAQ,EAAEzH,MAAI;cAAE+G,MAAM,EAANA;YAAO,CAAC,CACtC,CAAC;UACT;UAEA,IAAIR,aAAa,EAAE;YACf3Z,IAAI,GAAGoa,WAAW,IAAI,IAAI,GAAGA,WAAW,GAAGvd,IAAI,CAACmD,IAAI;YACpDpE,CAAC,GAAG,CAAC;YACLwX,MAAI,CAACqE,IAAI,CAAC,iCAAiC,GAAG0C,MAAM,CAAC,CAACzM,IAAI,CAAC,YAAY;cACnElT,CAAC,CAAC,IAAI,CAAC,CAACgF,GAAG,CAACQ,IAAI,CAACpE,CAAC,CAAC,CAAC;cACpB,OAAOA,CAAC,EAAE;YACd,CAAC,CAAC;YACF+d,aAAa,GAAG,KAAK;UACzB;UAEAI,OAAO,CAAC9b,IAAI,CAAC+B,IAAI,CAAC;QACtB,CAAC;QApGD,OAAOyM,CAAC,GAAGqB,WAAW,CAACxS,MAAM,EAAEmR,CAAC,EAAE,EAAEuN,GAAG,GAAGvN,CAAC;UAAAwN,MAAA;QAAA;QAsG3CJ,OAAO,CAACvQ,cAAc,GAAGwE,WAAW,CAACrF,GAAG,CAAC,UAAAhG,GAAG;UAAA,OAAIA,GAAG,CAACvE,KAAK;QAAA,EAAC;QAC1D2b,OAAO,CAAC7Z,IAAI,GAAG+Z,OAAO;QACtBF,OAAO,CAACxe,UAAU,GAAGyS,WAAW,CAACrF,GAAG,CAAC,UAAChG,GAAG,EAAE7G,CAAC;UAAA,OAAKiB,IAAI,CAACiR,WAAW,CAACrL,GAAG,CAACvE,KAAK,CAAC,CAAC6b,OAAO,CAACne,CAAC,CAAC,CAAC;QAAA,EAAC;QACzFie,OAAO,CAACvH,QAAQ,GAAGzV,IAAI,CAACgH,SAAS,CAACyO,QAAQ,CAAC9S,GAAG,CAAC,CAAC,CAAC;QACjDqa,OAAO,CAAClQ,QAAQ,GAAG4P,aAAa,CAACzb,IAAI,CAAC,OAAO,CAAC;QAC9C+b,OAAO,CAACjQ,QAAQ,GAAG4P,aAAa,CAAC1b,IAAI,CAAC,OAAO,CAAC;QAC9C,IAAIjB,IAAI,CAACkX,QAAQ,EAAE;UACf8F,OAAO,CAACxP,gBAAgB,GAAGyD,WAAW,CAACrF,GAAG,CAAC,UAAAhG,GAAG;YAAA,OAAIA,GAAG,CAAC0R,WAAW;UAAA,EAAC;QACtE;;QAEA;QACA,IAAMV,UAAU,GAAG,CAAC,CAAC;QACrBL,MAAI,CAACqE,IAAI,CAAC,iBAAiB,CAAC,CAACuD,GAAG,CAAC,UAAU,CAAC,CAACtN,IAAI,CAAC,YAAY;UAC1D,IAAMpF,MAAM,GAAG9N,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,QAAQ,CAAC;UACrC,IAAI2V,UAAU,CAACnL,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;YAC/B,OAAOmL,UAAU,CAACnL,MAAM,CAAC,CAAC,CAAC,CAAC,CAACrK,IAAI,CAACqK,MAAM,CAAC,CAAC,CAAC,CAAC;UAChD,CAAC,MAAM;YACH,OAAOmL,UAAU,CAACnL,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAACA,MAAM,CAAC,CAAC,CAAC,CAAC;UAC9C;QACJ,CAAC,CAAC;QACF;QACA,IAAMoL,UAAU,GAAG,CAAC,CAAC;QACrBN,MAAI,CAACqE,IAAI,CAAC,yBAAyB,CAAC,CAAC/J,IAAI,CAAC,YAAY;UAClD,IAAMpF,MAAM,GAAG9N,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,QAAQ,CAAC;UACrC,IAAI2V,UAAU,CAACnL,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;YAC/B,IAAIoL,UAAU,CAACpL,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;cAC/B,OAAOoL,UAAU,CAACpL,MAAM,CAAC,CAAC,CAAC,CAAC,CAACrK,IAAI,CAACqK,MAAM,CAAC,CAAC,CAAC,CAAC;YAChD,CAAC,MAAM;cACH,OAAOoL,UAAU,CAACpL,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAACA,MAAM,CAAC,CAAC,CAAC,CAAC;YAC9C;UACJ;QACJ,CAAC,CAAC;QAEFuR,OAAO,CAACvR,MAAM,GAAG,UAAUzJ,MAAM,EAAE;UAC/B,IAAI,CAAChC,IAAI,CAACyL,MAAM,CAACzJ,MAAM,CAAC,EAAE;YACtB,OAAO,KAAK;UAChB;UACA,KAAK,IAAIoM,CAAC,IAAIwI,UAAU,EAAE;YACtB,IAAMwH,aAAa,GAAGxH,UAAU,CAACxI,CAAC,CAAC;YACnC,IAAIgQ,aAAa,CAACnc,QAAQ,CAAC,EAAE,IAAID,MAAM,CAACoM,CAAC,CAAC,IAAI,IAAI,GAAGpM,MAAM,CAACoM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE;cACvE,OAAO,KAAK;YAChB;UACJ;UACA,OAAO,IAAI;QACf,CAAC;QAEDyO,UAAU,CAACxH,KAAK,CAACsC,iBAAiB,EAAEqF,OAAO,CAAC;QAC5C,IAAMqB,cAAc,GAAG1gB,CAAC,CAAC2C,MAAM,CAAC,CAAC,CAAC,EAAEN,IAAI,EAAE;UAClC2M,IAAI,EAAEqQ,OAAO,CAACrQ,IAAI;UAClB7O,IAAI,EAAEkf,OAAO,CAAClf,IAAI;UAClBiP,QAAQ,EAAEiQ,OAAO,CAACjQ,QAAQ;UAC1BD,QAAQ,EAAEkQ,OAAO,CAAClQ,QAAQ;UAC1B3J,IAAI,EAAE+Z,OAAO;UACbtG,UAAU,EAAVA,UAAU;UACVC,UAAU,EAAVA,UAAU;UACVyH,cAAc,EAAEzH,UAAU;UAAE;UAC5BpK,cAAc,EAAEwE,WAAW,CAACrF,GAAG,CAAC,UAAAhG,GAAG;YAAA,OAAIA,GAAG,CAACvE,KAAK;UAAA,EAAC;UACjDkd,YAAY,EAAE9I,QAAQ,CAAC9S,GAAG,CAAC;QAC/B,CACJ,CAAC;QAED,IAAM6b,gBAAgB,GAAGxB,OAAO,CAAC9L,SAAS;QAC1C,OAAO8L,OAAO,CAAC9L,SAAS;QACxBqF,MAAI,CAACtV,IAAI,CAAC,gBAAgB,EAAEod,cAAc,CAAC;;QAE3C;QACA,IAAIre,IAAI,CAAC+W,mBAAmB,EAAE;UAC1B,IAAM0H,oBAAoB,GAAGlI,MAAI,CAACqE,IAAI,CAAC,+BAA+B,CAAC;UACvEjd,CAAC,CAAC8gB,oBAAoB,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC,CACjCtb,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;YAAA,OAAK4C,WAAW,CAACvI,CAAC,CAAC0F,CAAC,CAAC,CAACyN,IAAI,CAAC,CAAC,EAAEnT,CAAC,CAAC2F,CAAC,CAAC,CAACwN,IAAI,CAAC,CAAC,CAAC;UAAA,EAAC,CACrD2H,QAAQ,CAACgG,oBAAoB,CAAC;QACvC;QAEA5B,UAAU,CAAChB,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC;QAC5B,IAAI7b,IAAI,CAACgX,SAAS,IAAI,IAAI,EAAE;UACxB,OAAOhX,IAAI,CAACgX,SAAS,CAACqH,cAAc,EAAEG,gBAAgB,CAAC;QAC3D;MACJ,CAAC;MAED,IAAM7F,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;QAClBkE,UAAU,CAAChB,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC;QAC9B,OAAO8C,UAAU,CAAC5B,cAAc,EAAE,EAAE,CAAC;MACzC,CAAC;MAAC,IAAA6B,UAAA,GAAAnQ,0BAAA,CAEQzO,IAAI,CAAC2M,IAAI;QAAAkS,MAAA;MAAA;QAAnB,KAAAD,UAAA,CAAA7a,CAAA,MAAA8a,MAAA,GAAAD,UAAA,CAAA/a,CAAA,IAAA8K,IAAA,GAAqB;UAAhBnP,CAAC,GAAAqf,MAAA,CAAAxd,KAAA;UACF,IAAI,CAACuZ,IAAI,CAAC,UAAU,CAAC,CAACxE,MAAM,CAAC,IAAI,CAACwE,IAAI,UAAA9U,MAAA,CAAUnI,CAAC,CAACmhB,OAAO,CAACtf,CAAC,EAAE4Z,eAAe,CAAC,CAAE,CAAC,CAAC;QACrF;MAAC,SAAAxK,GAAA;QAAAgQ,UAAA,CAAA/P,CAAA,CAAAD,GAAA;MAAA;QAAAgQ,UAAA,CAAA5Y,CAAA;MAAA;MAAA,IAAA+Y,WAAA,GAAAtQ,0BAAA,CACSzO,IAAI,CAAClC,IAAI;QAAAkhB,OAAA;MAAA;QAAnB,KAAAD,WAAA,CAAAhb,CAAA,MAAAib,OAAA,GAAAD,WAAA,CAAAlb,CAAA,IAAA8K,IAAA,GAAqB;UAAhBnP,CAAC,GAAAwf,OAAA,CAAA3d,KAAA;UACF,IAAI,CAACuZ,IAAI,CAAC,UAAU,CAAC,CAACxE,MAAM,CAAC,IAAI,CAACwE,IAAI,UAAA9U,MAAA,CAAUnI,CAAC,CAACmhB,OAAO,CAACtf,CAAC,EAAE4Z,eAAe,CAAC,CAAE,CAAC,CAAC;QACrF;MAAC,SAAAxK,GAAA;QAAAmQ,WAAA,CAAAlQ,CAAA,CAAAD,GAAA;MAAA;QAAAmQ,WAAA,CAAA/Y,CAAA;MAAA;MACD,IAAIhG,IAAI,CAACyM,cAAc,IAAI,IAAI,EAAE;QAC7B,IAAIzM,IAAI,CAACkX,QAAQ,EAAE;UACflX,IAAI,CAACyM,cAAc,GAAGvH,KAAK,CAACsH,OAAO,CAACxM,IAAI,CAACyM,cAAc,CAAC,GAAGzM,IAAI,CAACyM,cAAc,GAAG,CAACzM,IAAI,CAACyM,cAAc,CAAC;UACtG,KAAK,IAAI0Q,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGnd,IAAI,CAACyM,cAAc,CAAChO,MAAM,EAAE0e,GAAG,EAAE,EAAE;YACvD,IAAMvX,IAAG,GAAG5F,IAAI,CAACyM,cAAc,CAAC0Q,GAAG,CAAC;YACpClM,WAAW,CAAC7P,IAAI,CAAC;cACbuE,EAAE,EAAE,EAAEyR,OAAO;cACb/V,KAAK,EAAEuE,IAAG;cACVzC,IAAI,EAAGnD,IAAI,CAACmD,IAAI,IAAI,IAAI,GAAGnD,IAAI,CAACmD,IAAI,CAACga,GAAG,CAAC,GAAGxb;YAChD,CAAC,CAAC;YACF0V,iBAAiB,CAAC,CAAC;UACvB;QACJ,CAAC,MAAM;UACH,IAAI,CAACuD,IAAI,CAAC,UAAU,CAAC,CAACxE,MAAM,CAAC,IAAI,CAACwE,IAAI,CAAC,kBAAkB,CAAC,CAAC;UAC3D,IAAI,CAACA,IAAI,CAAC,gBAAgB,CAAC,CAACjY,GAAG,CAAC3C,IAAI,CAACyM,cAAc,CAAC,CAAC7N,MAAM,CAAC,CAAC;QACjE;MACJ,CAAC,MAAM;QACH,IAAI,CAACgc,IAAI,CAAC,gBAAgB,CAAC,CAAChc,MAAM,CAAC,CAAC;MACxC;MACA,IAAIoB,IAAI,CAACue,YAAY,IAAI,IAAI,EAAE;QAC3B,IAAI,CAAC3D,IAAI,CAAC,cAAc,CAAC,CAACjY,GAAG,CAAC3C,IAAI,CAACue,YAAY,CAAC;MACpD;MAEA,IAAI,CAACve,IAAI,CAACiX,MAAM,EAAE;QACd,IAAI,CAAC2D,IAAI,CAAC,YAAY,CAAC,CAACpC,IAAI,CAAC,CAAC;MAClC;;MAEA;MACAG,OAAO,CAAC,CAAC;MAET,IAAI,CAACiC,IAAI,CAAC,mBAAmB,CAAC,CAACqE,QAAQ,CAAC;QACpCC,MAAM,WAAAA,OAACrQ,CAAC,EAAEsQ,EAAE,EAAE;UACV,IAAKA,EAAE,CAACC,MAAM,IAAI,IAAI,EAAG;YACrB,OAAOzG,OAAO,CAAC,CAAC;UACpB;QACJ,CAAC;QACD0G,WAAW,EAAE,IAAI,CAACzE,IAAI,CAAC,mBAAmB,CAAC;QAC3C0E,KAAK,EAAE,IAAI;QACXpF,WAAW,EAAE;MACjB,CAAC,CAAC;IACN,CAAC,CAAC,OAAOtE,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB,IAAI,CAACG,IAAI,CAAC/V,IAAI,CAAC8H,aAAa,CAACG,aAAa,CAAC;IAC/C;IACA,OAAO,IAAI;EACf,CAAC;;EAED;AACJ;AACA;;EAEItK,CAAC,CAAC6D,EAAE,CAAC8F,OAAO,GAAG,UAAUiY,KAAK,EAAEvf,IAAI,EAAE;IAAA,IAAAwf,aAAA;MAAAC,MAAA;IAClC,IAAIF,KAAK,IAAI,IAAI,EAAE;MACfA,KAAK,GAAG,SAAS;IACrB;IACA,IAAMG,OAAO,GAAG,IAAI,CAACze,IAAI,CAAC,SAAS,CAAC;IACpC,IAAM0e,OAAO,GAAG,IAAI,CAAC1e,IAAI,CAAC,SAAS,CAAC;;IAEpC;IACA;IACA,IAAI2e,mBAAmB,GAAG5f,IAAI,aAAJA,IAAI,gBAAAwf,aAAA,GAAJxf,IAAI,CAAEsH,OAAO,cAAAkY,aAAA,uBAAbA,aAAA,CAAeI,mBAAmB;IAC5D,IAAIA,mBAAmB,IAAI,IAAI,EAAE;MAC7BA,mBAAmB,GAAG,SAAAA,oBAAU9F,MAAM,EAAE;QACpC,IAAM1T,GAAG,GAAG9H,IAAI,CAAC8H,GAAG,CAAAX,KAAA,CAARnH,IAAI,EAAAoH,kBAAA,CAASoU,MAAM,IAAI,EAAE,CAAC,CAAC;QACvC,IAAMvb,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAAkH,KAAA,CAARnH,IAAI,EAAAoH,kBAAA,CAASoU,MAAM,IAAI,EAAE,CAAC,CAAC;QACvC,OAAO,UAAUta,CAAC,EAAE;UAChB,IAAMqgB,MAAM,GAAG,GAAG,GAAGvhB,IAAI,CAACwhB,KAAK,CAAE,GAAG,IAAItgB,CAAC,GAAG4G,GAAG,CAAC,IAAK7H,GAAG,GAAG6H,GAAG,CAAC,CAAC;UAChE,kBAAAN,MAAA,CAAkB+Z,MAAM,OAAA/Z,MAAA,CAAI+Z,MAAM;QACtC,CAAC;MACL,CAAC;IACL;IAEA,IAAME,UAAU,GAAG,SAAbA,UAAUA,CAAGR,KAAK,EAAI;MACxB,IAAMS,WAAW,GAAG,SAAdA,WAAWA,CAAGha,CAAC,EAAI;QACrB,OAAOyZ,MAAI,CAAC7E,IAAI,CAAC2E,KAAK,CAAC,CAAC1O,IAAI,CAAC,YAAY;UACrC,IAAMrR,CAAC,GAAG7B,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,CAAC;UAC/B,IAAKzB,CAAC,IAAI,IAAI,IAAKgB,QAAQ,CAAChB,CAAC,CAAC,EAAE;YAC5B,OAAOwG,CAAC,CAACxG,CAAC,EAAE7B,CAAC,CAAC,IAAI,CAAC,CAAC;UACxB;QACJ,CAAC,CAAC;MACN,CAAC;MAED,IAAMmc,MAAM,GAAG,EAAE;MACjBkG,WAAW,CAAC,UAAAxgB,CAAC;QAAA,OAAIsa,MAAM,CAAC1Y,IAAI,CAAC5B,CAAC,CAAC;MAAA,EAAC;MAChC,IAAMygB,UAAU,GAAGL,mBAAmB,CAAC9F,MAAM,CAAC;MAC9C,OAAOkG,WAAW,CAAC,UAACxgB,CAAC,EAAE0gB,IAAI;QAAA,OAAKA,IAAI,CAACrE,GAAG,CAAC,kBAAkB,EAAEoE,UAAU,CAACzgB,CAAC,CAAC,CAAC;MAAA,EAAC;IAChF,CAAC;IAED,QAAQ+f,KAAK;MACT,KAAK,SAAS;QACVQ,UAAU,CAAC,SAAS,CAAC;QACrB;MACJ,KAAK,YAAY;QACb,KAAK,IAAIhhB,CAAC,GAAG,CAAC,EAAE6T,GAAG,GAAG8M,OAAO,EAAE/M,GAAG,GAAG,CAAC,IAAIC,GAAG,EAAED,GAAG,GAAG5T,CAAC,GAAG6T,GAAG,GAAG7T,CAAC,GAAG6T,GAAG,EAAED,GAAG,GAAG5T,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;UACrFghB,UAAU,eAAAja,MAAA,CAAe/G,CAAC,CAAE,CAAC;QACjC;QACA;MACJ,KAAK,YAAY;QACb,KAAK,IAAI6Q,CAAC,GAAG,CAAC,EAAEoD,IAAI,GAAG2M,OAAO,EAAE5M,IAAI,GAAG,CAAC,IAAIC,IAAI,EAAED,IAAI,GAAGnD,CAAC,GAAGoD,IAAI,GAAGpD,CAAC,GAAGoD,IAAI,EAAED,IAAI,GAAGnD,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;UAC5FmQ,UAAU,eAAAja,MAAA,CAAe8J,CAAC,CAAE,CAAC;QACjC;QACA;IACR;IAEAmQ,UAAU,CAAC,oBAAoB,CAAC;IAChCA,UAAU,CAAC,oBAAoB,CAAC;IAEhC,OAAO,IAAI;EACf,CAAC;;EAED;AACJ;AACA;;EAEIpiB,CAAC,CAAC6D,EAAE,CAAC4F,QAAQ,GAAG,UAAUpH,IAAI,EAAE;IAAA,IAAAmgB,MAAA;IAC5B,IAAMT,OAAO,GAAG,IAAI,CAACze,IAAI,CAAC,SAAS,CAAC;IACpC,IAAM0e,OAAO,GAAG,IAAI,CAAC1e,IAAI,CAAC,SAAS,CAAC;IAEpC,IAAMmf,UAAU,GAAG,SAAbA,UAAUA,CAAGb,KAAK,EAAI;MACxB,IAAMS,WAAW,GAAG,SAAdA,WAAWA,CAAGha,CAAC,EAAI;QACrB,OAAOma,MAAI,CAACvF,IAAI,CAAC2E,KAAK,CAAC,CAAC1O,IAAI,CAAC,YAAY;UACrC,IAAMrR,CAAC,GAAG7B,CAAC,CAAC,IAAI,CAAC,CAACsD,IAAI,CAAC,OAAO,CAAC;UAC/B,IAAKzB,CAAC,IAAI,IAAI,IAAKgB,QAAQ,CAAChB,CAAC,CAAC,EAAE;YAC5B,OAAOwG,CAAC,CAACxG,CAAC,EAAE7B,CAAC,CAAC,IAAI,CAAC,CAAC;UACxB;QACJ,CAAC,CAAC;MACN,CAAC;MAED,IAAMmc,MAAM,GAAG,EAAE;MACjBkG,WAAW,CAAC,UAAAxgB,CAAC;QAAA,OAAIsa,MAAM,CAAC1Y,IAAI,CAAC5B,CAAC,CAAC;MAAA,EAAC;MAChC,IAAIjB,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAAkH,KAAA,CAARnH,IAAI,EAAAoH,kBAAA,CAASoU,MAAM,IAAI,EAAE,CAAC,CAAC;MACrC,IAAIvb,GAAG,GAAG,CAAC,EAAE;QACTA,GAAG,GAAG,CAAC;MACX;MACA,IAAI8hB,KAAK,GAAG9hB,GAAG;MACf,IAAM6H,GAAG,GAAG9H,IAAI,CAAC8H,GAAG,CAAAX,KAAA,CAARnH,IAAI,EAAAoH,kBAAA,CAASoU,MAAM,IAAI,EAAE,CAAC,CAAC;MACvC,IAAI1T,GAAG,GAAG,CAAC,EAAE;QACTia,KAAK,GAAG9hB,GAAG,GAAG6H,GAAG;MACrB;MACA,IAAMjG,MAAM,GAAG,SAATA,MAAMA,CAAGX,CAAC;QAAA,OAAK,GAAG,GAAGA,CAAC,IAAK,GAAG,GAAG6gB,KAAK,CAAC;MAAA;MAC7C,OAAOL,WAAW,CAAC,UAAUxgB,CAAC,EAAE0gB,IAAI,EAAE;QAClC,IAAMpP,IAAI,GAAGoP,IAAI,CAACpP,IAAI,CAAC,CAAC;QACxB,IAAMwP,OAAO,GAAG3iB,CAAC,CAAC,OAAO,CAAC,CAACke,GAAG,CAAC;UAC3B,UAAU,EAAE,UAAU;UACtB,QAAQ,EAAE;QACd,CAAC,CAAC;QACF,IAAI0E,OAAO,GAAG,MAAM;QACpB,IAAIC,KAAK,GAAG,CAAC;QACb,IAAIpa,GAAG,GAAG,CAAC,EAAE;UACToa,KAAK,GAAGrgB,MAAM,CAAC,CAACiG,GAAG,CAAC;QACxB;QACA,IAAI5G,CAAC,GAAG,CAAC,EAAE;UACPghB,KAAK,IAAIrgB,MAAM,CAACX,CAAC,CAAC;UAClB+gB,OAAO,GAAG,SAAS;UACnB/gB,CAAC,GAAG,CAACA,CAAC;QACV;QACA8gB,OAAO,CAAClK,MAAM,CAACzY,CAAC,CAAC,OAAO,CAAC,CAACke,GAAG,CAAC;UACtB,UAAU,EAAE,UAAU;UACtB,QAAQ,EAAE2E,KAAK,GAAG,GAAG;UACrB,MAAM,EAAE,CAAC;UACT,OAAO,EAAE,CAAC;UACV,QAAQ,EAAErgB,MAAM,CAACX,CAAC,CAAC,GAAG,GAAG;UACzB,kBAAkB,EAAE+gB;QACxB,CAAC,CACL,CAAC;QACDD,OAAO,CAAClK,MAAM,CAACzY,CAAC,CAAC,OAAO,CAAC,CAACmT,IAAI,CAACA,IAAI,CAAC,CAAC+K,GAAG,CAAC;UACjC,UAAU,EAAE,UAAU;UACtB,cAAc,EAAE,KAAK;UACrB,eAAe,EAAE;QACrB,CAAC,CACL,CAAC;QAED,OAAOqE,IAAI,CAACrE,GAAG,CAAC;UAAE,SAAS,EAAE,CAAC;UAAE,aAAa,EAAE,KAAK;UAAE,YAAY,EAAE;QAAS,CAAC,CAAC,CAAC9F,IAAI,CAACuK,OAAO,CAAC;MACjG,CAAC,CAAC;IACN,CAAC;IAED,KAAK,IAAIvhB,CAAC,GAAG,CAAC,EAAE6T,GAAG,GAAG8M,OAAO,EAAE/M,GAAG,GAAG,CAAC,IAAIC,GAAG,EAAED,GAAG,GAAG5T,CAAC,GAAG6T,GAAG,GAAG7T,CAAC,GAAG6T,GAAG,EAAED,GAAG,GAAG5T,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;MACrFqhB,UAAU,eAAAta,MAAA,CAAe/G,CAAC,CAAE,CAAC;IACjC;IACAqhB,UAAU,CAAC,oBAAoB,CAAC;IAEhC,OAAO,IAAI;EACf,CAAC;;EAED;AACJ;AACA;;EAEI,IAAMK,UAAU,GAAG,SAAbA,UAAUA,CAAGC,EAAE;IAAA,OAAIxb,KAAK,CAACyb,SAAS,CAAChG,OAAO,CAACiG,IAAI,CAACF,EAAE,CAACG,UAAU,CAACnC,QAAQ,EAAEgC,EAAE,CAAC;EAAA;EAEjF,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAa/iB,IAAI,EAAE8F,CAAC,EAAE;IACxC,IAAMkd,EAAE,GAAGhjB,IAAI,CAAC,CAAC,CAAC,CAACU,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACxC,IAAMqU,GAAG,GAAG/U,IAAI,CAAC8F,CAAC,CAAC,CAACpF,MAAM;IAE1B,IAAMgC,MAAM,GAAG,EAAE;IACjBoD,CAAC,GAAGA,CAAC,GAAGkd,EAAE;IACV,IAAIhT,GAAG,GAAGhQ,IAAI,CAAC8F,CAAC,CAAC;IACjB,OAAOkK,GAAG,IAAIA,GAAG,CAACtP,MAAM,GAAGqU,GAAG,EAAE;MAC5B,IAAI/E,GAAG,CAACtP,MAAM,KAAMqU,GAAG,GAAG,CAAE,EAAE;QAC1BrS,MAAM,CAACW,IAAI,CAACyC,CAAC,CAAC;MAClB,CAAC,MAAM;QACH;MACJ;MACAA,CAAC,GAAGA,CAAC,GAAGkd,EAAE;MACVhT,GAAG,GAAGhQ,IAAI,CAAC8F,CAAC,CAAC;IACjB;IACA,OAAOpD,MAAM;EACjB,CAAC;EAED,IAAM3B,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAaf,IAAI,EAAE8F,CAAC,EAAE;IACzC,IAAMkd,EAAE,GAAGhjB,IAAI,CAAC,CAAC,CAAC,CAACU,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACxC,IAAMgC,MAAM,GAAG,EAAE;IACjB,IAAIqS,GAAG,GAAG/U,IAAI,CAAC8F,CAAC,CAAC,CAACpF,MAAM;IACxB,OAAOqU,GAAG,GAAG,CAAC,EAAE;MACZ,IAAI/E,GAAG;MACPlK,CAAC,GAAGA,CAAC,GAAGkd,EAAE;MACVhT,GAAG,GAAGhQ,IAAI,CAAC8F,CAAC,CAAC;MACb,OAAOkK,GAAG,IAAIA,GAAG,CAACtP,MAAM,IAAIqU,GAAG,EAAE;QAC7BjP,CAAC,GAAGA,CAAC,GAAGkd,EAAE;QACVhT,GAAG,GAAGhQ,IAAI,CAAC8F,CAAC,CAAC;MACjB;MACApD,MAAM,CAACW,IAAI,CAACyC,CAAC,CAAC;MAEdiP,GAAG,GAAG/U,IAAI,CAAC8F,CAAC,CAAC,CAACpF,MAAM;IACxB;IACA,OAAOgC,MAAM;EACjB,CAAC;EAED,IAAMugB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIjjB,IAAI,EAAEkjB,KAAK;IAAA,OAAMljB,IAAI,CAAC0N,MAAM,CAAC,UAAAI,CAAC;MAAA,OAAIA,CAAC,CAACpN,MAAM,KAAKwiB,KAAK;IAAA,EAAC,CAAErV,GAAG,CAAC7N,IAAI,CAAC4c,OAAO,CAACvO,IAAI,CAACrO,IAAI,CAAC,CAAC;EAAA;EAE7G,IAAMmjB,OAAO,GAAG,SAAVA,OAAOA,CAAahjB,KAAK,EAAEJ,IAAI,EAAEmjB,KAAK,EAAE;IAC1C,IAAInjB,IAAI,EAAE;MACN,OAAOI,KAAK,CAAC0c,IAAI,oDAAA9U,MAAA,CAAoDmb,KAAK,MAAG,CAAC;IAClF,CAAC,MAAM;MACH,OAAO/iB,KAAK,CAAC0c,IAAI,uBAAA9U,MAAA,CAAuBmb,KAAK,sBAAmB,CAAC;IACrE;EACJ,CAAC;EAED,IAAMhiB,SAAS,GAAG,SAAZA,SAASA,CAAIf,KAAK,EAAEJ,IAAI,EAAE+F,CAAC;IAAA,OAAK3F,KAAK,CAAC0c,IAAI,CAAC9c,IAAI,qBAAAgI,MAAA,CAAqBjC,CAAC,mBAAAiC,MAAA,CAAoBjC,CAAC,CAAE,CAAC;EAAA;EAEnG,IAAMsd,SAAS,GAAG,SAAZA,SAASA,CAAajjB,KAAK,EAAE;IAC/B,IAAMkjB,UAAU,GAAGljB,KAAK,CAAC0c,IAAI,CAAC,UAAU,CAAC;IACzC,OAAO,UAAA/W,CAAC;MAAA,OAAIlG,CAAC,CAACyjB,UAAU,CAACvd,CAAC,CAAC,CAAC;IAAA;EAChC,CAAC;EAED,IAAMwd,SAAS,GAAG,SAAZA,SAASA,CAAanjB,KAAK,EAAE;IAC/B,IAAMkjB,UAAU,GAAGljB,KAAK,CAAC0c,IAAI,CAAC,IAAI,CAAC;IACnC,OAAO,UAAA/W,CAAC;MAAA,OAAIud,UAAU,CAACxG,IAAI,QAAA9U,MAAA,CAAQjC,CAAC,CAAE,CAAC;IAAA;EAC3C,CAAC;EAED,IAAMyd,QAAQ,GAAG,SAAXA,QAAQA,CAAaC,MAAM,EAAExjB,IAAI,EAAEC,GAAG,EAAEwjB,MAAM,EAAElJ,IAAI,EAAE;IACxD,IAAMzZ,MAAM,GAAGiiB,gBAAgB,CAAC/iB,IAAI,EAAEC,GAAG,CAAC;IAC1C,KAAK,IAAIe,CAAC,IAAIF,MAAM,EAAE;MAClB,IAAMgF,CAAC,GAAGhF,MAAM,CAACE,CAAC,CAAC;MACnB,IAAMuG,GAAG,GAAGic,MAAM,CAAC1d,CAAC,GAAG2d,MAAM,CAAC;MAC9B,IAAMhgB,EAAE,GAAG8W,IAAI,GAAG3a,CAAC,CAAC6D,EAAE,CAAC8W,IAAI,GAAG3a,CAAC,CAAC6D,EAAE,CAACgX,IAAI;MACvChX,EAAE,CAACof,IAAI,CAACtb,GAAG,CAAC;MACZ,IAAI,CAACA,GAAG,CAACmc,QAAQ,CAAC,WAAW,CAAC,EAAE;QAC5BH,QAAQ,CAACC,MAAM,EAAExjB,IAAI,EAAE8F,CAAC,EAAE2d,MAAM,EAAElJ,IAAI,CAAC;MAC3C;IACJ;IACA,OAAO,IAAI;EACf,CAAC;EAED,IAAMpG,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAarU,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAE;IAC1D,IAAME,KAAK,GAAGP,CAAC,CAACE,IAAI,CAAC,CAACM,OAAO,CAAC,OAAO,CAAC;IACtC,IAAMujB,SAAS,GAAGjB,UAAU,CAAC5iB,IAAI,CAACgjB,UAAU,CAAC;IAC7C,IAAMU,MAAM,GAAGJ,SAAS,CAACjjB,KAAK,CAAC;IAC/B,IAAMoH,GAAG,GAAGic,MAAM,CAACvjB,GAAG,CAAC;IAEvB,IAAM2jB,WAAW,GAAGrc,GAAG,CAACmc,QAAQ,CAAC,WAAW,CAAC,GAAGF,MAAM,CAAC1jB,IAAI,CAAC+jB,IAAI,CAAC,GAAGtc,GAAG;IACvE,IAAI,CAACA,GAAG,CAACmc,QAAQ,CAAC,WAAW,CAAC,EAAE;MAC5B5jB,IAAI,CAAC+jB,IAAI,GAAGnB,UAAU,CAAC5iB,IAAI,CAACgjB,UAAU,CAAC;IAC3C;IACAc,WAAW,CAACE,OAAO,CAAChkB,IAAI,CAAC;IAEzB,IAAMgB,MAAM,GAAGC,iBAAiB,CAACf,IAAI,EAAEC,GAAG,CAAC;IAC3C,KAAK,IAAIe,CAAC,IAAIF,MAAM,EAAE;MAClB,IAAMG,CAAC,GAAGH,MAAM,CAACE,CAAC,CAAC;MACnB,IAAMd,MAAM,GAAIgB,SAAS,CAACf,KAAK,EAAEJ,IAAI,EAAEkB,CAAC,CAAC,CAAE,CAAC,CAAC;MAC7C,IAAM8iB,WAAW,GAAGrB,UAAU,CAACxiB,MAAM,CAAC4iB,UAAU,CAAC;MACjD5iB,MAAM,CAAC2jB,IAAI,GAAG3jB,MAAM,CAAC2jB,IAAI,IAAI,IAAI,GAAG3jB,MAAM,CAAC2jB,IAAI,GAAGE,WAAW;MAC7D,IAAK7jB,MAAM,CAAC2jB,IAAI,KAAKF,SAAS,IAAMzjB,MAAM,CAAC8jB,OAAO,KAAK,CAAE,EAAE;QACvD9jB,MAAM,CAAC2jB,IAAI,IAAIF,SAAS,GAAGjB,UAAU,CAAC5iB,IAAI,CAACgjB,UAAU,CAAC;MAC1D;MAEA,IAAIa,SAAS,KAAKI,WAAW,EAAE;QAC3BH,WAAW,CAACE,OAAO,CAAC5jB,MAAM,CAAC;MAC/B;IACJ;IAEA,OAAOL,cAAc,CAACC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,CAAC;EAChD,CAAC;EAED,IAAMkB,YAAY,GAAG,SAAfA,YAAYA,CAAarB,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAE;IAC1D,IAAMC,KAAK,GAAGP,CAAC,CAACE,IAAI,CAAC,CAACM,OAAO,CAAC,OAAO,CAAC;IACtC,IAAMojB,MAAM,GAAGzjB,IAAI,GAAGqjB,SAAS,CAACjjB,KAAK,CAAC,GAAGmjB,SAAS,CAACnjB,KAAK,CAAC;IACzD,IAAME,IAAI,GAAGN,IAAI,GAAG,SAAS,GAAG,SAAS;IAEzC,IAAM0jB,MAAM,GAAG1jB,IAAI,IAAK,IAAI,CAACU,UAAU,CAACC,MAAM,GAAG,CAAE,GAAG,CAAC,GAAG,CAAC;IAC3D,IAAI,CAACR,MAAM,IAAI,IAAI,GAAGA,MAAM,CAACG,IAAI,CAAC,GAAGuD,SAAS,MAAM,CAAC,EAAE;MACnD2f,QAAQ,CAACC,MAAM,EAAExjB,IAAI,EAAEC,GAAG,EAAEwjB,MAAM,EAAED,MAAM,CAACvjB,GAAG,GAAGwjB,MAAM,CAAC,CAACC,QAAQ,CAAC,WAAW,CAAC,CAAC;IACnF;IACAF,MAAM,CAACvjB,GAAG,GAAGwjB,MAAM,CAAC,CAAC1G,WAAW,CAAC,WAAW,CAAC;IAC7C,OAAOnd,CAAC,CAACE,IAAI,CAAC,CAACid,WAAW,CAAC,YAAY,CAAC;EAC5C,CAAC;EAED,IAAMkH,SAAS,GAAG,SAAZA,SAASA,CAAa9Q,SAAS,EAAEhT,KAAK,EAAE+iB,KAAK,EAAEnjB,IAAI,EAAEmkB,MAAM,EAAE;IAC/D,IAAIljB,CAAC;IACL,IAAIkjB,MAAM,IAAKhB,KAAK,GAAG,CAAE,EAAE;MACvBC,OAAO,CAAChjB,KAAK,EAAEJ,IAAI,EAAEmjB,KAAK,GAAG,CAAC,CAAC,CAAC1I,WAAW,CAAC,OAAO,CAAC,CAACP,QAAQ,CAAC,MAAM,CAAC;MACrEgK,SAAS,CAAC9Q,SAAS,EAAEhT,KAAK,EAAE+iB,KAAK,GAAG,CAAC,EAAEnjB,IAAI,EAAEmkB,MAAM,CAAC;IACxD;IAEA,IAAMC,MAAM,GAAG,CAACpkB,IAAI,GAAGoT,SAAS,CAACtE,QAAQ,GAAGsE,SAAS,CAACxE,QAAQ,EAAEjO,MAAM,GAAG,CAAC;IAC1E,IAAI,CAACwjB,MAAM,IAAKhB,KAAK,GAAGiB,MAAO,EAAE;MAC7B,IAAIvP,GAAG,EAAEC,GAAG,EAAEuP,KAAK;MACnB,KAAKA,KAAK,GAAGlB,KAAK,GAAG,CAAC,EAAEliB,CAAC,GAAGojB,KAAK,EAAEvP,GAAG,GAAGsP,MAAM,EAAEvP,GAAG,GAAGwP,KAAK,IAAIvP,GAAG,EAAED,GAAG,GAAG5T,CAAC,IAAI6T,GAAG,GAAG7T,CAAC,IAAI6T,GAAG,EAAED,GAAG,GAAG5T,CAAC,EAAE,GAAGA,CAAC,EAAE,EAAE;QAC7GmiB,OAAO,CAAChjB,KAAK,EAAEJ,IAAI,EAAEiB,CAAC,CAAC,CAACwZ,WAAW,CAAC,MAAM,CAAC,CAACP,QAAQ,CAAC,OAAO,CAAC;MACjE;IACJ;IAEA,IAAMja,IAAI,GAAGD,IAAI,GAAGoT,SAAS,CAAChE,OAAO,GAAGgE,SAAS,CAAC/D,OAAO;IACzD,IAAMtO,MAAM,GAAGmiB,gBAAgB,CAACjjB,IAAI,EAAEkjB,KAAK,CAAC;IAC5C,KAAKliB,CAAC,IAAIF,MAAM,EAAE;MACd,IAAMgF,CAAC,GAAGhF,MAAM,CAACE,CAAC,CAAC;MACnB,IAAM2hB,EAAE,GAAGzhB,SAAS,CAACf,KAAK,EAAEJ,IAAI,EAAE+F,CAAC,CAAC;MACpC,IAAIoe,MAAM,KAAKvB,EAAE,CAACe,QAAQ,CAAC,OAAO,CAAC,EAAE;QACjCf,EAAE,CAAC0B,OAAO,CAAC,OAAO,CAAC;MACvB;IACJ;IACA,OAAO,IAAI;EACf,CAAC;EAED,IAAMhQ,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIrU,IAAI,EAAED,IAAI,EAAEukB,OAAO;IAAA,OAAM,UAAUC,EAAE,EAAE;MAC7D,IAAMxX,KAAK,GAAGwX,EAAE,CAACC,MAAM,CAAC/P,SAAS,CAAC1H,KAAK,CAAChN,IAAI,GAAG,UAAU,GAAG,UAAU,CAAC;MACvE,IAAIgN,KAAK,EAAE;QACP,OAAOuX,OAAO,CAACC,EAAE,CAACC,MAAM,EAAEzkB,IAAI,EAAEC,IAAI,EAAE,CAAC+M,KAAK,CAAC,CAAC,CAAC,CAAC;MACpD;IACJ,CAAC;EAAA,CAAC;EAEF,OAAO3L,mBAAmB,GAAG,SAAAA,oBAAC+R,SAAS,EAAE+P,KAAK,EAAEnjB,IAAI;IAAA,OAAM,UAAUwkB,EAAE,EAAE;MACpEN,SAAS,CAAC9Q,SAAS,EAAEvT,CAAC,CAAC2kB,EAAE,CAACC,MAAM,CAAC,CAACpkB,OAAO,CAAC,OAAO,CAAC,EAAE8iB,KAAK,GAAG,CAAC,EAAEnjB,IAAI,EAAEH,CAAC,CAAC2kB,EAAE,CAACC,MAAM,CAAC,CAACd,QAAQ,CAAC,OAAO,CAAC,CAAC;MACpG,OAAO9jB,CAAC,CAAC2kB,EAAE,CAACC,MAAM,CAAC,CAACzH,WAAW,CAAC,YAAY,CAAC;IACjD,CAAC;EAAA,CAAC;AACN,CAAC,CAAC","ignoreList":[]}