{"version":3,"file":"pivot.js","names":["$","expandWithSpan","cell","rows","keys","nth","parent","table","closest","span","dft","Math","max","aggregator","length","_ref","_span","change","object","parentKeysIndices","i","p","getHeader","expandRowCol","getExpandAllHandler","localeGlobal","addSeparators","nStr","thousandsSep","decimalSep","x","split","x1","x2","rgx","test","replace","toDate","value","date","options","year","month","day","Date","toLocaleDateString","e","numberFormat","opts","defaults","digitsAfterDecimal","scaler","prefix","suffix","extend","fieldType","undefined","pivotUtilities","fieldsType","integer","isFunction","isNaN","isFinite","result","toFixed","cellRenderers","text","fieldName","col","row","document","createTextNode","byType","def","type","apply","arguments","usFmt","usFmtInt","usFmtPct","aggregatorTemplates","count","formatter","data","rowKey","colKey","push","format","uniques","fn","_ref2","_ref3","_slicedToArray","attr","uniq","record","includes","numInputs","sum","_ref4","_ref5","parseFloat","extremes","mode","_ref6","_ref7","val","sorter","getSort","sorters","_opts$rendererOptions","_opts$rendererOptions2","y","rendererOptions","toISOString","quantile","q","_ref8","_ref9","vals","sort","a","b","floor","ceil","runningStat","ddof","_ref10","_ref11","n","m","s","m_new","sqrt","sumOverSum","_ref12","_ref13","num","denom","sumNum","sumDenom","sumOverSumBound80","upper","_ref14","_ref15","sign","fractionOf","wrapped","_len","Array","_key","selector","total","inner","_toConsumableArray","id","agg","getAggregator","concat","countUnique","f","listUnique","naturalSort","join","min","first","last","median","average","var","stdev","makeAggregators","fmt","fmtInt","fmtPct","defaultAggregators","renderers","Table","pivotTableRenderer","TableBarchart","barchart","Heatmap","heatmap","RowHeatmap","ColHeatmap","locales","en","formatters","formatInt","formatPct","localeStrings","renderError","computeError","uiRenderError","selectAll","selectNone","tooMany","filterResults","cancel","totals","vs","by","rendererLabel","valuesLabel","fieldsLabel","colsLabel","rowsLabel","groupsLabel","_i","_Object$keys","Object","mthNamesEn","dayNamesEn","zeroPad","number","padding","substr","derivers","bin","binWidth","dateFormat","formatString","utcOutput","mthNames","dayNames","utc","parse","rx","rd","rz","as","bs","nulls_first","nf","nas","nbs","String","match","a1","shift","b1","sortAs","order","mapping","l_mapping","toLowerCase","filterByLength","filter","subarrays","array","map","d","slice","normalizeData","entries","forEach","_ref16","_ref17","key","PivotData","input","_this","_classCallCheck","arrSort","bind","sortKeys","getColKeys","getRowKeys","isArray","aggregatorName","colAttrs","cols","rowAttrs","valAttrs","rowOrder","colOrder","derivedAttributes","tree","rowKeys","colKeys","rowTotals","colTotals","allTotal","sorted","aggregatorsLabel","grouping","rowGroupBefore","colGroupBefore","forEachRecord","processRecord","_createClass","forEachMatchingRecord","criteria","callback","_this2","k","v","attrs","sortersArr","_iterator","_createForOfIteratorHelper","_step","done","err","_i2","_Object$keys2","comparison","_this3","r","c","all_keys","_this4","_iterator2","_step2","_iterator3","_step3","_loop","j","flatRowKey","fromCharCode","result1","_loop2","flatColKey","addRecord","isEmptyObject","left","_i3","_Object$keys3","compactRecord","_i4","_Object$keys4","_iterator4","_step4","tblCols","each","Error","renameAggregators","aggregators","displayName","toUpperCase","string","time","datetime","boolean","pivotData","getClickHandler","td","th","totalAggregator","tr","clickCallback","typeCellRenderer","headCellRenderer","dataCellRenderer","rowValues","colValues","filters","_i5","_Object$keys5","_i6","_Object$keys6","compactLayout","rowExpandHandler","expandRowsGroupAfter","rowsExpandHandler","getExpandHandler","colsExpandHandler","createElement","className","spanSize","arr","asc","end","noDraw","len","asc1","end1","stop","thead","_i7","_Object$keys7","parseInt","setAttribute","appendChild","call","onclick","_i8","_Object$keys8","innerHTML","_i9","_Object$keys9","tbody","lbl","colspan","_i10","_Object$keys10","_iterator5","_step5","textContent","_iterator6","_step6","_i11","_Object$keys11","rowGap","_i12","_Object$keys12","txt","colSpan","style","paddingLeft","_i13","_Object$keys13","_aggregator","_aggregator2","_totalAggregator","_totalAggregator2","append","_i14","_Object$keys14","_totalAggregator3","_totalAggregator4","_totalAggregator5","_totalAggregator6","pivot","inputOpts","locale","dataClass","renderer","localeDefaults","error","console","stack","html","error1","hasChildNodes","removeChild","lastChild","pivotUI","overwrite","_this5","hiddenAttributes","hiddenFromAggregators","hiddenFromDragDrop","menuLimit","exclusions","inclusions","unusedAttrsVertical","autoSortUnusedAttrs","onRefresh","showUI","multiple","parametersActive","itemsId","existingOpts","unusedAttrsVerticalAutoCutoff","attrValues","materializedInput","recordsProcessed","_i15","_Object$keys15","uiContainer","addClass","uiMenu","uiParameters","uiPivotContainer","uiButtonColumns","on","show","removeClass","hide","appendTo","uiButtonGroups","refresh","pvtRenderType","_i16","_Object$keys16","unused","shownAttributes","shownInAggregators","_i17","_shownAttributes","shownInDragDrop","_i18","_shownAttributes2","unusedAttrsVerticalAutoOverride","attrLength","_iterator7","_step7","_loop3","_Object$keys17","_i19","values","hasExcludedItem","valueList","controls","placeholder","class","trim","accept_gen","accepted","real_filter","substring","needle","accept","indexOf","find","prop","toggleClass","checkContainer","_iterator8","_step8","valueCount","filterItem","filterItemExcluded","closeFilterBox","attrElem","finalButtons","triangleLink","_$$position","currentTarget","position","top","css","divAggregator","remove","_i20","_Object$keys18","role","ordering","key_a_to_z","rowSymbol","colSymbol","next","value_a_to_z","value_z_to_a","rowOrderArrow","colOrderArrow","pvVals","pivotTable","initialRender","refreshDelayed","subopts","numInputsToProcess","aggVals","idx","_loop4","aggregatorType","_typeof","aggIdx","initialVals","pvtVals","container","found","labelAggregator","newDropdown","_i21","_shownInAggregators","_this6","instance","findIndex","splice","not","excludedItems","pivotUIOptions","inclusionsInfo","rendererName","currentPivotData","unusedAttrsContainer","children","setTimeout","_iterator9","_step9","inArray","_iterator10","_step10","sortable","update","ui","sender","connectWith","items","scope","_opts$heatmap","_this7","numRows","numCols","colorScaleGenerator","nonRed","round","heatmapper","forEachCell","colorScale","elem","_this8","barcharter","range","wrapper","bgColor","bBase","childIndex","el","prototype","parentNode","childKeysIndices","up","levelKeysIndices","level","getAxis","rowGetter","selecttion","colGetter","showHide","getter","offset","hasClass","initIndex","insertPoint","_old","prepend","parentIndex","rowSpan","expandAll","expand","levels","start","trigger","handler","ev","target","jQuery"],"sources":["pivot.js"],"sourcesContent":["// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n// noinspection JSUnresolvedReference\n\n/*\n * decaffeinate suggestions:\n * DS201: Simplify complex destructure assignments\n * DS202: Simplify dynamic range loops\n * DS203: Remove `|| {}` from converted for-own loops\n * DS204: Change includes calls to have a more natural evaluation order\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\n(function ($) {\n\n    const expandWithSpan = function (cell, rows, keys, nth) {\n        let parent;\n        const table = $(cell).closest('table');\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const dft = !rows ? Math.max(1, this.aggregator.length) : 1;\n        [cell._span, cell[span]] = [cell[span], cell._span != null ? cell._span : dft];\n        const change = cell[span] - cell._span;\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            parent = (getHeader(table, rows, p))[0];\n            if (parent[span] === 1) {\n                parent._span += change;\n                break;\n            }\n            parent[span] += change;\n        }\n\n        return expandRowCol(cell, rows, keys, nth, parent);\n    };\n    /*\n        Utilities\n        */\n\n    let getExpandAllHandler;\n    let localeGlobal = 'en';\n\n    const addSeparators = function (nStr, thousandsSep, decimalSep) {\n        nStr += '';\n        const x = nStr.split('.');\n        let x1 = x[0];\n        const x2 = x.length > 1 ? decimalSep + x[1] : '';\n        const rgx = /(\\d+)(\\d{3})/;\n        while (rgx.test(x1)) {\n            x1 = x1.replace(rgx, '$1' + thousandsSep + '$2');\n        }\n        return x1 + x2;\n    };\n\n\n    function toDate(value) {\n        let date = '';\n\n        if (value) {\n            try {\n                const options = { year: 'numeric', month: '2-digit', day: '2-digit' };\n                date = (new Date(value)).toLocaleDateString(localeGlobal, options);\n            } catch (e) {\n                date = value;\n            }\n        }\n\n        return date;\n    }\n\n    const numberFormat = function (opts) {\n        const defaults = {\n            digitsAfterDecimal: 2, scaler: 1,\n            thousandsSep: ',', decimalSep: '.',\n            prefix: '', suffix: '',\n        };\n        opts = $.extend({}, defaults, opts);\n        return function (x, fieldType) {\n            if (x === undefined) {\n                return '';\n            }\n\n            if (fieldType === $.pivotUtilities.fieldsType.integer) {\n                return x;\n            } else if (fieldType === $.pivotUtilities.fieldsType.date) {\n                return toDate(x);\n            } else if ($.isFunction(fieldType)) {\n                return fieldType(x);\n            }\n\n            if (isNaN(x) || !isFinite(x)) {\n                return '';\n            }\n\n            const result = addSeparators((opts.scaler * x).toFixed(opts.digitsAfterDecimal), opts.thousandsSep, opts.decimalSep);\n            return '' + opts.prefix + result + opts.suffix;\n        };\n    };\n\n    const cellRenderers = {\n        text: function (value, fieldName, col, row) {\n            const { fieldsType } = this;\n\n            if (value === undefined) {\n                value = '';\n            }\n            // Header type date\n            if (fieldName && fieldsType[fieldName] === $.pivotUtilities.fieldsType.date) {\n                return document.createTextNode(toDate(value));\n            }\n\n            return document.createTextNode(value);\n        },\n        byType: function (opts, def) {\n            return function (value, type) {\n                return (opts[type] || def || cellRenderers.text).apply(this, arguments);\n            };\n        },\n    };\n\n    //aggregator templates default to US number formatting, but this is overrideable\n    const usFmt = numberFormat();\n    const usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\n    const usFmtPct = numberFormat({ digitsAfterDecimal: 1, scaler: 100, suffix: '%' });\n\n    const aggregatorTemplates = {\n        count(formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return () => (function (data, rowKey, colKey) {\n                return {\n                    count: 0,\n                    push() {\n                        return this.count++;\n                    },\n                    value() {\n                        return this.count;\n                    },\n                    format: formatter,\n                };\n            });\n        },\n\n        uniques(fn, formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        uniq: [],\n                        push(record) {\n                            if (!this.uniq.includes(record[attr])) {\n                                return this.uniq.push(record[attr]);\n                            }\n                        },\n                        value() {\n                            return fn(this.uniq);\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        sum: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[attr]))) {\n                                return this.sum += parseFloat(record[attr]);\n                            }\n                        },\n                        value() {\n                            return this.sum;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        extremes(mode, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                const opts = args[1] || {};\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        val: null,\n                        sorter: getSort(data != null ? data.sorters : undefined, attr),\n                        push(record) {\n                            let x = record[attr];\n                            let y = this.val;\n\n                            if (opts.rendererOptions?.fieldsType[attr] === $.pivotUtilities.fieldsType.date) {\n                                x = new Date(x);\n                                y = !y ? x : new Date(y);\n                            } else if (['min', 'max'].includes(mode)) {\n                                x = parseFloat(x);\n                            }\n\n                            if (['min', 'max'].includes(mode)) {\n                                if (!isNaN(x)) {\n                                    this.val = Math[mode](x, y != null ? y : x);\n                                }\n                            }\n                            if (mode === 'first') {\n                                if (this.sorter(x, y != null ? y : x) <= 0) {\n                                    this.val = x;\n                                }\n                            }\n                            if (mode === 'last') {\n                                if (this.sorter(x, y != null ? y : x) >= 0) {\n                                    this.val = x;\n                                }\n                            }\n\n                            if (opts.rendererOptions?.fieldsType[attr] === $.pivotUtilities.fieldsType.date) {\n                                this.val = new Date(this.val).toISOString();\n                            }\n\n                        },\n                        value() {\n                            return this.val;\n                        },\n                        format(x, fieldType) {\n                            if (isNaN(x)) {\n                                return x;\n                            } else {\n                                return formatter(x, fieldType);\n                            }\n                        },\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        quantile(q, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        vals: [],\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (!isNaN(x)) {\n                                return this.vals.push(x);\n                            }\n                        },\n                        value() {\n                            if (this.vals.length === 0) {\n                                return null;\n                            }\n                            this.vals.sort((a, b) => a - b);\n                            const i = (this.vals.length - 1) * q;\n                            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        runningStat(mode, ddof, formatter) {\n            if (mode == null) {\n                mode = 'mean';\n            }\n            if (ddof == null) {\n                ddof = 1;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        n: 0.0, m: 0.0, s: 0.0,\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (isNaN(x)) {\n                                return;\n                            }\n                            this.n += 1.0;\n                            if (this.n === 1.0) {\n                                return this.m = x;\n                            } else {\n                                const m_new = this.m + ((x - this.m) / this.n);\n                                this.s = this.s + ((x - this.m) * (x - m_new));\n                                return this.m = m_new;\n                            }\n                        },\n                        value() {\n                            if (mode === 'mean') {\n                                if (this.n === 0) {\n                                    return 0 / 0;\n                                } else {\n                                    return this.m;\n                                }\n                            }\n                            if (this.n <= ddof) {\n                                return 0;\n                            }\n                            switch (mode) {\n                                case 'var':\n                                    return this.s / (this.n - ddof);\n                                case 'stdev':\n                                    return Math.sqrt(this.s / (this.n - ddof));\n                            }\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sumOverSum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            return this.sumNum / this.sumDenom;\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        sumOverSumBound80(upper, formatter) {\n            if (upper == null) {\n                upper = true;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            const sign = upper ? 1 : -1;\n                            return ((0.821187207574908 / this.sumDenom) + (this.sumNum / this.sumDenom) + (1.2815515655446004 * sign *\n                                    Math.sqrt((0.410593603787454 / (this.sumDenom * this.sumDenom)) + ((this.sumNum * (1 - (this.sumNum / this.sumDenom))) / (this.sumDenom * this.sumDenom))))) /\n                                (1 + (1.642374415149816 / this.sumDenom));\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        fractionOf(wrapped, type, formatter) {\n            if (type == null) {\n                type = 'total';\n            }\n            if (formatter == null) {\n                formatter = usFmtPct;\n            }\n            return (...x) => (function (data, rowKey, colKey) {\n                return {\n                    selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[type],\n                    inner: wrapped(...(x || []))(data, rowKey, colKey),\n                    push(record) {\n                        return this.inner.push(record);\n                    },\n                    format: formatter,\n                    value(id) {\n                        const agg = data.getAggregator(...([...this.selector, id] || []));\n                        return this.inner.value() / agg.inner.value();\n                    },\n                    numInputs: wrapped(...(x || []))().numInputs,\n                };\n            });\n        },\n    };\n\n    aggregatorTemplates.countUnique = f => aggregatorTemplates.uniques((x => x.length), f);\n    aggregatorTemplates.listUnique = s => aggregatorTemplates.uniques((x => x.sort(naturalSort).join(s)), (x => x));\n    aggregatorTemplates.max = f => aggregatorTemplates.extremes('max', f);\n    aggregatorTemplates.min = f => aggregatorTemplates.extremes('min', f);\n    aggregatorTemplates.first = f => aggregatorTemplates.extremes('first', f);\n    aggregatorTemplates.last = f => aggregatorTemplates.extremes('last', f);\n    aggregatorTemplates.median = f => aggregatorTemplates.quantile(0.5, f);\n    aggregatorTemplates.average = f => aggregatorTemplates.runningStat('mean', 1, f);\n    aggregatorTemplates.var = (ddof, f) => aggregatorTemplates.runningStat('var', ddof, f);\n    aggregatorTemplates.stdev = (ddof, f) => aggregatorTemplates.runningStat('stdev', ddof, f);\n\n    function makeAggregators(fmt, fmtInt, fmtPct) {\n        return {\n            'Count': aggregatorTemplates.count(fmtInt),\n            'Count Unique Values': aggregatorTemplates.countUnique(fmtInt),\n            'List Unique Values': aggregatorTemplates.listUnique(', '),\n            'Sum': aggregatorTemplates.sum(fmt),\n            'Integer Sum': aggregatorTemplates.sum(fmtInt),\n            'Average': aggregatorTemplates.average(fmt),\n            'Median': aggregatorTemplates.median(fmt),\n            'Sample Variance': aggregatorTemplates.var(1, fmt),\n            'Sample Standard Deviation': aggregatorTemplates.stdev(1, fmt),\n            'Minimum': aggregatorTemplates.min(fmt),\n            'Maximum': aggregatorTemplates.max(fmt),\n            'First': aggregatorTemplates.first(fmt),\n            'Last': aggregatorTemplates.last(fmt),\n            'Sum over Sum': aggregatorTemplates.sumOverSum(fmt),\n            '80% Upper Bound': aggregatorTemplates.sumOverSumBound80(true, fmt),\n            '80% Lower Bound': aggregatorTemplates.sumOverSumBound80(false, fmt),\n            'Sum as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'total', fmtPct),\n            'Sum as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'row', fmtPct),\n            'Sum as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'col', fmtPct),\n            'Count as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'total', fmtPct),\n            'Count as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'row', fmtPct),\n            'Count as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'col', fmtPct),\n        };\n    }\n\n    //default aggregators & renderers use US naming and number formatting\n    const defaultAggregators = makeAggregators(usFmt, usFmtInt, usFmtPct);\n\n    const renderers = {\n        'Table'(data, opts) {\n            return pivotTableRenderer(data, opts);\n        },\n        'Table Barchart'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).barchart();\n        },\n        'Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('heatmap', opts);\n        },\n        'Row Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('rowheatmap', opts);\n        },\n        'Col Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('colheatmap', opts);\n        },\n    };\n\n    const locales = {\n        en: {\n            formatters: {\n                format: usFmt,\n                formatInt: usFmtInt,\n                formatPct: usFmtPct,\n            },\n            renderers,\n            localeStrings: {\n                renderError: 'An error occurred rendering the PivotTable results.',\n                computeError: 'An error occurred computing the PivotTable results.',\n                uiRenderError: 'An error occurred rendering the PivotTable UI.',\n                selectAll: 'Select All',\n                selectNone: 'Select None',\n                tooMany: '(too many to list)',\n                filterResults: 'Filter values',\n                apply: 'Apply',\n                cancel: 'Cancel',\n                totals: 'Totals', //for table renderer\n                vs: 'vs', //for gchart renderer\n                by: 'by', //for gchart renderer\n                rendererLabel: 'Renderer',\n                valuesLabel: 'Values',\n                fieldsLabel: 'Fields',\n                colsLabel: 'Columns',\n                rowsLabel: 'Rows',\n                groupsLabel: 'Groups',\n            },\n        },\n    };\n\n    for (const agg of Object.keys(defaultAggregators)) {\n        locales.en.localeStrings[agg] = agg;\n    }\n\n    //dateFormat deriver l10n requires month and day names to be passed in directly\n    const mthNamesEn = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    const zeroPad = (number, padding = 2) => ('0' + number).substr(-padding, padding);\n\n    const derivers = {\n        bin(col, binWidth) {\n            return record => record[col] - (record[col] % binWidth);\n        },\n        dateFormat(col, formatString, utcOutput, mthNames, dayNames) {\n            if (utcOutput == null) {\n                utcOutput = false;\n            }\n            if (mthNames == null) {\n                mthNames = mthNamesEn;\n            }\n            if (dayNames == null) {\n                dayNames = dayNamesEn;\n            }\n            const utc = utcOutput ? 'UTC' : '';\n            return function (record) { //thanks http://stackoverflow.com/a/12213072/112871\n                const date = new Date(Date.parse(record[col]));\n                if (isNaN(date)) {\n                    return '';\n                }\n                return formatString.replace(/%(.)/g, function (m, p) {\n                    switch (p) {\n                        case 'y':\n                            return date[`get${utc}FullYear`]();\n                        case 'm':\n                            return zeroPad(date[`get${utc}Month`]() + 1);\n                        case 'n':\n                            return mthNames[date[`get${utc}Month`]()];\n                        case 'd':\n                            return zeroPad(date[`get${utc}Date`]());\n                        case 'w':\n                            return dayNames[date[`get${utc}Day`]()];\n                        case 'x':\n                            return date[`get${utc}Day`]();\n                        case 'H':\n                            return zeroPad(date[`get${utc}Hours`]());\n                        case 'M':\n                            return zeroPad(date[`get${utc}Minutes`]());\n                        case 'S':\n                            return zeroPad(date[`get${utc}Seconds`]());\n                        default:\n                            return '%' + p;\n                    }\n                });\n            };\n        },\n    };\n\n    const rx = /(\\d+)|(\\D+)/g;\n    const rd = /\\d/;\n    const rz = /^0/;\n    const naturalSort = (as, bs, nulls_first) => {\n        //nulls first\n        if (nulls_first == null) {\n            nulls_first = true;\n        }\n        const nf = nulls_first ? 1 : -1;\n        if ((bs != null) && (as == null)) {\n            return -1 * nf;\n        }\n        if ((as != null) && (bs == null)) {\n            return 1 * nf;\n        }\n\n        //then raw NaNs\n        if ((typeof as === 'number') && isNaN(as)) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && isNaN(bs)) {\n            return 1;\n        }\n\n        //numbers and numbery strings group together\n        const nas = +as;\n        const nbs = +bs;\n        if (nas < nbs) {\n            return -1;\n        }\n        if (nas > nbs) {\n            return 1;\n        }\n\n        //within that, true numbers before numbery strings\n        if ((typeof as === 'number') && (typeof bs !== 'number')) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && (typeof as !== 'number')) {\n            return 1;\n        }\n        if ((typeof as === 'number') && (typeof bs === 'number')) {\n            return 0;\n        }\n\n        // 'Infinity' is a textual number, so less than 'A'\n        if (isNaN(nbs) && !isNaN(nas)) {\n            return -1;\n        }\n        if (isNaN(nas) && !isNaN(nbs)) {\n            return 1;\n        }\n\n        //finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n        let a = String(as);\n        let b = String(bs);\n        if (a === b) {\n            return 0;\n        }\n        if (!rd.test(a) || !rd.test(b)) {\n            return (a > b ? 1 : -1);\n        }\n\n        //special treatment for strings containing digits\n        a = a.match(rx); //create digits vs. non-digit chunks and iterate through\n        b = b.match(rx);\n        while (a.length && b.length) {\n            const a1 = a.shift();\n            const b1 = b.shift();\n            if (a1 !== b1) {\n                if (rd.test(a1) && rd.test(b1)) { //both are digit chunks\n                    return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n                } else {\n                    return (a1 > b1 ? 1 : -1);\n                }\n            }\n        }\n        return a.length - b.length;\n    };\n\n    const sortAs = function (order) {\n        const mapping = {};\n        const l_mapping = {}; // sort lowercased keys similarly\n        for (let i in order) {\n            const x = order[i];\n            mapping[x] = i;\n            if (typeof x === 'string') {\n                l_mapping[x.toLowerCase()] = i;\n            }\n        }\n        return function (a, b) {\n            if ((mapping[a] != null) && (mapping[b] != null)) {\n                return mapping[a] - mapping[b];\n            } else if (mapping[a] != null) {\n                return -1;\n            } else if (mapping[b] != null) {\n                return 1;\n            } else if ((l_mapping[a] != null) && (l_mapping[b] != null)) {\n                return l_mapping[a] - l_mapping[b];\n            } else if (l_mapping[a] != null) {\n                return -1;\n            } else if (l_mapping[b] != null) {\n                return 1;\n            } else {\n                return naturalSort(a, b);\n            }\n        };\n    };\n\n    function getSort(sorters, attr) {\n        if (sorters != null) {\n            if ($.isFunction(sorters)) {\n                const sort = sorters(attr);\n                if ($.isFunction(sort)) {\n                    return sort;\n                }\n            } else if (sorters[attr] != null) {\n                return sorters[attr];\n            }\n        }\n        return naturalSort;\n    }\n\n    const filterByLength = (keys, length) => keys.filter(x => x.length === length);\n\n    const subarrays = array => array.map((d, i) => array.slice(0, i + 1));  // [1,2,3] => [[1], [1,2], [1,2,3]]\n\n    function normalizeData(data) {\n        Object.entries(data).forEach(([key, value]) => {\n            if (value instanceof Date) {\n                data[key] = value.toISOString();\n            }\n        });\n\n        return data;\n    }\n\n    /*\n    Data Model class\n    */\n\n    class PivotData {\n        constructor(input, opts) {\n            this.arrSort = this.arrSort.bind(this);\n            this.sortKeys = this.sortKeys.bind(this);\n            this.getColKeys = this.getColKeys.bind(this);\n            this.getRowKeys = this.getRowKeys.bind(this);\n            this.getAggregator = this.getAggregator.bind(this);\n            if (opts == null) {\n                opts = {};\n            }\n            this.input = input;\n            if (!Array.isArray(opts.aggregator)) {\n                opts.aggregator = opts.aggregator != null ? opts.aggregator : aggregatorTemplates.count()();\n                opts.aggregator = [opts.aggregator];\n            }\n            this.aggregator = opts.aggregator != null ? opts.aggregator : [aggregatorTemplates.count()()];\n            this.aggregatorName = opts.aggregatorName != null ? opts.aggregatorName : 'Count';\n            this.colAttrs = opts.cols != null ? opts.cols : [];\n            this.rowAttrs = opts.rows != null ? opts.rows : [];\n            this.valAttrs = opts.vals != null ? opts.vals : [];\n            this.sorters = opts.sorters != null ? opts.sorters : {};\n            this.rowOrder = opts.rowOrder != null ? opts.rowOrder : 'key_a_to_z';\n            this.colOrder = opts.colOrder != null ? opts.colOrder : 'key_a_to_z';\n            this.derivedAttributes = opts.derivedAttributes != null ? opts.derivedAttributes : {};\n            this.filter = opts.filter != null ? opts.filter : (() => true);\n            this.tree = {};\n            this.rowKeys = [];\n            this.colKeys = [];\n            this.rowTotals = {};\n            this.colTotals = {};\n            this.allTotal = this.aggregator.map(agg => agg(this, [], []));\n            this.sorted = false;\n            this.aggregatorsLabel = opts.aggregatorsLabel != null ? opts.aggregatorsLabel : [];\n            this.grouping = opts.grouping != null ? opts.grouping : false;\n            this.rowGroupBefore = (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) : true;\n            this.colGroupBefore = (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) : false;\n\n            // iterate through input, accumulating data for cells\n            PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (this.filter(record)) {\n                    return this.processRecord(normalizeData(record));\n                }\n            });\n        }\n\n        //can handle arrays or jQuery selections of tables\n        static forEachRecord(input, derivedAttributes, f) {\n            let addRecord;\n            if ($.isEmptyObject(derivedAttributes)) {\n                addRecord = f;\n            } else {\n                addRecord = function (record) {\n                    for (let k in derivedAttributes) {\n                        const v = derivedAttributes[k];\n                        const left = v(record);\n                        if (left != null) {\n                            record[k] = left;\n                        }\n                    }\n                    return f(record);\n                };\n            }\n\n            //if it's a function, have its calls us back\n            if ($.isFunction(input)) {\n                return input(addRecord);\n            } else if ($.isArray(input)) {\n                if ($.isArray(input[0])) { //array of arrays\n                    return (() => {\n                        const result = [];\n                        for (let i of Object.keys(input || {})) {\n                            const compactRecord = input[i];\n                            if (i > 0) {\n                                const record = {};\n                                for (let j of Object.keys(input[0] || {})) {\n                                    const k = input[0][j];\n                                    record[k] = compactRecord[j];\n                                }\n                                result.push(addRecord(record));\n                            }\n                        }\n                        return result;\n                    })();\n                } else { //array of objects\n                    return (() => {\n                        const result1 = [];\n                        for (let record of input) {\n                            result1.push(addRecord(record));\n                        }\n                        return result1;\n                    })();\n                }\n            } else if (input instanceof $) {\n                const tblCols = [];\n                $('thead > tr > th', input).each(function (i) {\n                    return tblCols.push($(this).text());\n                });\n                return $('tbody > tr', input).each(function (i) {\n                    const record = {};\n                    $('td', this).each(function (j) {\n                        return record[tblCols[j]] = $(this).text();\n                    });\n                    return addRecord(record);\n                });\n            } else {\n                throw new Error('unknown input format');\n            }\n        }\n\n        forEachMatchingRecord(criteria, callback) {\n            return PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (!this.filter(record)) {\n                    return;\n                }\n                for (let k in criteria) {\n                    const v = criteria[k];\n                    if (v !== (record[k] != null ? record[k] : 'null')) {\n                        return;\n                    }\n                }\n                return callback(record);\n            });\n        }\n\n        arrSort(attrs, nulls_first) {\n\n            const sortersArr = [];\n            for (const a of attrs) {\n                sortersArr.push(getSort(this.sorters, a));\n            }\n\n            return function (a, b) {\n                for (let i of Object.keys(sortersArr || {})) {\n                    const sorter = sortersArr[i];\n                    const comparison = sorter(a[i], b[i], nulls_first);\n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            };\n        }\n\n        sortKeys() {\n            if (!this.sorted) {\n                this.sorted = true;\n                const v = (r, c) => this.getAggregator(r, c).value();\n                switch (this.rowOrder) {\n                    case 'value_a_to_z':\n                        this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n                        break;\n                    case 'value_z_to_a':\n                        this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n                        break;\n                    default:\n                        this.rowKeys.sort(this.arrSort(this.rowAttrs, this.rowGroupBefore));\n                }\n                switch (this.colOrder) {\n                    case 'value_a_to_z':\n                        return this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n                    case 'value_z_to_a':\n                        return this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n                    default:\n                        return this.colKeys.sort(this.arrSort(this.colAttrs, this.colGroupBefore));\n                }\n            }\n        }\n\n        getColKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.colKeys;\n            } else {\n                return filterByLength(this.colKeys, this.colAttrs.length);\n            }\n        }\n\n        getRowKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.rowKeys;\n            } else {\n                return filterByLength(this.rowKeys, this.rowAttrs.length);\n            }\n        }\n\n        processRecord(record) { //this code is called in a tight loop\n            let x;\n            let colKeys = [];\n            let rowKeys = [];\n            for (x of this.colAttrs) {\n                colKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            for (x of this.rowAttrs) {\n                rowKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            colKeys = this.grouping && colKeys.length ? subarrays(colKeys) : [colKeys];\n            rowKeys = this.grouping && rowKeys.length ? subarrays(rowKeys) : [rowKeys];\n\n            this.aggregator.forEach((agg, id) => {\n                return this.allTotal[id].push(record);\n            });\n\n            const result = [];\n            for (let j in rowKeys) {\n                const rowKey = rowKeys[j];\n                const flatRowKey = rowKey.join(String.fromCharCode(0));\n\n                const result1 = [];\n                for (let i in colKeys) {\n                    const colKey = colKeys[i];\n                    const flatColKey = colKey.join(String.fromCharCode(0));\n\n                    if (rowKey.length !== 0) {\n                        if (!this.rowTotals[flatRowKey]) {\n                            this.rowKeys.push(rowKey);\n                            this.rowTotals[flatRowKey] = this.aggregator.map(agg => agg(this, rowKey, []));\n                        }\n                        this.rowTotals[flatRowKey].forEach((agg, id) => {\n                            if (!this.grouping || (colKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if (colKey.length !== 0) {\n                        if (!this.colTotals[flatColKey]) {\n                            this.colKeys.push(colKey);\n                            this.colTotals[flatColKey] = this.aggregator.map(agg => agg(this, [], colKey));\n                        }\n                        this.colTotals[flatColKey].forEach((agg, id) => {\n                            if (!this.grouping || (rowKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if ((colKey.length !== 0) && (rowKey.length !== 0)) {\n                        if (!this.tree[flatRowKey]) {\n                            this.tree[flatRowKey] = {};\n                        }\n                        if (!this.tree[flatRowKey][flatColKey]) {\n                            this.tree[flatRowKey][flatColKey] = this.aggregator.map(agg => agg(this, rowKey, colKey));\n                        }\n                        result1.push(this.tree[flatRowKey][flatColKey].forEach((agg, id) => agg.push(record)));\n                    } else {\n                        result1.push(undefined);\n                    }\n                }\n                result.push(result1);\n            }\n            return result;\n        }\n\n        getAggregator(rowKey, colKey, id) {\n            let agg;\n            if (id == null) {\n                id = 0;\n            }\n            const flatRowKey = rowKey.join(String.fromCharCode(0));\n            const flatColKey = colKey.join(String.fromCharCode(0));\n            if ((rowKey.length === 0) && (colKey.length === 0)) {\n                agg = this.allTotal[id];\n            } else if (rowKey.length === 0) {\n                agg = this.colTotals[flatColKey] && this.colTotals[flatColKey][id];\n            } else if (colKey.length === 0) {\n                agg = this.rowTotals[flatRowKey] && this.rowTotals[flatRowKey][id];\n            } else {\n                agg = this.tree[flatRowKey][flatColKey] && this.tree[flatRowKey][flatColKey][id];\n            }\n            return agg != null ? agg : {\n                value() {\n                    return null;\n                }, format() {\n                    return '';\n                },\n            };\n        }\n    }\n\n    const renameAggregators = (aggregators) => aggregators.map((agg, id) =>\n        (agg.displayName = String.fromCharCode(97 + id).toUpperCase()));\n\n    const fieldsType = {\n        string: 'String',\n        number: 'Number',\n        date: 'Date',\n        time: 'Time',\n        datetime: 'Datetime',\n        boolean: 'Boolean',\n        integer: 'Integer',\n    };\n\n    //expose these to the outside world\n    $.pivotUtilities = {\n        aggregatorTemplates, aggregators: defaultAggregators, renderers, cellRenderers, derivers, locales, fieldsType,\n        zeroPad, naturalSort, numberFormat, sortAs, PivotData, toDate\n    };\n\n    /*\n    Default Renderer for hierarchical table layout\n    */\n\n    function pivotTableRenderer(pivotData, opts) {\n\n        let agg, aggregator, colKey, getClickHandler, i, id, j, td, th, totalAggregator, tr, val, x;\n        const defaults = {\n            table: {\n                clickCallback: null,\n                rowTotals: true,\n                colTotals: true,\n            },\n            localeStrings: {\n                totals: 'Totals',\n            },\n\n            typeCellRenderer: cellRenderers.text,\n            headCellRenderer: cellRenderers.text,\n            dataCellRenderer: cellRenderers.text,\n\n            fieldsType: {},\n        };\n\n        opts = $.extend(true, {}, defaults, opts);\n\n        const {\n            colAttrs,\n        } = pivotData;\n        const {\n            rowAttrs,\n        } = pivotData;\n        const rowKeys = pivotData.getRowKeys(true);\n        const colKeys = pivotData.getColKeys(true);\n\n        if (opts.table.clickCallback) {\n            getClickHandler = function (value, rowValues, colValues) {\n                let attr, i;\n                const filters = {};\n                for (i of Object.keys(colAttrs || {})) {\n                    attr = colAttrs[i];\n                    if (colValues[i] != null) {\n                        filters[attr] = colValues[i];\n                    }\n                }\n                for (i of Object.keys(rowAttrs || {})) {\n                    attr = rowAttrs[i];\n                    if (rowValues[i] != null) {\n                        filters[attr] = rowValues[i];\n                    }\n                }\n                return e => opts.table.clickCallback(e, value, filters, pivotData);\n            };\n        }\n\n        const compactLayout = (opts.table.compactLayout != null ? opts.table.compactLayout : true) && pivotData.grouping;\n        const rowExpandHandler = compactLayout ? expandRowCol : pivotData.rowGroupBefore ? expandWithSpan : expandRowsGroupAfter;\n\n        const rowsExpandHandler = getExpandHandler(rowKeys, true, rowExpandHandler.bind(pivotData));\n        const colsExpandHandler = getExpandHandler(colKeys, false, expandWithSpan.bind(pivotData));\n\n        //now actually build the outpu\n        const result = document.createElement('table');\n        result.className = 'pvtTable';\n\n        //helper function for setting row/col-span in pivotTableRenderer\n        const spanSize = function (arr, i, j) {\n            let x;\n            if (i !== 0) {\n                let asc, end;\n                let noDraw = true;\n                for (x = 0, end = j, asc = 0 <= end; asc ? x <= end : x >= end; asc ? x++ : x--) {\n                    if (arr[i - 1][x] !== arr[i][x]) {\n                        noDraw = false;\n                    }\n                }\n                if (noDraw) {\n                    return -1; //do not draw cell\n                }\n            }\n            let len = 0;\n            while ((i + len) < arr.length) {\n                let asc1, end1;\n                let stop = false;\n                for (x = 0, end1 = j, asc1 = 0 <= end1; asc1 ? x <= end1 : x >= end1; asc1 ? x++ : x--) {\n                    if (arr[i][x] !== arr[i + len][x]) {\n                        stop = true;\n                    }\n                }\n                if (stop) {\n                    break;\n                }\n                len++;\n            }\n            return len;\n        };\n\n        //the first few rows are for col headers\n        const thead = document.createElement('thead');\n        for (j of Object.keys(colAttrs || {})) {\n            const c = colAttrs[j];\n            tr = document.createElement('tr');\n            if ((parseInt(j) === 0) && (rowAttrs.length !== 0)) {\n                th = document.createElement('th');\n                th.setAttribute('colspan', rowAttrs.length);\n                th.setAttribute('rowspan', colAttrs.length);\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            th.className = 'pvtAxisLabel';\n            th.appendChild(opts.typeCellRenderer.call(opts, c));\n            if (pivotData.grouping && (j < (colAttrs.length - 1))) {\n                th.onclick = getExpandAllHandler(pivotData, +j, false);\n                th.className += ` open level${j}`;\n            }\n            tr.appendChild(th);\n            for (i of Object.keys(colKeys || {})) {\n                colKey = colKeys[i];\n                x = spanSize(colKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtColLabel';\n                    th.className += ` col${pivotData.colGroupBefore ? +i : (+i + x) - 1}`;\n                    th.appendChild(opts.headCellRenderer.call(opts, colKey[j], c));\n                    th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                    if ((parseInt(j) === (colAttrs.length - 1)) && (rowAttrs.length !== 0)) {\n                        th.setAttribute('rowspan', 2);\n                    }\n                    if (pivotData.grouping && (j < (colAttrs.length - 1)) && colKey[j]) {\n                        th.className += ' pvtSubtotal open';\n                        th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                        th.onclick = colsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n            if ((parseInt(j) === 0) && opts.table.rowTotals) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', Math.max(1, pivotData.aggregator.length));\n                th.setAttribute('rowspan', colAttrs.length + (rowAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            thead.appendChild(tr);\n        }\n\n        //then a row for row header headers\n        if (rowAttrs.length !== 0) {\n            tr = document.createElement('tr');\n            for (i of Object.keys(rowAttrs || {})) {\n                const r = rowAttrs[i];\n                th = document.createElement('th');\n                th.className = 'pvtAxisLabel';\n                th.appendChild(opts.typeCellRenderer.call(opts, r));\n                if (pivotData.grouping && (i < (rowAttrs.length - 1))) {\n                    th.className += ` open level${i}`;\n                    th.onclick = getExpandAllHandler(pivotData, +i, true);\n                }\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            if (colAttrs.length === 0) {\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', pivotData.aggregator.length);\n            }\n            tr.appendChild(th);\n            thead.appendChild(tr);\n        }\n        result.appendChild(thead);\n\n        //now the actual data rows, with their row headers and totals\n        const tbody = document.createElement('tbody');\n\n        if (pivotData.aggregatorsLabel && (pivotData.aggregatorsLabel.length > 1)) {\n            let lbl;\n            tr = document.createElement('tr');\n            th = document.createElement('th');\n            const colspan = rowAttrs.length + (colAttrs.length === 0 ? 0 : 1);\n            th.setAttribute('colspan', colspan);\n            tr.appendChild(th);\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (lbl of pivotData.aggregatorsLabel) {\n                    th = document.createElement('th');\n                    th.className = `pvtAggregatorLabel col${j}`;\n                    th.textContent = lbl;\n                    tr.appendChild(th);\n                }\n            }\n\n            for (lbl of pivotData.aggregatorsLabel) {\n                th = document.createElement('th');\n                th.className = 'pvtAggregatorLabel';\n                th.textContent = lbl;\n                tr.appendChild(th);\n            }\n\n            tbody.appendChild(tr);\n        }\n\n\n        for (i of Object.keys(rowKeys || {})) {\n            const rowKey = rowKeys[i];\n            tr = document.createElement('tr');\n            const rowGap = rowAttrs.length - rowKey.length;\n            tr.className = rowGap ? `pvtSubtotal level${rowKey.length}` : 'pvtData';\n            for (j of Object.keys(rowKey || {})) {\n                const txt = rowKey[j];\n                if (compactLayout && (j < (rowKey.length - 1))) {\n                    continue;\n                }\n                x = compactLayout ? 1 : spanSize(rowKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtRowLabel';\n                    th.className += ` row${pivotData.rowGroupBefore ? +i : (+i + x) - 1}`;\n                    th.appendChild(opts.headCellRenderer.call(opts, txt, rowAttrs[j]));\n                    th.setAttribute('rowspan', x);\n                    if (compactLayout) {\n                        th.colSpan = rowAttrs.length;\n                        th.style.paddingLeft = 5 + (parseInt(j) * 20) + 'px';\n                    }\n                    if (pivotData.grouping && (j < (rowAttrs.length - 1))) {\n                        th.className += ' open';\n                        th.onclick = rowsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n\n            if (!compactLayout && rowGap) {\n                th = document.createElement('th');\n                th.colSpan = rowGap;\n                th.textContent = `Total (${rowKey[j]})`;\n                tr.appendChild(th);\n            }\n\n            if (colAttrs.length) {\n                th.colSpan++;\n            }\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    aggregator = pivotData.getAggregator(rowKey, colKey, id);\n                    val = aggregator.value(id);\n                    td = document.createElement('td');\n                    if (!rowGap) {\n                        td.className = 'pvtVal ';\n                    }\n                    td.className += `row${i} col${j}`;\n                    if (colAttrs.length - colKey.length) {\n                        td.className = `pvtSubtotal level${colKey.length} row${i} col${j}`;\n                    }\n                    td.appendChild(opts.dataCellRenderer.call(opts, aggregator.format(val, opts.fieldsType[aggregator?.attr]), aggregator?.attr, rowKey, colKey));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, colKey);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator(rowKey, [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtTotal rowTotal';\n                    td.append(opts.dataCellRenderer.call(opts, totalAggregator.format(val, opts.fieldsType[totalAggregator?.attr]), totalAggregator?.attr, rowKey, []));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, []);\n                    }\n                    td.setAttribute('data-for', 'row' + i);\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n\n        //finally, the row for col totals, and a grand total\n        if (opts.table.colTotals || (rowAttrs.length === 0)) {\n            tr = document.createElement('tr');\n            if (opts.table.colTotals || (rowAttrs.length === 0)) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtColTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', rowAttrs.length + (colAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            for (j of Object.keys(colKeys || {})) {\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], colKey, id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = `pvtTotal colTotal col${j}`;\n                    if (colKey.length !== colAttrs.length) {\n                        td.className += ` pvtSubtotal level${colKey.length}`;\n                    }\n                    td.append(opts.dataCellRenderer.call(opts, totalAggregator.format(val, opts.fieldsType[totalAggregator?.attr]), totalAggregator?.attr, [], colKey));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], colKey);\n                    }\n                    td.setAttribute('data-for', 'col' + j);\n                    tr.appendChild(td);\n                }\n            }\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtGrandTotal';\n                    td.append(opts.dataCellRenderer.call(opts, totalAggregator.format(val, opts.fieldsType[totalAggregator?.attr]), totalAggregator?.attr, [], []));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], []);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        result.appendChild(tbody);\n\n        //squirrel this away for later\n        result.setAttribute('data-numrows', rowKeys.length);\n        result.setAttribute('data-numcols', colKeys.length);\n\n        return result;\n    }\n\n    /*\n    Pivot Table core: create PivotData object and call Renderer on it\n    */\n\n    $.fn.pivot = function (input, inputOpts, locale) {\n        let e;\n        if (locale == null) {\n            locale = 'en';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n        localeGlobal = locale;\n        inputOpts = inputOpts || {};\n        const defaults = {\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            filter() {\n                return true;\n            },\n            aggregator: aggregatorTemplates.count()(),\n            aggregatorName: 'Count',\n            sorters: {},\n            derivedAttributes: {},\n            renderer: pivotTableRenderer,\n        };\n\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n\n        let result;\n        inputOpts.pivotData = null;\n        try {\n            const pivotData = new opts.dataClass(input, opts);\n            try {\n                result = opts.renderer(pivotData, opts.rendererOptions);\n                inputOpts.pivotData = pivotData;\n            } catch (error) {\n                e = error;\n                if (typeof console !== 'undefined' && console !== null) {\n                    console.error(e.stack);\n                }\n                result = $('<span>').html(opts.localeStrings.renderError);\n            }\n        } catch (error1) {\n            e = error1;\n            if (typeof console !== 'undefined' && console !== null) {\n                console.error(e.stack);\n            }\n            result = $('<span>').html(opts.localeStrings.computeError);\n        }\n\n        const x = this[0];\n        while (x.hasChildNodes()) {\n            x.removeChild(x.lastChild);\n        }\n        return this.append(result);\n    };\n\n    /*\n    Pivot Table UI: calls the Pivot Table core above with options set by user\n    */\n\n    $.fn.pivotUI = function (input, inputOpts, overwrite, locale) {\n        let opts;\n        let a, c;\n        if (overwrite == null) {\n            overwrite = false;\n        }\n        if (locale == null) {\n            locale = 'fr';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n\n        const defaults = {\n            derivedAttributes: {},\n            aggregators: defaultAggregators,\n            renderers: locales[locale].renderers,\n            hiddenAttributes: [],\n            hiddenFromAggregators: [],\n            hiddenFromDragDrop: [],\n            menuLimit: 500,\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            exclusions: {},\n            inclusions: {},\n            unusedAttrsVertical: 85,\n            autoSortUnusedAttrs: false,\n            onRefresh: null,\n            showUI: true,\n            filter() {\n                return true;\n            },\n            sorters: {},\n            multiple: true,\n            parametersActive: false,\n        };\n\n        let itemsId = 0;\n        let aggregators = [];\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const existingOpts = this.data('pivotUIOptions');\n        if ((existingOpts == null) || overwrite) {\n            opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n        } else {\n            opts = existingOpts;\n        }\n\n        if (!inputOpts?.aggregators && locales[locale].formatters) {\n            opts.aggregators = makeAggregators(\n                locales[locale].formatters.format,\n                locales[locale].formatters.formatInt,\n                locales[locale].formatters.formatPct);\n        }\n\n        try {\n            // do a first pass on the data to cache a materialized copy of any\n            // function-valued inputs and to compute dimension cardinalities\n            let attr, i, unusedAttrsVerticalAutoCutoff, x;\n            const attrValues = {};\n            const materializedInput = [];\n            let recordsProcessed = 0;\n            PivotData.forEachRecord(input, opts.derivedAttributes, function (record) {\n                let attr;\n                if (!opts.filter(record)) {\n                    return;\n                }\n                materializedInput.push(record);\n                for (attr of Object.keys(record || {})) {\n                    if ((attrValues[attr] == null)) {\n                        attrValues[attr] = {};\n                        if (recordsProcessed > 0) {\n                            attrValues[attr]['null'] = recordsProcessed;\n                        }\n                    }\n                }\n                for (attr in attrValues) {\n                    const value = record[attr] != null ? record[attr] : 'null';\n                    if (attrValues[attr][value] == null) {\n                        attrValues[attr][value] = 0;\n                    }\n                    attrValues[attr][value]++;\n                }\n                return recordsProcessed++;\n            });\n\n            const uiContainer = $('<div>').addClass('pvtUi');\n\n            const uiMenu = $('<div>').addClass('pvtUiMenu');\n            const uiParameters = $('<div>').addClass('pvtUiParameters');\n            const uiPivotContainer = $('<div>').addClass('pvtUiContainer');\n\n            const uiButtonColumns = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonColumns')\n                .addClass('active')\n                .text(localeStrings.colsLabel)\n                .on('click', function () {\n                    opts.parametersActive = !opts.parametersActive;\n                    if (opts.parametersActive) {\n                        uiButtonColumns.addClass('active');\n                        return uiParameters.show();\n                    } else {\n                        uiButtonColumns.removeClass('active');\n                        return uiParameters.hide();\n                    }\n                })\n                .appendTo(uiMenu);\n\n            const uiButtonGroups = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonGroups')\n                .text(localeStrings.groupsLabel)\n                .on('click', function () {\n                    if (opts.grouping) {\n                        uiButtonGroups.removeClass('active');\n                        opts.grouping = false;\n                    } else {\n                        uiButtonGroups.addClass('active');\n                        opts.grouping = {\n                            colGroupBefore: false,\n                        };\n                    }\n                    return refresh();\n                })\n                .appendTo(uiMenu);\n\n            uiContainer\n                .append(uiMenu)\n                .append(uiParameters)\n                .append(uiPivotContainer);\n\n            //# Render type\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rendererLabel);\n            let pvtRenderType = $('<div>')\n                .addClass('pvtRendererType')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n            const renderer = $('<select>')\n                .addClass('pvtRenderer')\n                .appendTo(pvtRenderType)\n                .bind('change', () => refresh()); //capture reference\n            for (x of Object.keys(opts.renderers || {})) {\n                $('<option>').val(x).html(x).appendTo(renderer);\n            }\n\n\n            //axis list, including the double click menu\n            const unused = $('<div>').addClass('pvtAxisContainer pvtUnused');\n            const shownAttributes = [];\n            for (a in attrValues) {\n                if (!opts.hiddenAttributes.includes(a)) {\n                    shownAttributes.push(a);\n                }\n            }\n            const shownInAggregators = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromAggregators.includes(c)) {\n                    shownInAggregators.push(c);\n                }\n            }\n            const shownInDragDrop = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromDragDrop.includes(c)) {\n                    shownInDragDrop.push(c);\n                }\n            }\n\n            let unusedAttrsVerticalAutoOverride = false;\n            if (opts.unusedAttrsVertical === 'auto') {\n                unusedAttrsVerticalAutoCutoff = 120; // legacy support\n            } else {\n                unusedAttrsVerticalAutoCutoff = parseInt(opts.unusedAttrsVertical);\n            }\n\n            if (!isNaN(unusedAttrsVerticalAutoCutoff)) {\n                let attrLength = 0;\n                for (a of shownInDragDrop) {\n                    attrLength += a.length;\n                }\n                unusedAttrsVerticalAutoOverride = attrLength > unusedAttrsVerticalAutoCutoff;\n            }\n\n            for (i of Object.keys(shownInDragDrop || {})) {\n                attr = shownInDragDrop[i];\n                const values = [];\n                for (const v in attrValues[attr]) {\n                    values.push(v);\n                }\n                let hasExcludedItem = false;\n                const valueList = $('<div>').addClass('pvtFilterBox').hide();\n\n                valueList.append($('<h4>').append(\n                        $('<span>').text(attr),\n                        $('<span>').addClass('count').text(`(${values.length})`),\n                    ),\n                );\n                if (values.length > opts.menuLimit) {\n                    valueList.append($('<p>').html(opts.localeStrings.tooMany));\n                } else {\n                    if (values.length > 5) {\n                        const controls = $('<p>').appendTo(valueList);\n                        const sorter = getSort(opts.sorters, attr);\n                        const placeholder = opts.localeStrings.filterResults;\n                        $('<input>', { type: 'text' }).appendTo(controls)\n                            .attr({ placeholder, class: 'pvtSearch' })\n                            .bind('keyup', function () {\n                                const filter = $(this).val().toLowerCase().trim();\n                                const accept_gen = (prefix, accepted) => (function (v) {\n                                    const real_filter = filter.substring(prefix.length).trim();\n                                    if (real_filter.length === 0) {\n                                        return true;\n                                    }\n                                    let needle = Math.sign(sorter(v.toLowerCase(), real_filter));\n                                    return accepted.includes(needle);\n                                });\n                                const accept =\n                                    filter.indexOf('>=') === 0 ? accept_gen('>=', [1, 0])\n                                        : filter.indexOf('<=') === 0 ? accept_gen('<=', [-1, 0])\n                                            : filter.indexOf('>') === 0 ? accept_gen('>', [1])\n                                                : filter.indexOf('<') === 0 ? accept_gen('<', [-1])\n                                                    : filter.indexOf('~') === 0 ? function (v) {\n                                                            if (filter.substring(1).trim().length === 0) {\n                                                                return true;\n                                                            }\n                                                            return v.toLowerCase().match(filter.substring(1));\n                                                        }\n                                                        : v => v.toLowerCase().indexOf(filter) !== -1;\n\n                                return valueList.find('.pvtCheckContainer p label span.value').each(function () {\n                                    if (accept($(this).text())) {\n                                        return $(this).parent().parent().show();\n                                    } else {\n                                        return $(this).parent().parent().hide();\n                                    }\n                                });\n                            });\n                        controls.append($('<br>'));\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectAll)\n                            .bind('click', function () {\n                                valueList.find('input:visible:not(:checked)')\n                                    .prop('checked', true).toggleClass('changed');\n                                return false;\n                            });\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectNone)\n                            .bind('click', function () {\n                                valueList.find('input:visible:checked')\n                                    .prop('checked', false).toggleClass('changed');\n                                return false;\n                            });\n                    }\n\n                    const checkContainer = $('<div>').addClass('pvtCheckContainer').appendTo(valueList);\n\n                    for (let value of values.sort(getSort(opts.sorters, attr))) {\n                        const valueCount = attrValues[attr][value];\n                        const filterItem = $('<label>');\n                        let filterItemExcluded = false;\n                        if (opts.inclusions[attr]) {\n                            filterItemExcluded = (!opts.inclusions[attr].includes(value));\n                        } else if (opts.exclusions[attr]) {\n                            filterItemExcluded = (opts.exclusions[attr].includes(value));\n                        }\n                        if (!hasExcludedItem) {\n                            hasExcludedItem = filterItemExcluded;\n                        }\n                        $('<input>')\n                            .attr('type', 'checkbox').addClass('pvtFilter')\n                            .attr('checked', !filterItemExcluded).data('filter', [attr, value])\n                            .appendTo(filterItem)\n                            .bind('change', function () {\n                                return $(this).toggleClass('changed');\n                            });\n                        filterItem.append($('<span>').addClass('value').text(value));\n                        filterItem.append($('<span>').addClass('count').text('(' + valueCount + ')'));\n                        checkContainer.append($('<p>').append(filterItem));\n                    }\n                }\n\n                const closeFilterBox = function () {\n                    if (valueList.find('[type=\\'checkbox\\']').length >\n                        valueList.find('[type=\\'checkbox\\']:checked').length) {\n                        attrElem.addClass('pvtFilteredAttribute');\n                    } else {\n                        attrElem.removeClass('pvtFilteredAttribute');\n                    }\n\n                    valueList.find('.pvtSearch').val('');\n                    valueList.find('.pvtCheckContainer p').show();\n                    return valueList.hide();\n                };\n\n\n                const finalButtons = $('<p>').appendTo(valueList);\n\n                if (values.length <= opts.menuLimit) {\n                    $('<button>', { type: 'button' }).text(opts.localeStrings.apply)\n                        .appendTo(finalButtons).bind('click', function () {\n                        if (valueList.find('.changed').removeClass('changed').length) {\n                            refresh();\n                        }\n                        return closeFilterBox();\n                    });\n                }\n\n                $('<button>', { type: 'button' }).text(opts.localeStrings.cancel)\n                    .appendTo(finalButtons).bind('click', function () {\n                    valueList.find('.changed:checked')\n                        .removeClass('changed').prop('checked', false);\n                    valueList.find('.changed:not(:checked)')\n                        .removeClass('changed').prop('checked', true);\n                    return closeFilterBox();\n                });\n\n                const triangleLink = $('<span>').addClass('pvtTriangle')\n                    .html(' &#x25BE;').bind('click', function (e) {\n                        const { left, top } = $(e.currentTarget).position();\n                        return valueList.css({ left: left + 10, top: top + 10 }).show();\n                    });\n\n                const attrElem = $('<li>').addClass(`axis_${i}`)\n                    .append($('<span>').addClass('pvtAttr').text(attr).data('attrName', attr).append(triangleLink));\n\n                if (hasExcludedItem) {\n                    attrElem.addClass('pvtFilteredAttribute');\n                }\n                unused.append(attrElem).append(valueList);\n            }\n\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.valuesLabel);\n\n            //aggregator menu and value area\n            const divAggregator = $('<div>')\n                .addClass('pvtAggregatorChoose')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            const aggregator = $('<select>')\n                .addClass('pvtAggregator')\n                .appendTo(divAggregator)\n                .bind('change', () => {\n                    if (!opts.multiple) {\n                        this.find('.pvtVals .pvtAttrDropdown').each(function () {\n                            return this.remove();\n                        });\n                        aggregators = [{ id: 1, value: aggregator.val() }];\n                        return refresh();\n                    }\n                }); //capture reference\n\n            for (x of Object.keys(opts.aggregators || {})) {\n                aggregator.append($('<option>').val(x).html(locales[locale].localeStrings[x] || locales['en'].localeStrings[x] || x));\n            }\n\n            if (opts.multiple) {\n                $('<a>', { role: 'button' })\n                    .addClass('pvtAddAggregator')\n                    .addClass('pvtToolButton')\n                    .appendTo(divAggregator)\n                    .html('+')\n                    .bind('click', function () {\n                        aggregators.push({ id: ++itemsId, value: aggregator.val() });\n                        renameAggregators(aggregators);\n                        return refresh();\n                    });\n            }\n\n            const ordering = {\n                key_a_to_z: { rowSymbol: '&varr;', colSymbol: '&harr;', next: 'value_a_to_z' },\n                value_a_to_z: { rowSymbol: '&darr;', colSymbol: '&rarr;', next: 'value_z_to_a' },\n                value_z_to_a: { rowSymbol: '&uarr;', colSymbol: '&larr;', next: 'key_a_to_z' },\n            };\n\n            const rowOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtRowOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.rowOrder).html(ordering[opts.rowOrder].rowSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].rowSymbol);\n                    return refresh();\n                });\n\n            const colOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtColOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.colOrder).html(ordering[opts.colOrder].colSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].colSymbol);\n                    return refresh();\n                });\n\n            const pvVals = $('<div>').addClass('pvtVals')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            uiParameters.append(pvVals);\n\n            // Available fields\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.fieldsLabel);\n\n            uiParameters.append(unused);\n\n            //column axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.colsLabel);\n\n            $('<div>').addClass('pvtAxisContainer pvtCols').appendTo(uiParameters);\n\n            //row axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rowsLabel);\n            $('<div>').addClass('pvtAxisContainer pvtRows').appendTo(uiParameters);\n\n            //the actual pivot table container\n            const pivotTable = $('<div>')\n                .addClass('pvtRendererArea')\n                .appendTo(uiPivotContainer);\n\n            //render the UI in its default state\n            this.html(uiContainer);\n\n            if (!opts.parametersActive) {\n                uiButtonColumns.removeClass('active');\n                uiParameters.hide();\n            }\n\n            //set up the UI initial state as requested by moving elements around\n\n            let initialRender = true;\n\n            //set up for refreshing\n            const refreshDelayed = () => {\n                let vals;\n                const subopts = {\n                    derivedAttributes: opts.derivedAttributes,\n                    localeStrings: opts.localeStrings,\n                    rendererOptions: opts.rendererOptions,\n                    sorters: opts.sorters,\n                    cols: [], rows: [],\n                    dataClass: opts.dataClass,\n                    grouping: opts.grouping,\n                };\n\n                this.find('.pvtRows li span.pvtAttr').each(function () {\n                    return subopts.rows.push($(this).data('attrName'));\n                });\n                this.find('.pvtCols li span.pvtAttr').each(function () {\n                    return subopts.cols.push($(this).data('attrName'));\n                });\n\n                let numInputsToProcess = 0;\n\n                const aggVals = [];\n                let j = 0, idx = j;\n                for (; j < aggregators.length; j++, idx = j) {\n                    let aggregatorType;\n                    const agg = aggregators[idx];\n                    if (typeof agg === 'object') {\n                        aggregatorType = agg.value;\n                    }\n                    const aggIdx = agg.id;\n                    const initialVals = agg.vals;\n\n                    const left = opts.aggregators[aggregatorType]([])().numInputs;\n                    if (left != null) {\n                        numInputsToProcess = left;\n                    } else {\n                        numInputsToProcess = 0;\n                    }\n                    vals = [];\n                    this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                        if (numInputsToProcess !== 0) {\n                            numInputsToProcess--;\n                            if ($(this).val() !== '') {\n                                return vals.push($(this).val());\n                            }\n                        }\n                    });\n\n\n                    const pvtVals = this.find('.pvtVals');\n                    let container = this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx);\n                    const found = container.length > 0;\n                    if (opts.multiple) {\n                        let labelAggregator;\n                        if (!found) {\n                            container = $('<div>')\n                                .addClass('pvtAttrDropdownContainer')\n                                .addClass('pvtAttrDropdownContainer' + aggIdx)\n                                .appendTo(pvtVals);\n                            labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                            $('<label>')\n                                .addClass('pvtAttrDropdown')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .appendTo(container)\n                                .html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                            initialRender = true;\n                        }\n\n                        if (!initialRender) {\n                            this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx + ' label.pvtAttrDropdown')\n                                .each(function () {\n                                    labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                                    return $(this).html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                                });\n                        }\n                    } else {\n                        container = pvtVals;\n                    }\n\n                    if (numInputsToProcess !== 0) {\n                        let asc, end;\n                        for (x = 0, end = numInputsToProcess, asc = 0 <= end; asc ? x < end : x > end; asc ? x++ : x--) {\n                            const newDropdown = $('<select>')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .addClass('pvtAttrDropdown')\n                                .append($('<option>'))\n                                .bind('change', () => refresh());\n                            for (attr of shownInAggregators) {\n                                newDropdown.append($('<option>').val(attr).text(attr));\n                            }\n                            container.append(newDropdown);\n                        }\n                    }\n\n\n                    if (opts.multiple && !found) {\n                        $('<a>')\n                            .html('x')\n                            .addClass('pvtRemoveAggregator')\n                            .addClass('pvtToolButton')\n                            .addClass('pvtAttrDropdown' + aggIdx)\n                            .appendTo(container)\n                            .bind('click', (function () {\n                                    this.instance.find('.pvtVals .pvtAttrDropdownContainer' + this.aggIdx).remove();\n                                    idx = aggregators.findIndex(agg => agg.id === this.aggIdx);\n                                    aggregators.splice(idx, 1);\n                                    renameAggregators(aggregators);\n                                    return refresh();\n                                }).bind({ instance: this, aggIdx }),\n                            );\n                    }\n\n                    if (initialRender) {\n                        vals = initialVals != null ? initialVals : opts.vals;\n                        i = 0;\n                        this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                            $(this).val(vals[i]);\n                            return i++;\n                        });\n                        initialRender = false;\n                    }\n\n                    aggVals.push(vals);\n                }\n\n                subopts.aggregatorName = aggregators.map(agg => agg.value);\n                subopts.vals = aggVals;\n                subopts.aggregator = aggregators.map((agg, i) => opts.aggregators[agg.value](aggVals[i], opts));\n                subopts.renderer = opts.renderers[renderer.val()];\n                subopts.rowOrder = rowOrderArrow.data('order');\n                subopts.colOrder = colOrderArrow.data('order');\n                if (opts.multiple) {\n                    subopts.aggregatorsLabel = aggregators.map(agg => agg.displayName);\n                }\n\n                //construct filter here\n                const exclusions = {};\n                this.find('input.pvtFilter').not(':checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        return exclusions[filter[0]].push(filter[1]);\n                    } else {\n                        return exclusions[filter[0]] = [filter[1]];\n                    }\n                });\n                //include inclusions when exclusions present\n                const inclusions = {};\n                this.find('input.pvtFilter:checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        if (inclusions[filter[0]] != null) {\n                            return inclusions[filter[0]].push(filter[1]);\n                        } else {\n                            return inclusions[filter[0]] = [filter[1]];\n                        }\n                    }\n                });\n\n                subopts.filter = function (record) {\n                    if (!opts.filter(record)) {\n                        return false;\n                    }\n                    for (let k in exclusions) {\n                        const excludedItems = exclusions[k];\n                        if (excludedItems.includes('' + (record[k] != null ? record[k] : 'null'))) {\n                            return false;\n                        }\n                    }\n                    return true;\n                };\n\n                pivotTable.pivot(materializedInput, subopts, locale);\n                const pivotUIOptions = $.extend({}, opts, {\n                        cols: subopts.cols,\n                        rows: subopts.rows,\n                        colOrder: subopts.colOrder,\n                        rowOrder: subopts.rowOrder,\n                        vals: aggVals,\n                        exclusions,\n                        inclusions,\n                        aggregator: subopts.aggregator,\n                        inclusionsInfo: inclusions, //duplicated for backwards-compatibility\n                        aggregatorName: subopts.aggregatorName,\n                        rendererName: renderer.val(),\n                    },\n                );\n\n                const currentPivotData = subopts.pivotData;\n                delete subopts.pivotData;\n                this.data('pivotUIOptions', pivotUIOptions);\n\n                // if requested, make sure unused columns are in alphabetical order\n                if (opts.autoSortUnusedAttrs) {\n                    const unusedAttrsContainer = this.find('td.pvtUnused.pvtAxisContainer');\n                    $(unusedAttrsContainer).children('li')\n                        .sort((a, b) => naturalSort($(a).text(), $(b).text()))\n                        .appendTo(unusedAttrsContainer);\n                }\n\n                pivotTable.css('opacity', 1);\n                if (opts.onRefresh != null) {\n                    return opts.onRefresh(pivotUIOptions, currentPivotData);\n                }\n            };\n\n            const refresh = () => {\n                pivotTable.css('opacity', 0.5);\n                return setTimeout(refreshDelayed, 10);\n            };\n\n            for (x of opts.cols) {\n                this.find('.pvtCols').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            for (x of opts.rows) {\n                this.find('.pvtRows').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            if (opts.aggregatorName != null) {\n                if (opts.multiple) {\n                    opts.aggregatorName = Array.isArray(opts.aggregatorName) ? opts.aggregatorName : [opts.aggregatorName];\n                    for (let idx = 0; idx < opts.aggregatorName.length; idx++) {\n                        const agg = opts.aggregatorName[idx];\n                        aggregators.push({\n                            id: ++itemsId,\n                            value: agg,\n                            vals: (opts.vals != null ? opts.vals[idx] : undefined),\n                        });\n                        renameAggregators(aggregators);\n                    }\n                } else {\n                    this.find('.pvtVals').append(this.find('.pvtAttrDropdown'));\n                    this.find('.pvtAggregator').val(opts.aggregatorName).change();\n                }\n            } else {\n                this.find('.pvtAggregator').change();\n            }\n            if (opts.rendererName != null) {\n                this.find('.pvtRenderer').val(opts.rendererName);\n            }\n\n            if (!opts.showUI) {\n                this.find('.pvtUiCell').hide();\n            }\n\n            //the very first refresh will actually display the table\n            refresh();\n\n            this.find('.pvtAxisContainer').sortable({\n                update(e, ui) {\n                    if ((ui.sender == null)) {\n                        return refresh();\n                    }\n                },\n                connectWith: this.find('.pvtAxisContainer'),\n                items: 'li',\n                placeholder: 'pvtPlaceholder',\n            });\n        } catch (error) {\n            console.error(error);\n            this.html(opts.localeStrings.uiRenderError);\n        }\n        return this;\n    };\n\n    /*\n    Heatmap post-processing\n    */\n\n    $.fn.heatmap = function (scope, opts) {\n        if (scope == null) {\n            scope = 'heatmap';\n        }\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        // given a series of values\n        // must return a function to map a given value to a CSS color\n        let colorScaleGenerator = opts?.heatmap?.colorScaleGenerator;\n        if (colorScaleGenerator == null) {\n            colorScaleGenerator = function (values) {\n                const min = Math.min(...(values || []));\n                const max = Math.max(...(values || []));\n                return function (x) {\n                    const nonRed = 255 - Math.round((255 * (x - min)) / (max - min));\n                    return `rgb(255,${nonRed},${nonRed})`;\n                };\n            };\n        }\n\n        const heatmapper = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            const colorScale = colorScaleGenerator(values);\n            return forEachCell((x, elem) => elem.css('background-color', colorScale(x)));\n        };\n\n        switch (scope) {\n            case 'heatmap':\n                heatmapper('.pvtVal');\n                break;\n            case 'rowheatmap':\n                for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n                    heatmapper(`.pvtVal.row${i}`);\n                }\n                break;\n            case 'colheatmap':\n                for (let j = 0, end1 = numCols, asc1 = 0 <= end1; asc1 ? j < end1 : j > end1; asc1 ? j++ : j--) {\n                    heatmapper(`.pvtVal.col${j}`);\n                }\n                break;\n        }\n\n        heatmapper('.pvtTotal.rowTotal');\n        heatmapper('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Barchart post-processing\n    */\n\n    $.fn.barchart = function (opts) {\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        const barcharter = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            let max = Math.max(...(values || []));\n            if (max < 0) {\n                max = 0;\n            }\n            let range = max;\n            const min = Math.min(...(values || []));\n            if (min < 0) {\n                range = max - min;\n            }\n            const scaler = x => (100 * x) / (1.4 * range);\n            return forEachCell(function (x, elem) {\n                const text = elem.text();\n                const wrapper = $('<div>').css({\n                    'position': 'relative',\n                    'height': '55px',\n                });\n                let bgColor = 'gray';\n                let bBase = 0;\n                if (min < 0) {\n                    bBase = scaler(-min);\n                }\n                if (x < 0) {\n                    bBase += scaler(x);\n                    bgColor = 'darkred';\n                    x = -x;\n                }\n                wrapper.append($('<div>').css({\n                        'position': 'absolute',\n                        'bottom': bBase + '%',\n                        'left': 0,\n                        'right': 0,\n                        'height': scaler(x) + '%',\n                        'background-color': bgColor,\n                    }),\n                );\n                wrapper.append($('<div>').text(text).css({\n                        'position': 'relative',\n                        'padding-left': '5px',\n                        'padding-right': '5px',\n                    }),\n                );\n\n                return elem.css({ 'padding': 0, 'padding-top': '5px', 'text-align': 'center' }).html(wrapper);\n            });\n        };\n\n        for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n            barcharter(`.pvtVal.row${i}`);\n        }\n        barcharter('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Grouping fold/expand rows and cols\n    */\n\n    const childIndex = el => Array.prototype.indexOf.call(el.parentNode.children, el);\n\n    const childKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const len = keys[n].length;\n\n        const result = [];\n        n = n + up;\n        let key = keys[n];\n        while (key && key.length > len) {\n            if (key.length === (len + 1)) {\n                result.push(n);\n            } else {\n                continue;\n            }\n            n = n + up;\n            key = keys[n];\n        }\n        return result;\n    };\n\n    const parentKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const result = [];\n        let len = keys[n].length;\n        while (len > 1) {\n            let key;\n            n = n - up;\n            key = keys[n];\n            while (key && key.length >= len) {\n                n = n - up;\n                key = keys[n];\n            }\n            result.push(n);\n\n            len = keys[n].length;\n        }\n        return result;\n    };\n\n    const levelKeysIndices = (keys, level) => (keys.filter(d => d.length === level)).map(keys.indexOf.bind(keys));\n\n    const getAxis = function (table, rows, level) {\n        if (rows) {\n            return table.find(`thead tr:last-child th.pvtAxisLabel:nth-of-type(${level})`);\n        } else {\n            return table.find(`thead tr:nth-child(${level}) th.pvtAxisLabel`);\n        }\n    };\n\n    const getHeader = (table, rows, n) => table.find(rows ? `tbody tr th.row${n}` : `thead th.col${n}`);\n\n    const rowGetter = function (table) {\n        const selecttion = table.find('tbody tr');\n        return n => $(selecttion[n]);\n    };\n\n    const colGetter = function (table) {\n        const selecttion = table.find('tr');\n        return n => selecttion.find(`.col${n}`);\n    };\n\n    const showHide = function (getter, keys, nth, offset, show) {\n        const object = childKeysIndices(keys, nth);\n        for (let i in object) {\n            const n = object[i];\n            const row = getter(n + offset);\n            const fn = show ? $.fn.show : $.fn.hide;\n            fn.call(row);\n            if (!row.hasClass('collapsed')) {\n                showHide(getter, keys, n, offset, show);\n            }\n        }\n        return true;\n    };\n\n    const expandRowsGroupAfter = function (cell, rows, keys, nth) {\n        const table = $(cell).closest('table');\n        const initIndex = childIndex(cell.parentNode);\n        const getter = rowGetter(table);\n        const row = getter(nth);\n\n        const insertPoint = row.hasClass('collapsed') ? getter(cell._old) : row;\n        if (!row.hasClass('collapsed')) {\n            cell._old = childIndex(cell.parentNode);\n        }\n        insertPoint.prepend(cell);\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            const parent = (getHeader(table, rows, p))[0];\n            const parentIndex = childIndex(parent.parentNode);\n            parent._old = parent._old != null ? parent._old : parentIndex;\n            if ((parent._old === initIndex) && (parent.rowSpan === 1)) {\n                parent._old -= initIndex - childIndex(cell.parentNode);\n            }\n\n            if (initIndex === parentIndex) {\n                insertPoint.prepend(parent);\n            }\n        }\n\n        return expandWithSpan(cell, rows, keys, nth);\n    };\n\n    const expandRowCol = function (cell, rows, keys, nth, parent) {\n        const table = $(cell).closest('table');\n        const getter = rows ? rowGetter(table) : colGetter(table);\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const offset = rows && (this.aggregator.length > 1) ? 1 : 0;\n        if ((parent != null ? parent[span] : undefined) !== 1) {\n            showHide(getter, keys, nth, offset, getter(nth + offset).hasClass('collapsed'));\n        }\n        getter(nth + offset).toggleClass('collapsed');\n        return $(cell).toggleClass('open close');\n    };\n\n    const expandAll = function (pivotData, table, level, rows, expand) {\n        let i;\n        if (expand && (level > 1)) {\n            getAxis(table, rows, level - 1).removeClass('close').addClass('open');\n            expandAll(pivotData, table, level - 1, rows, expand);\n        }\n\n        const levels = (rows ? pivotData.rowAttrs : pivotData.colAttrs).length - 1;\n        if (!expand && (level < levels)) {\n            let asc, end, start;\n            for (start = level + 1, i = start, end = levels, asc = start <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\n                getAxis(table, rows, i).removeClass('open').addClass('close');\n            }\n        }\n\n        const keys = rows ? pivotData.rowKeys : pivotData.colKeys;\n        const object = levelKeysIndices(keys, level);\n        for (i in object) {\n            const n = object[i];\n            const el = getHeader(table, rows, n);\n            if (expand === el.hasClass('close')) {\n                el.trigger('click');\n            }\n        }\n        return null;\n    };\n\n    const getExpandHandler = (keys, rows, handler) => (function (ev) {\n        const match = ev.target.className.match(rows ? /row(\\d+)/ : /col(\\d+)/);\n        if (match) {\n            return handler(ev.target, rows, keys, +match[1]);\n        }\n    });\n\n    return getExpandAllHandler = (pivotData, level, rows) => (function (ev) {\n        expandAll(pivotData, $(ev.target).closest('table'), level + 1, rows, $(ev.target).hasClass('close'));\n        return $(ev.target).toggleClass('open close');\n    });\n})(jQuery);\n\n"],"mappings":"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","ignoreList":[]}