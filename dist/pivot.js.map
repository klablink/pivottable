{"version":3,"file":"pivot.js","names":["$","expandWithSpan","cell","rows","keys","nth","parent","table","closest","span","dft","Math","max","aggregator","length","_span","change","object","parentKeysIndices","i","p","getHeader","expandRowCol","getExpandAllHandler","localeGlobal","addSeparators","nStr","thousandsSep","decimalSep","x","split","x1","x2","rgx","test","replace","toDate","value","date","options","year","month","day","Date","toLocaleDateString","e","numberFormat","opts","defaults","digitsAfterDecimal","scaler","prefix","suffix","extend","fieldType","undefined","pivotUtilities","fieldsType","integer","isFunction","isNaN","isFinite","result","toFixed","cellRenderers","text","fieldName","col","row","document","createTextNode","byType","def","type","apply","arguments","usFmt","usFmtInt","usFmtPct","aggregatorTemplates","count","formatter","data","rowKey","colKey","push","format","uniques","fn","args","attr","uniq","record","includes","numInputs","sum","parseFloat","extremes","mode","val","sorter","getSort","sorters","y","rendererOptions","toISOString","quantile","q","vals","sort","a","b","floor","ceil","runningStat","ddof","n","m","s","m_new","sqrt","sumOverSum","num","denom","sumNum","sumDenom","sumOverSumBound80","upper","sign","fractionOf","wrapped","selector","total","inner","id","agg","getAggregator","countUnique","f","listUnique","naturalSort","join","min","first","last","median","average","var","stdev","makeAggregators","fmt","fmtInt","fmtPct","defaultAggregators","renderers","Table","pivotTableRenderer","Table Barchart","barchart","Heatmap","heatmap","Row Heatmap","Col Heatmap","locales","en","formatters","formatInt","formatPct","localeStrings","renderError","computeError","uiRenderError","selectAll","selectNone","tooMany","filterResults","cancel","totals","vs","by","rendererLabel","valuesLabel","fieldsLabel","colsLabel","rowsLabel","groupsLabel","Object","mthNamesEn","dayNamesEn","zeroPad","number","padding","substr","derivers","bin","binWidth","dateFormat","formatString","utcOutput","mthNames","dayNames","utc","parse","rx","rd","rz","as","bs","nulls_first","nf","nas","nbs","String","match","a1","shift","b1","sortAs","order","mapping","l_mapping","toLowerCase","filterByLength","filter","subarrays","array","map","d","slice","normalizeData","entries","forEach","key","PivotData","constructor","input","arrSort","bind","sortKeys","getColKeys","getRowKeys","Array","isArray","aggregatorName","colAttrs","cols","rowAttrs","valAttrs","rowOrder","colOrder","derivedAttributes","tree","rowKeys","colKeys","rowTotals","colTotals","allTotal","sorted","aggregatorsLabel","grouping","rowGroupBefore","colGroupBefore","forEachRecord","processRecord","addRecord","isEmptyObject","k","v","compactRecord","j","tblCols","each","Error","forEachMatchingRecord","criteria","callback","attrs","sortersArr","comparison","r","c","all_keys","flatRowKey","fromCharCode","result1","flatColKey","renameAggregators","aggregators","displayName","toUpperCase","string","time","datetime","boolean","pivotData","getClickHandler","td","th","totalAggregator","tr","clickCallback","typeCellRenderer","headCellRenderer","dataCellRenderer","rowValues","colValues","filters","compactLayout","rowExpandHandler","expandRowsGroupAfter","rowsExpandHandler","getExpandHandler","colsExpandHandler","createElement","className","spanSize","arr","asc","end","noDraw","len","asc1","end1","stop","thead","parseInt","setAttribute","appendChild","call","onclick","innerHTML","tbody","lbl","colspan","textContent","rowGap","txt","colSpan","style","paddingLeft","append","pivot","inputOpts","locale","dataClass","renderer","localeDefaults","error","console","stack","html","error1","hasChildNodes","removeChild","lastChild","pivotUI","overwrite","hiddenAttributes","hiddenFromAggregators","hiddenFromDragDrop","menuLimit","exclusions","inclusions","unusedAttrsVertical","autoSortUnusedAttrs","onRefresh","showUI","multiple","parametersActive","itemsId","existingOpts","unusedAttrsVerticalAutoCutoff","attrValues","materializedInput","recordsProcessed","uiContainer","addClass","uiMenu","uiParameters","uiPivotContainer","uiButtonColumns","on","show","removeClass","hide","appendTo","uiButtonGroups","refresh","pvtRenderType","unused","shownAttributes","shownInAggregators","shownInDragDrop","unusedAttrsVerticalAutoOverride","attrLength","values","hasExcludedItem","valueList","controls","placeholder","class","trim","accept_gen","accepted","real_filter","substring","accept","indexOf","find","prop","toggleClass","checkContainer","valueCount","filterItem","filterItemExcluded","closeFilterBox","attrElem","finalButtons","triangleLink","left","top","currentTarget","position","css","divAggregator","remove","role","ordering","key_a_to_z","rowSymbol","colSymbol","next","value_a_to_z","value_z_to_a","rowOrderArrow","colOrderArrow","pvVals","pivotTable","initialRender","refreshDelayed","subopts","numInputsToProcess","aggVals","idx","aggregatorType","aggIdx","initialVals","pvtVals","container","found","labelAggregator","newDropdown","instance","findIndex","splice","not","excludedItems","pivotUIOptions","inclusionsInfo","rendererName","currentPivotData","unusedAttrsContainer","children","setTimeout","inArray","sortable","update","ui","sender","connectWith","items","scope","numRows","numCols","colorScaleGenerator","nonRed","round","heatmapper","forEachCell","colorScale","elem","barcharter","range","wrapper","bgColor","bBase","childIndex","el","prototype","parentNode","childKeysIndices","up","levelKeysIndices","level","getAxis","rowGetter","selecttion","colGetter","showHide","getter","offset","hasClass","initIndex","insertPoint","_old","prepend","parentIndex","rowSpan","expandAll","expand","levels","start","trigger","handler","ev","target","jQuery"],"sources":["pivot.js"],"sourcesContent":["\n(function ($) {\n\n    const expandWithSpan = function (cell, rows, keys, nth) {\n        let parent;\n        const table = $(cell).closest('table');\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const dft = !rows ? Math.max(1, this.aggregator.length) : 1;\n        [cell._span, cell[span]] = [cell[span], cell._span != null ? cell._span : dft];\n        const change = cell[span] - cell._span;\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            parent = (getHeader(table, rows, p))[0];\n            if (parent[span] === 1) {\n                parent._span += change;\n                break;\n            }\n            parent[span] += change;\n        }\n\n        return expandRowCol(cell, rows, keys, nth, parent);\n    };\n    /*\n        Utilities\n        */\n\n    let getExpandAllHandler;\n    let localeGlobal = 'en';\n\n    const addSeparators = function (nStr, thousandsSep, decimalSep) {\n        nStr += '';\n        const x = nStr.split('.');\n        let x1 = x[0];\n        const x2 = x.length > 1 ? decimalSep + x[1] : '';\n        const rgx = /(\\d+)(\\d{3})/;\n        while (rgx.test(x1)) {\n            x1 = x1.replace(rgx, '$1' + thousandsSep + '$2');\n        }\n        return x1 + x2;\n    };\n\n\n    function toDate(value) {\n        let date = '';\n\n        if (value) {\n            try {\n                const options = { year: 'numeric', month: '2-digit', day: '2-digit' };\n                date = (new Date(value)).toLocaleDateString(localeGlobal, options);\n            } catch (e) {\n                date = value;\n            }\n        }\n\n        return date;\n    }\n\n    const numberFormat = function (opts) {\n        const defaults = {\n            digitsAfterDecimal: 2, scaler: 1,\n            thousandsSep: ',', decimalSep: '.',\n            prefix: '', suffix: '',\n        };\n        opts = $.extend({}, defaults, opts);\n        return function (x, fieldType) {\n            if (x === undefined) {\n                return '';\n            }\n\n            if (fieldType === $.pivotUtilities.fieldsType.integer) {\n                return x;\n            } else if (fieldType === $.pivotUtilities.fieldsType.date) {\n                return toDate(x);\n            } else if ($.isFunction(fieldType)) {\n                return fieldType(x);\n            }\n\n            if (isNaN(x) || !isFinite(x)) {\n                return '';\n            }\n\n            const result = addSeparators((opts.scaler * x).toFixed(opts.digitsAfterDecimal), opts.thousandsSep, opts.decimalSep);\n            return '' + opts.prefix + result + opts.suffix;\n        };\n    };\n\n    const cellRenderers = {\n        text: function (value, fieldName, col, row) {\n            const { fieldsType } = this;\n\n            if (value === undefined) {\n                value = '';\n            }\n            // Header type date\n            if (fieldName && fieldsType[fieldName] === $.pivotUtilities.fieldsType.date) {\n                return document.createTextNode(toDate(value));\n            }\n\n            return document.createTextNode(value);\n        },\n        byType: function (opts, def) {\n            return function (value, type) {\n                return (opts[type] || def || cellRenderers.text).apply(this, arguments);\n            };\n        },\n    };\n\n    //aggregator templates default to US number formatting, but this is overrideable\n    const usFmt = numberFormat();\n    const usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\n    const usFmtPct = numberFormat({ digitsAfterDecimal: 1, scaler: 100, suffix: '%' });\n\n    const aggregatorTemplates = {\n        count(formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return () => (function (data, rowKey, colKey) {\n                return {\n                    count: 0,\n                    push() {\n                        return this.count++;\n                    },\n                    value() {\n                        return this.count;\n                    },\n                    format: formatter,\n                };\n            });\n        },\n\n        uniques(fn, formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        uniq: [],\n                        push(record) {\n                            if (!this.uniq.includes(record[attr])) {\n                                return this.uniq.push(record[attr]);\n                            }\n                        },\n                        value() {\n                            return fn(this.uniq);\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        sum: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[attr]))) {\n                                return this.sum += parseFloat(record[attr]);\n                            }\n                        },\n                        value() {\n                            return this.sum;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        extremes(mode, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                const opts = args[1] || {};\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        val: null,\n                        sorter: getSort(data != null ? data.sorters : undefined, attr),\n                        push(record) {\n                            let x = record[attr];\n                            let y = this.val;\n\n                            if (opts.rendererOptions?.fieldsType[attr] === $.pivotUtilities.fieldsType.date) {\n                                x = new Date(x);\n                                y = !y ? x : new Date(y);\n                            } else if (['min', 'max'].includes(mode)) {\n                                x = parseFloat(x);\n                            }\n\n                            if (['min', 'max'].includes(mode)) {\n                                if (!isNaN(x)) {\n                                    this.val = Math[mode](x, y != null ? y : x);\n                                }\n                            }\n                            if (mode === 'first') {\n                                if (this.sorter(x, y != null ? y : x) <= 0) {\n                                    this.val = x;\n                                }\n                            }\n                            if (mode === 'last') {\n                                if (this.sorter(x, y != null ? y : x) >= 0) {\n                                    this.val = x;\n                                }\n                            }\n\n                            if (opts.rendererOptions?.fieldsType[attr] === $.pivotUtilities.fieldsType.date) {\n                                this.val = new Date(this.val).toISOString();\n                            }\n\n                        },\n                        value() {\n                            return this.val;\n                        },\n                        format(x, fieldType) {\n                            if (isNaN(x)) {\n                                return x;\n                            } else {\n                                return formatter(x, fieldType);\n                            }\n                        },\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        quantile(q, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        vals: [],\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (!isNaN(x)) {\n                                return this.vals.push(x);\n                            }\n                        },\n                        value() {\n                            if (this.vals.length === 0) {\n                                return null;\n                            }\n                            this.vals.sort((a, b) => a - b);\n                            const i = (this.vals.length - 1) * q;\n                            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        runningStat(mode, ddof, formatter) {\n            if (mode == null) {\n                mode = 'mean';\n            }\n            if (ddof == null) {\n                ddof = 1;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        attr,\n                        n: 0.0, m: 0.0, s: 0.0,\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (isNaN(x)) {\n                                return;\n                            }\n                            this.n += 1.0;\n                            if (this.n === 1.0) {\n                                return this.m = x;\n                            } else {\n                                const m_new = this.m + ((x - this.m) / this.n);\n                                this.s = this.s + ((x - this.m) * (x - m_new));\n                                return this.m = m_new;\n                            }\n                        },\n                        value() {\n                            if (mode === 'mean') {\n                                if (this.n === 0) {\n                                    return 0 / 0;\n                                } else {\n                                    return this.m;\n                                }\n                            }\n                            if (this.n <= ddof) {\n                                return 0;\n                            }\n                            switch (mode) {\n                                case 'var':\n                                    return this.s / (this.n - ddof);\n                                case 'stdev':\n                                    return Math.sqrt(this.s / (this.n - ddof));\n                            }\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sumOverSum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            return this.sumNum / this.sumDenom;\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        sumOverSumBound80(upper, formatter) {\n            if (upper == null) {\n                upper = true;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            const sign = upper ? 1 : -1;\n                            return ((0.821187207574908 / this.sumDenom) + (this.sumNum / this.sumDenom) + (1.2815515655446004 * sign *\n                                    Math.sqrt((0.410593603787454 / (this.sumDenom * this.sumDenom)) + ((this.sumNum * (1 - (this.sumNum / this.sumDenom))) / (this.sumDenom * this.sumDenom))))) /\n                                (1 + (1.642374415149816 / this.sumDenom));\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        fractionOf(wrapped, type, formatter) {\n            if (type == null) {\n                type = 'total';\n            }\n            if (formatter == null) {\n                formatter = usFmtPct;\n            }\n            return (...x) => (function (data, rowKey, colKey) {\n                return {\n                    selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[type],\n                    inner: wrapped(...(x || []))(data, rowKey, colKey),\n                    push(record) {\n                        return this.inner.push(record);\n                    },\n                    format: formatter,\n                    value(id) {\n                        const agg = data.getAggregator(...([...this.selector, id] || []));\n                        return this.inner.value() / agg.inner.value();\n                    },\n                    numInputs: wrapped(...(x || []))().numInputs,\n                };\n            });\n        },\n    };\n\n    aggregatorTemplates.countUnique = f => aggregatorTemplates.uniques((x => x.length), f);\n    aggregatorTemplates.listUnique = s => aggregatorTemplates.uniques((x => x.sort(naturalSort).join(s)), (x => x));\n    aggregatorTemplates.max = f => aggregatorTemplates.extremes('max', f);\n    aggregatorTemplates.min = f => aggregatorTemplates.extremes('min', f);\n    aggregatorTemplates.first = f => aggregatorTemplates.extremes('first', f);\n    aggregatorTemplates.last = f => aggregatorTemplates.extremes('last', f);\n    aggregatorTemplates.median = f => aggregatorTemplates.quantile(0.5, f);\n    aggregatorTemplates.average = f => aggregatorTemplates.runningStat('mean', 1, f);\n    aggregatorTemplates.var = (ddof, f) => aggregatorTemplates.runningStat('var', ddof, f);\n    aggregatorTemplates.stdev = (ddof, f) => aggregatorTemplates.runningStat('stdev', ddof, f);\n\n    function makeAggregators(fmt, fmtInt, fmtPct) {\n        return {\n            'Count': aggregatorTemplates.count(fmtInt),\n            'Count Unique Values': aggregatorTemplates.countUnique(fmtInt),\n            'List Unique Values': aggregatorTemplates.listUnique(', '),\n            'Sum': aggregatorTemplates.sum(fmt),\n            'Integer Sum': aggregatorTemplates.sum(fmtInt),\n            'Average': aggregatorTemplates.average(fmt),\n            'Median': aggregatorTemplates.median(fmt),\n            'Sample Variance': aggregatorTemplates.var(1, fmt),\n            'Sample Standard Deviation': aggregatorTemplates.stdev(1, fmt),\n            'Minimum': aggregatorTemplates.min(fmt),\n            'Maximum': aggregatorTemplates.max(fmt),\n            'First': aggregatorTemplates.first(fmt),\n            'Last': aggregatorTemplates.last(fmt),\n            'Sum over Sum': aggregatorTemplates.sumOverSum(fmt),\n            '80% Upper Bound': aggregatorTemplates.sumOverSumBound80(true, fmt),\n            '80% Lower Bound': aggregatorTemplates.sumOverSumBound80(false, fmt),\n            'Sum as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'total', fmtPct),\n            'Sum as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'row', fmtPct),\n            'Sum as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'col', fmtPct),\n            'Count as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'total', fmtPct),\n            'Count as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'row', fmtPct),\n            'Count as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'col', fmtPct),\n        };\n    }\n\n    //default aggregators & renderers use US naming and number formatting\n    const defaultAggregators = makeAggregators(usFmt, usFmtInt, usFmtPct);\n\n    const renderers = {\n        'Table'(data, opts) {\n            return pivotTableRenderer(data, opts);\n        },\n        'Table Barchart'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).barchart();\n        },\n        'Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('heatmap', opts);\n        },\n        'Row Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('rowheatmap', opts);\n        },\n        'Col Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('colheatmap', opts);\n        },\n    };\n\n    const locales = {\n        en: {\n            formatters: {\n                format: usFmt,\n                formatInt: usFmtInt,\n                formatPct: usFmtPct,\n            },\n            renderers,\n            localeStrings: {\n                renderError: 'An error occurred rendering the PivotTable results.',\n                computeError: 'An error occurred computing the PivotTable results.',\n                uiRenderError: 'An error occurred rendering the PivotTable UI.',\n                selectAll: 'Select All',\n                selectNone: 'Select None',\n                tooMany: '(too many to list)',\n                filterResults: 'Filter values',\n                apply: 'Apply',\n                cancel: 'Cancel',\n                totals: 'Totals', //for table renderer\n                vs: 'vs', //for gchart renderer\n                by: 'by', //for gchart renderer\n                rendererLabel: 'Renderer',\n                valuesLabel: 'Values',\n                fieldsLabel: 'Fields',\n                colsLabel: 'Columns',\n                rowsLabel: 'Rows',\n                groupsLabel: 'Groups',\n            },\n        },\n    };\n\n    for (const agg of Object.keys(defaultAggregators)) {\n        locales.en.localeStrings[agg] = agg;\n    }\n\n    //dateFormat deriver l10n requires month and day names to be passed in directly\n    const mthNamesEn = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    const zeroPad = (number, padding = 2) => ('0' + number).substr(-padding, padding);\n\n    const derivers = {\n        bin(col, binWidth) {\n            return record => record[col] - (record[col] % binWidth);\n        },\n        dateFormat(col, formatString, utcOutput, mthNames, dayNames) {\n            if (utcOutput == null) {\n                utcOutput = false;\n            }\n            if (mthNames == null) {\n                mthNames = mthNamesEn;\n            }\n            if (dayNames == null) {\n                dayNames = dayNamesEn;\n            }\n            const utc = utcOutput ? 'UTC' : '';\n            return function (record) { //thanks http://stackoverflow.com/a/12213072/112871\n                const date = new Date(Date.parse(record[col]));\n                if (isNaN(date)) {\n                    return '';\n                }\n                return formatString.replace(/%(.)/g, function (m, p) {\n                    switch (p) {\n                        case 'y':\n                            return date[`get${utc}FullYear`]();\n                        case 'm':\n                            return zeroPad(date[`get${utc}Month`]() + 1);\n                        case 'n':\n                            return mthNames[date[`get${utc}Month`]()];\n                        case 'd':\n                            return zeroPad(date[`get${utc}Date`]());\n                        case 'w':\n                            return dayNames[date[`get${utc}Day`]()];\n                        case 'x':\n                            return date[`get${utc}Day`]();\n                        case 'H':\n                            return zeroPad(date[`get${utc}Hours`]());\n                        case 'M':\n                            return zeroPad(date[`get${utc}Minutes`]());\n                        case 'S':\n                            return zeroPad(date[`get${utc}Seconds`]());\n                        default:\n                            return '%' + p;\n                    }\n                });\n            };\n        },\n    };\n\n    const rx = /(\\d+)|(\\D+)/g;\n    const rd = /\\d/;\n    const rz = /^0/;\n    const naturalSort = (as, bs, nulls_first) => {\n        //nulls first\n        if (nulls_first == null) {\n            nulls_first = true;\n        }\n        const nf = nulls_first ? 1 : -1;\n        if ((bs != null) && (as == null)) {\n            return -1 * nf;\n        }\n        if ((as != null) && (bs == null)) {\n            return 1 * nf;\n        }\n\n        //then raw NaNs\n        if ((typeof as === 'number') && isNaN(as)) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && isNaN(bs)) {\n            return 1;\n        }\n\n        //numbers and numbery strings group together\n        const nas = +as;\n        const nbs = +bs;\n        if (nas < nbs) {\n            return -1;\n        }\n        if (nas > nbs) {\n            return 1;\n        }\n\n        //within that, true numbers before numbery strings\n        if ((typeof as === 'number') && (typeof bs !== 'number')) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && (typeof as !== 'number')) {\n            return 1;\n        }\n        if ((typeof as === 'number') && (typeof bs === 'number')) {\n            return 0;\n        }\n\n        // 'Infinity' is a textual number, so less than 'A'\n        if (isNaN(nbs) && !isNaN(nas)) {\n            return -1;\n        }\n        if (isNaN(nas) && !isNaN(nbs)) {\n            return 1;\n        }\n\n        //finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n        let a = String(as);\n        let b = String(bs);\n        if (a === b) {\n            return 0;\n        }\n        if (!rd.test(a) || !rd.test(b)) {\n            return (a > b ? 1 : -1);\n        }\n\n        //special treatment for strings containing digits\n        a = a.match(rx); //create digits vs. non-digit chunks and iterate through\n        b = b.match(rx);\n        while (a.length && b.length) {\n            const a1 = a.shift();\n            const b1 = b.shift();\n            if (a1 !== b1) {\n                if (rd.test(a1) && rd.test(b1)) { //both are digit chunks\n                    return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n                } else {\n                    return (a1 > b1 ? 1 : -1);\n                }\n            }\n        }\n        return a.length - b.length;\n    };\n\n    const sortAs = function (order) {\n        const mapping = {};\n        const l_mapping = {}; // sort lowercased keys similarly\n        for (let i in order) {\n            const x = order[i];\n            mapping[x] = i;\n            if (typeof x === 'string') {\n                l_mapping[x.toLowerCase()] = i;\n            }\n        }\n        return function (a, b) {\n            if ((mapping[a] != null) && (mapping[b] != null)) {\n                return mapping[a] - mapping[b];\n            } else if (mapping[a] != null) {\n                return -1;\n            } else if (mapping[b] != null) {\n                return 1;\n            } else if ((l_mapping[a] != null) && (l_mapping[b] != null)) {\n                return l_mapping[a] - l_mapping[b];\n            } else if (l_mapping[a] != null) {\n                return -1;\n            } else if (l_mapping[b] != null) {\n                return 1;\n            } else {\n                return naturalSort(a, b);\n            }\n        };\n    };\n\n    function getSort(sorters, attr) {\n        if (sorters != null) {\n            if ($.isFunction(sorters)) {\n                const sort = sorters(attr);\n                if ($.isFunction(sort)) {\n                    return sort;\n                }\n            } else if (sorters[attr] != null) {\n                return sorters[attr];\n            }\n        }\n        return naturalSort;\n    }\n\n    const filterByLength = (keys, length) => keys.filter(x => x.length === length);\n\n    const subarrays = array => array.map((d, i) => array.slice(0, i + 1));  // [1,2,3] => [[1], [1,2], [1,2,3]]\n\n    function normalizeData(data) {\n        Object.entries(data).forEach(([key, value]) => {\n            if (value instanceof Date) {\n                data[key] = value.toISOString();\n            }\n        });\n\n        return data;\n    }\n\n    /*\n    Data Model class\n    */\n\n    class PivotData {\n        constructor(input, opts) {\n            this.arrSort = this.arrSort.bind(this);\n            this.sortKeys = this.sortKeys.bind(this);\n            this.getColKeys = this.getColKeys.bind(this);\n            this.getRowKeys = this.getRowKeys.bind(this);\n            this.getAggregator = this.getAggregator.bind(this);\n            if (opts == null) {\n                opts = {};\n            }\n            this.input = input;\n            if (!Array.isArray(opts.aggregator)) {\n                opts.aggregator = opts.aggregator != null ? opts.aggregator : aggregatorTemplates.count()();\n                opts.aggregator = [opts.aggregator];\n            }\n            this.aggregator = opts.aggregator != null ? opts.aggregator : [aggregatorTemplates.count()()];\n            this.aggregatorName = opts.aggregatorName != null ? opts.aggregatorName : 'Count';\n            this.colAttrs = opts.cols != null ? opts.cols : [];\n            this.rowAttrs = opts.rows != null ? opts.rows : [];\n            this.valAttrs = opts.vals != null ? opts.vals : [];\n            this.sorters = opts.sorters != null ? opts.sorters : {};\n            this.rowOrder = opts.rowOrder != null ? opts.rowOrder : 'key_a_to_z';\n            this.colOrder = opts.colOrder != null ? opts.colOrder : 'key_a_to_z';\n            this.derivedAttributes = opts.derivedAttributes != null ? opts.derivedAttributes : {};\n            this.filter = opts.filter != null ? opts.filter : (() => true);\n            this.tree = {};\n            this.rowKeys = [];\n            this.colKeys = [];\n            this.rowTotals = {};\n            this.colTotals = {};\n            this.allTotal = this.aggregator.map(agg => agg(this, [], []));\n            this.sorted = false;\n            this.aggregatorsLabel = opts.aggregatorsLabel != null ? opts.aggregatorsLabel : [];\n            this.grouping = opts.grouping != null ? opts.grouping : false;\n            this.rowGroupBefore = (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) : true;\n            this.colGroupBefore = (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) : false;\n\n            // iterate through input, accumulating data for cells\n            PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (this.filter(record)) {\n                    return this.processRecord(normalizeData(record));\n                }\n            });\n        }\n\n        //can handle arrays or jQuery selections of tables\n        static forEachRecord(input, derivedAttributes, f) {\n            let addRecord;\n            if ($.isEmptyObject(derivedAttributes)) {\n                addRecord = f;\n            } else {\n                addRecord = function (record) {\n                    for (let k in derivedAttributes) {\n                        const v = derivedAttributes[k];\n                        record[k] = v(record) || record[k];\n                    }\n                    return f(record);\n                };\n            }\n\n            //if it's a function, have its calls us back\n            if ($.isFunction(input)) {\n                return input(addRecord);\n            } else if ($.isArray(input)) {\n                if ($.isArray(input[0])) { //array of arrays\n                    const result = [];\n                    for (let i of Object.keys(input || {})) {\n                        const compactRecord = input[i];\n                        if (i > 0) {\n                            const record = {};\n                            for (let j of Object.keys(input[0] || {})) {\n                                const k = input[0][j];\n                                record[k] = compactRecord[j];\n                            }\n                            result.push(addRecord(record));\n                        }\n                    }\n                    return result;\n                } else { //array of objects\n                    const result = [];\n                    for (let record of input) {\n                        result.push(addRecord(record));\n                    }\n                    return result;\n                }\n            } else if (input instanceof $) {\n                const tblCols = [];\n                $('thead > tr > th', input).each(function (i) {\n                    return tblCols.push($(this).text());\n                });\n                return $('tbody > tr', input).each(function (i) {\n                    const record = {};\n                    $('td', this).each(function (j) {\n                        return record[tblCols[j]] = $(this).text();\n                    });\n                    return addRecord(record);\n                });\n            } else {\n                throw new Error('unknown input format');\n            }\n        }\n\n        forEachMatchingRecord(criteria, callback) {\n            return PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (!this.filter(record)) {\n                    return;\n                }\n                for (let k in criteria) {\n                    const v = criteria[k];\n                    if (v !== (record[k] != null ? record[k] : 'null')) {\n                        return;\n                    }\n                }\n                return callback(record);\n            });\n        }\n\n        arrSort(attrs, nulls_first) {\n\n            const sortersArr = [];\n            for (const a of attrs) {\n                sortersArr.push(getSort(this.sorters, a));\n            }\n\n            return function (a, b) {\n                for (let i of Object.keys(sortersArr || {})) {\n                    const sorter = sortersArr[i];\n                    const comparison = sorter(a[i], b[i], nulls_first);\n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            };\n        }\n\n        sortKeys() {\n            if (!this.sorted) {\n                this.sorted = true;\n                const v = (r, c) => this.getAggregator(r, c).value();\n                switch (this.rowOrder) {\n                    case 'value_a_to_z':\n                        this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n                        break;\n                    case 'value_z_to_a':\n                        this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n                        break;\n                    default:\n                        this.rowKeys.sort(this.arrSort(this.rowAttrs, this.rowGroupBefore));\n                }\n                switch (this.colOrder) {\n                    case 'value_a_to_z':\n                        return this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n                    case 'value_z_to_a':\n                        return this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n                    default:\n                        return this.colKeys.sort(this.arrSort(this.colAttrs, this.colGroupBefore));\n                }\n            }\n        }\n\n        getColKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.colKeys;\n            } else {\n                return filterByLength(this.colKeys, this.colAttrs.length);\n            }\n        }\n\n        getRowKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.rowKeys;\n            } else {\n                return filterByLength(this.rowKeys, this.rowAttrs.length);\n            }\n        }\n\n        processRecord(record) { //this code is called in a tight loop\n            let x;\n            let colKeys = [];\n            let rowKeys = [];\n            for (x of this.colAttrs) {\n                colKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            for (x of this.rowAttrs) {\n                rowKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            colKeys = this.grouping && colKeys.length ? subarrays(colKeys) : [colKeys];\n            rowKeys = this.grouping && rowKeys.length ? subarrays(rowKeys) : [rowKeys];\n\n            this.aggregator.forEach((agg, id) => {\n                return this.allTotal[id].push(record);\n            });\n\n            const result = [];\n            for (let j in rowKeys) {\n                const rowKey = rowKeys[j];\n                const flatRowKey = rowKey.join(String.fromCharCode(0));\n\n                const result1 = [];\n                for (let i in colKeys) {\n                    const colKey = colKeys[i];\n                    const flatColKey = colKey.join(String.fromCharCode(0));\n\n                    if (rowKey.length !== 0) {\n                        if (!this.rowTotals[flatRowKey]) {\n                            this.rowKeys.push(rowKey);\n                            this.rowTotals[flatRowKey] = this.aggregator.map(agg => agg(this, rowKey, []));\n                        }\n                        this.rowTotals[flatRowKey].forEach((agg, id) => {\n                            if (!this.grouping || (colKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if (colKey.length !== 0) {\n                        if (!this.colTotals[flatColKey]) {\n                            this.colKeys.push(colKey);\n                            this.colTotals[flatColKey] = this.aggregator.map(agg => agg(this, [], colKey));\n                        }\n                        this.colTotals[flatColKey].forEach((agg, id) => {\n                            if (!this.grouping || (rowKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if ((colKey.length !== 0) && (rowKey.length !== 0)) {\n                        if (!this.tree[flatRowKey]) {\n                            this.tree[flatRowKey] = {};\n                        }\n                        if (!this.tree[flatRowKey][flatColKey]) {\n                            this.tree[flatRowKey][flatColKey] = this.aggregator.map(agg => agg(this, rowKey, colKey));\n                        }\n                        result1.push(this.tree[flatRowKey][flatColKey].forEach((agg, id) => agg.push(record)));\n                    } else {\n                        result1.push(undefined);\n                    }\n                }\n                result.push(result1);\n            }\n            return result;\n        }\n\n        getAggregator(rowKey, colKey, id) {\n            let agg;\n            if (id == null) {\n                id = 0;\n            }\n            const flatRowKey = rowKey.join(String.fromCharCode(0));\n            const flatColKey = colKey.join(String.fromCharCode(0));\n            if ((rowKey.length === 0) && (colKey.length === 0)) {\n                agg = this.allTotal[id];\n            } else if (rowKey.length === 0) {\n                agg = this.colTotals[flatColKey] && this.colTotals[flatColKey][id];\n            } else if (colKey.length === 0) {\n                agg = this.rowTotals[flatRowKey] && this.rowTotals[flatRowKey][id];\n            } else {\n                agg = this.tree[flatRowKey][flatColKey] && this.tree[flatRowKey][flatColKey][id];\n            }\n            return agg != null ? agg : {\n                value() {\n                    return null;\n                }, format() {\n                    return '';\n                },\n            };\n        }\n    }\n\n    const renameAggregators = (aggregators) => aggregators.map((agg, id) =>\n        (agg.displayName = String.fromCharCode(97 + id).toUpperCase()));\n\n    const fieldsType = {\n        string: 'String',\n        number: 'Number',\n        date: 'Date',\n        time: 'Time',\n        datetime: 'Datetime',\n        boolean: 'Boolean',\n        integer: 'Integer',\n    };\n\n    //expose these to the outside world\n    $.pivotUtilities = {\n        aggregatorTemplates, aggregators: defaultAggregators, renderers, cellRenderers, derivers, locales, fieldsType,\n        zeroPad, naturalSort, numberFormat, sortAs, PivotData\n    };\n\n    /*\n    Default Renderer for hierarchical table layout\n    */\n\n    function pivotTableRenderer(pivotData, opts) {\n\n        let agg, aggregator, colKey, getClickHandler, i, id, j, td, th, totalAggregator, tr, val, x;\n        const defaults = {\n            table: {\n                clickCallback: null,\n                rowTotals: true,\n                colTotals: true,\n            },\n            localeStrings: {\n                totals: 'Totals',\n            },\n\n            typeCellRenderer: cellRenderers.text,\n            headCellRenderer: cellRenderers.text,\n            dataCellRenderer: cellRenderers.text,\n\n            fieldsType: {},\n        };\n\n        opts = $.extend(true, {}, defaults, opts);\n\n        const {\n            colAttrs,\n        } = pivotData;\n        const {\n            rowAttrs,\n        } = pivotData;\n        const rowKeys = pivotData.getRowKeys(true);\n        const colKeys = pivotData.getColKeys(true);\n\n        if (opts.table.clickCallback) {\n            getClickHandler = function (value, rowValues, colValues) {\n                let attr, i;\n                const filters = {};\n                for (i of Object.keys(colAttrs || {})) {\n                    attr = colAttrs[i];\n                    if (colValues[i] != null) {\n                        filters[attr] = colValues[i];\n                    }\n                }\n                for (i of Object.keys(rowAttrs || {})) {\n                    attr = rowAttrs[i];\n                    if (rowValues[i] != null) {\n                        filters[attr] = rowValues[i];\n                    }\n                }\n                return e => opts.table.clickCallback(e, value, filters, pivotData);\n            };\n        }\n\n        const compactLayout = (opts.table.compactLayout != null ? opts.table.compactLayout : true) && pivotData.grouping;\n        const rowExpandHandler = compactLayout ? expandRowCol : pivotData.rowGroupBefore ? expandWithSpan : expandRowsGroupAfter;\n\n        const rowsExpandHandler = getExpandHandler(rowKeys, true, rowExpandHandler.bind(pivotData));\n        const colsExpandHandler = getExpandHandler(colKeys, false, expandWithSpan.bind(pivotData));\n\n        //now actually build the outpu\n        const result = document.createElement('table');\n        result.className = 'pvtTable';\n\n        //helper function for setting row/col-span in pivotTableRenderer\n        const spanSize = function (arr, i, j) {\n            let x;\n            if (i !== 0) {\n                let asc, end;\n                let noDraw = true;\n                for (x = 0, end = j, asc = 0 <= end; asc ? x <= end : x >= end; asc ? x++ : x--) {\n                    if (arr[i - 1][x] !== arr[i][x]) {\n                        noDraw = false;\n                    }\n                }\n                if (noDraw) {\n                    return -1; //do not draw cell\n                }\n            }\n            let len = 0;\n            while ((i + len) < arr.length) {\n                let asc1, end1;\n                let stop = false;\n                for (x = 0, end1 = j, asc1 = 0 <= end1; asc1 ? x <= end1 : x >= end1; asc1 ? x++ : x--) {\n                    if (arr[i][x] !== arr[i + len][x]) {\n                        stop = true;\n                    }\n                }\n                if (stop) {\n                    break;\n                }\n                len++;\n            }\n            return len;\n        };\n\n        //the first few rows are for col headers\n        const thead = document.createElement('thead');\n        for (j of Object.keys(colAttrs || {})) {\n            const c = colAttrs[j];\n            tr = document.createElement('tr');\n            if ((parseInt(j) === 0) && (rowAttrs.length !== 0)) {\n                th = document.createElement('th');\n                th.setAttribute('colspan', rowAttrs.length);\n                th.setAttribute('rowspan', colAttrs.length);\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            th.className = 'pvtAxisLabel';\n            th.appendChild(opts.typeCellRenderer.call(opts, c));\n            if (pivotData.grouping && (j < (colAttrs.length - 1))) {\n                th.onclick = getExpandAllHandler(pivotData, +j, false);\n                th.className += ` open level${j}`;\n            }\n            tr.appendChild(th);\n            for (i of Object.keys(colKeys || {})) {\n                colKey = colKeys[i];\n                x = spanSize(colKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtColLabel';\n                    th.className += ` col${pivotData.colGroupBefore ? +i : (+i + x) - 1}`;\n                    th.appendChild(opts.headCellRenderer.call(opts, colKey[j], c));\n                    th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                    if ((parseInt(j) === (colAttrs.length - 1)) && (rowAttrs.length !== 0)) {\n                        th.setAttribute('rowspan', 2);\n                    }\n                    if (pivotData.grouping && (j < (colAttrs.length - 1)) && colKey[j]) {\n                        th.className += ' pvtSubtotal open';\n                        th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                        th.onclick = colsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n            if ((parseInt(j) === 0) && opts.table.rowTotals) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', Math.max(1, pivotData.aggregator.length));\n                th.setAttribute('rowspan', colAttrs.length + (rowAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            thead.appendChild(tr);\n        }\n\n        //then a row for row header headers\n        if (rowAttrs.length !== 0) {\n            tr = document.createElement('tr');\n            for (i of Object.keys(rowAttrs || {})) {\n                const r = rowAttrs[i];\n                th = document.createElement('th');\n                th.className = 'pvtAxisLabel';\n                th.appendChild(opts.typeCellRenderer.call(opts, r));\n                if (pivotData.grouping && (i < (rowAttrs.length - 1))) {\n                    th.className += ` open level${i}`;\n                    th.onclick = getExpandAllHandler(pivotData, +i, true);\n                }\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            if (colAttrs.length === 0) {\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', pivotData.aggregator.length);\n            }\n            tr.appendChild(th);\n            thead.appendChild(tr);\n        }\n        result.appendChild(thead);\n\n        //now the actual data rows, with their row headers and totals\n        const tbody = document.createElement('tbody');\n\n        if (pivotData.aggregatorsLabel && (pivotData.aggregatorsLabel.length > 1)) {\n            let lbl;\n            tr = document.createElement('tr');\n            th = document.createElement('th');\n            const colspan = rowAttrs.length + (colAttrs.length === 0 ? 0 : 1);\n            th.setAttribute('colspan', colspan);\n            tr.appendChild(th);\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (lbl of pivotData.aggregatorsLabel) {\n                    th = document.createElement('th');\n                    th.className = `pvtAggregatorLabel col${j}`;\n                    th.textContent = lbl;\n                    tr.appendChild(th);\n                }\n            }\n\n            for (lbl of pivotData.aggregatorsLabel) {\n                th = document.createElement('th');\n                th.className = 'pvtAggregatorLabel';\n                th.textContent = lbl;\n                tr.appendChild(th);\n            }\n\n            tbody.appendChild(tr);\n        }\n\n\n        for (i of Object.keys(rowKeys || {})) {\n            const rowKey = rowKeys[i];\n            tr = document.createElement('tr');\n            const rowGap = rowAttrs.length - rowKey.length;\n            tr.className = rowGap ? `pvtSubtotal level${rowKey.length}` : 'pvtData';\n            for (j of Object.keys(rowKey || {})) {\n                const txt = rowKey[j];\n                if (compactLayout && (j < (rowKey.length - 1))) {\n                    continue;\n                }\n                x = compactLayout ? 1 : spanSize(rowKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtRowLabel';\n                    th.className += ` row${pivotData.rowGroupBefore ? +i : (+i + x) - 1}`;\n                    th.appendChild(opts.headCellRenderer.call(opts, txt, rowAttrs[j]));\n                    th.setAttribute('rowspan', x);\n                    if (compactLayout) {\n                        th.colSpan = rowAttrs.length;\n                        th.style.paddingLeft = 5 + (parseInt(j) * 20) + 'px';\n                    }\n                    if (pivotData.grouping && (j < (rowAttrs.length - 1))) {\n                        th.className += ' open';\n                        th.onclick = rowsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n\n            if (!compactLayout && rowGap) {\n                th = document.createElement('th');\n                th.colSpan = rowGap;\n                th.textContent = `Total (${rowKey[j]})`;\n                tr.appendChild(th);\n            }\n\n            if (colAttrs.length) {\n                th.colSpan++;\n            }\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    aggregator = pivotData.getAggregator(rowKey, colKey, id);\n                    val = aggregator.value(id);\n                    td = document.createElement('td');\n                    if (!rowGap) {\n                        td.className = 'pvtVal ';\n                    }\n                    td.className += `row${i} col${j}`;\n                    if (colAttrs.length - colKey.length) {\n                        td.className = `pvtSubtotal level${colKey.length} row${i} col${j}`;\n                    }\n                    td.appendChild(opts.dataCellRenderer.call(opts, aggregator.format(val, opts.fieldsType[aggregator?.attr]), aggregator?.attr, rowKey, colKey));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, colKey);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator(rowKey, [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtTotal rowTotal';\n                    td.append(opts.dataCellRenderer.call(opts, totalAggregator.format(val, opts.fieldsType[totalAggregator?.attr]), totalAggregator?.attr, rowKey, []));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, []);\n                    }\n                    td.setAttribute('data-for', 'row' + i);\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n\n        //finally, the row for col totals, and a grand total\n        if (opts.table.colTotals || (rowAttrs.length === 0)) {\n            tr = document.createElement('tr');\n            if (opts.table.colTotals || (rowAttrs.length === 0)) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtColTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', rowAttrs.length + (colAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            for (j of Object.keys(colKeys || {})) {\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], colKey, id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = `pvtTotal colTotal col${j}`;\n                    if (colKey.length !== colAttrs.length) {\n                        td.className += ` pvtSubtotal level${colKey.length}`;\n                    }\n                    td.append(opts.dataCellRenderer.call(opts, totalAggregator.format(val, opts.fieldsType[totalAggregator?.attr]), totalAggregator?.attr, [], colKey));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], colKey);\n                    }\n                    td.setAttribute('data-for', 'col' + j);\n                    tr.appendChild(td);\n                }\n            }\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtGrandTotal';\n                    td.append(opts.dataCellRenderer.call(opts, totalAggregator.format(val, opts.fieldsType[totalAggregator?.attr]), totalAggregator?.attr, [], []));\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], []);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        result.appendChild(tbody);\n\n        //squirrel this away for later\n        result.setAttribute('data-numrows', rowKeys.length);\n        result.setAttribute('data-numcols', colKeys.length);\n\n        return result;\n    }\n\n    /*\n    Pivot Table core: create PivotData object and call Renderer on it\n    */\n\n    $.fn.pivot = function (input, inputOpts, locale) {\n        let e;\n        if (locale == null) {\n            locale = 'en';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n        localeGlobal = locale;\n        inputOpts = inputOpts || {};\n        const defaults = {\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            filter() {\n                return true;\n            },\n            aggregator: aggregatorTemplates.count()(),\n            aggregatorName: 'Count',\n            sorters: {},\n            derivedAttributes: {},\n            renderer: pivotTableRenderer,\n        };\n\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n\n        let result;\n        inputOpts.pivotData = null;\n        try {\n            const pivotData = new opts.dataClass(input, opts);\n            try {\n                result = opts.renderer(pivotData, opts.rendererOptions);\n                inputOpts.pivotData = pivotData;\n            } catch (error) {\n                e = error;\n                if (typeof console !== 'undefined' && console !== null) {\n                    console.error(e.stack);\n                }\n                result = $('<span>').html(opts.localeStrings.renderError);\n            }\n        } catch (error1) {\n            e = error1;\n            if (typeof console !== 'undefined' && console !== null) {\n                console.error(e.stack);\n            }\n            result = $('<span>').html(opts.localeStrings.computeError);\n        }\n\n        const x = this[0];\n        while (x.hasChildNodes()) {\n            x.removeChild(x.lastChild);\n        }\n        return this.append(result);\n    };\n\n    /*\n    Pivot Table UI: calls the Pivot Table core above with options set by user\n    */\n\n    $.fn.pivotUI = function (input, inputOpts, overwrite, locale) {\n        let opts;\n        let a, c;\n        if (overwrite == null) {\n            overwrite = false;\n        }\n        if (locale == null) {\n            locale = 'fr';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n\n        const defaults = {\n            derivedAttributes: {},\n            aggregators: defaultAggregators,\n            renderers,\n            hiddenAttributes: [],\n            hiddenFromAggregators: [],\n            hiddenFromDragDrop: [],\n            menuLimit: 500,\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            exclusions: {},\n            inclusions: {},\n            unusedAttrsVertical: 85,\n            autoSortUnusedAttrs: false,\n            onRefresh: null,\n            showUI: true,\n            filter() {\n                return true;\n            },\n            sorters: {},\n            multiple: true,\n            parametersActive: false,\n        };\n\n        let itemsId = 0;\n        let aggregators = [];\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const existingOpts = this.data('pivotUIOptions');\n        if ((existingOpts == null) || overwrite) {\n            opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n        } else {\n            opts = existingOpts;\n        }\n\n        if (!inputOpts?.aggregators && locales[locale].formatters) {\n            opts.aggregators = makeAggregators(\n                locales[locale].formatters.format,\n                locales[locale].formatters.formatInt,\n                locales[locale].formatters.formatPct);\n        }\n\n        try {\n            // do a first pass on the data to cache a materialized copy of any\n            // function-valued inputs and to compute dimension cardinalities\n            let attr, i, unusedAttrsVerticalAutoCutoff, x;\n            const attrValues = {};\n            const materializedInput = [];\n            let recordsProcessed = 0;\n            PivotData.forEachRecord(input, opts.derivedAttributes, function (record) {\n                let attr;\n                if (!opts.filter(record)) {\n                    return;\n                }\n                materializedInput.push(record);\n                for (attr of Object.keys(record || {})) {\n                    if ((attrValues[attr] == null)) {\n                        attrValues[attr] = {};\n                        if (recordsProcessed > 0) {\n                            attrValues[attr]['null'] = recordsProcessed;\n                        }\n                    }\n                }\n                for (attr in attrValues) {\n                    const value = record[attr] != null ? record[attr] : 'null';\n                    if (attrValues[attr][value] == null) {\n                        attrValues[attr][value] = 0;\n                    }\n                    attrValues[attr][value]++;\n                }\n                return recordsProcessed++;\n            });\n\n            const uiContainer = $('<div>').addClass('pvtUi');\n\n            const uiMenu = $('<div>').addClass('pvtUiMenu');\n            const uiParameters = $('<div>').addClass('pvtUiParameters');\n            const uiPivotContainer = $('<div>').addClass('pvtUiContainer');\n\n            const uiButtonColumns = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonColumns')\n                .addClass('active')\n                .text(localeStrings.colsLabel)\n                .on('click', function () {\n                    opts.parametersActive = !opts.parametersActive;\n                    if (opts.parametersActive) {\n                        uiButtonColumns.addClass('active');\n                        return uiParameters.show();\n                    } else {\n                        uiButtonColumns.removeClass('active');\n                        return uiParameters.hide();\n                    }\n                })\n                .appendTo(uiMenu);\n\n            const uiButtonGroups = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonGroups')\n                .text(localeStrings.groupsLabel)\n                .on('click', function () {\n                    if (opts.grouping) {\n                        uiButtonGroups.removeClass('active');\n                        opts.grouping = false;\n                    } else {\n                        uiButtonGroups.addClass('active');\n                        opts.grouping = {\n                            colGroupBefore: false,\n                        };\n                    }\n                    return refresh();\n                })\n                .appendTo(uiMenu);\n\n            uiContainer\n                .append(uiMenu)\n                .append(uiParameters)\n                .append(uiPivotContainer);\n\n            //# Render type\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rendererLabel);\n            let pvtRenderType = $('<div>')\n                .addClass('pvtRendererType')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n            const renderer = $('<select>')\n                .addClass('pvtRenderer')\n                .appendTo(pvtRenderType)\n                .bind('change', () => refresh()); //capture reference\n            for (x of Object.keys(opts.renderers || {})) {\n                const r = opts.localeStrings[x] || x;\n                $('<option>').val(x).html(r).appendTo(renderer);\n            }\n\n            //axis list, including the double click menu\n            const unused = $('<div>').addClass('pvtAxisContainer pvtUnused');\n            const shownAttributes = [];\n            for (a in attrValues) {\n                if (!opts.hiddenAttributes.includes(a)) {\n                    shownAttributes.push(a);\n                }\n            }\n            const shownInAggregators = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromAggregators.includes(c)) {\n                    shownInAggregators.push(c);\n                }\n            }\n            const shownInDragDrop = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromDragDrop.includes(c)) {\n                    shownInDragDrop.push(c);\n                }\n            }\n\n            let unusedAttrsVerticalAutoOverride = false;\n            if (opts.unusedAttrsVertical === 'auto') {\n                unusedAttrsVerticalAutoCutoff = 120; // legacy support\n            } else {\n                unusedAttrsVerticalAutoCutoff = parseInt(opts.unusedAttrsVertical);\n            }\n\n            if (!isNaN(unusedAttrsVerticalAutoCutoff)) {\n                let attrLength = 0;\n                for (a of shownInDragDrop) {\n                    attrLength += a.length;\n                }\n                unusedAttrsVerticalAutoOverride = attrLength > unusedAttrsVerticalAutoCutoff;\n            }\n\n            for (i of Object.keys(shownInDragDrop || {})) {\n                attr = shownInDragDrop[i];\n                const values = [];\n                for (const v in attrValues[attr]) {\n                    values.push(v);\n                }\n                let hasExcludedItem = false;\n                const valueList = $('<div>').addClass('pvtFilterBox').hide();\n\n                valueList.append($('<h4>').append(\n                        $('<span>').text(attr),\n                        $('<span>').addClass('count').text(`(${values.length})`),\n                    ),\n                );\n                if (values.length > opts.menuLimit) {\n                    valueList.append($('<p>').html(opts.localeStrings.tooMany));\n                } else {\n                    if (values.length > 5) {\n                        const controls = $('<p>').appendTo(valueList);\n                        const sorter = getSort(opts.sorters, attr);\n                        const placeholder = opts.localeStrings.filterResults;\n                        $('<input>', { type: 'text' }).appendTo(controls)\n                            .attr({ placeholder, class: 'pvtSearch' })\n                            .bind('keyup', function () {\n                                const filter = $(this).val().toLowerCase().trim();\n                                const accept_gen = (prefix, accepted) => (function (v) {\n                                    const real_filter = filter.substring(prefix.length).trim();\n                                    if (real_filter.length === 0) {\n                                        return true;\n                                    }\n                                    return accepted.includes(Math.sign(sorter(v.toLowerCase(), real_filter)));\n                                });\n                                const accept =\n                                    filter.indexOf('>=') === 0 ? accept_gen('>=', [1, 0])\n                                        : filter.indexOf('<=') === 0 ? accept_gen('<=', [-1, 0])\n                                            : filter.indexOf('>') === 0 ? accept_gen('>', [1])\n                                                : filter.indexOf('<') === 0 ? accept_gen('<', [-1])\n                                                    : filter.indexOf('~') === 0 ? function (v) {\n                                                            if (filter.substring(1).trim().length === 0) {\n                                                                return true;\n                                                            }\n                                                            return v.toLowerCase().match(filter.substring(1));\n                                                        }\n                                                        : v => v.toLowerCase().indexOf(filter) !== -1;\n\n                                return valueList.find('.pvtCheckContainer p label span.value').each(function () {\n                                    if (accept($(this).text())) {\n                                        return $(this).parent().parent().show();\n                                    } else {\n                                        return $(this).parent().parent().hide();\n                                    }\n                                });\n                            });\n                        controls.append($('<br>'));\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectAll)\n                            .bind('click', function () {\n                                valueList.find('input:visible:not(:checked)')\n                                    .prop('checked', true).toggleClass('changed');\n                                return false;\n                            });\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectNone)\n                            .bind('click', function () {\n                                valueList.find('input:visible:checked')\n                                    .prop('checked', false).toggleClass('changed');\n                                return false;\n                            });\n                    }\n\n                    const checkContainer = $('<div>').addClass('pvtCheckContainer').appendTo(valueList);\n\n                    for (let value of values.sort(getSort(opts.sorters, attr))) {\n                        const valueCount = attrValues[attr][value];\n                        const filterItem = $('<label>');\n                        let filterItemExcluded = false;\n                        if (opts.inclusions[attr]) {\n                            filterItemExcluded = (!opts.inclusions[attr].includes(value));\n                        } else if (opts.exclusions[attr]) {\n                            filterItemExcluded = (opts.exclusions[attr].includes(value));\n                        }\n                        if (!hasExcludedItem) {\n                            hasExcludedItem = filterItemExcluded;\n                        }\n                        $('<input>')\n                            .attr('type', 'checkbox').addClass('pvtFilter')\n                            .attr('checked', !filterItemExcluded).data('filter', [attr, value])\n                            .appendTo(filterItem)\n                            .bind('change', function () {\n                                return $(this).toggleClass('changed');\n                            });\n                        filterItem.append($('<span>').addClass('value').text(value));\n                        filterItem.append($('<span>').addClass('count').text('(' + valueCount + ')'));\n                        checkContainer.append($('<p>').append(filterItem));\n                    }\n                }\n\n                const closeFilterBox = function () {\n                    if (valueList.find('[type=\\'checkbox\\']').length >\n                        valueList.find('[type=\\'checkbox\\']:checked').length) {\n                        attrElem.addClass('pvtFilteredAttribute');\n                    } else {\n                        attrElem.removeClass('pvtFilteredAttribute');\n                    }\n\n                    valueList.find('.pvtSearch').val('');\n                    valueList.find('.pvtCheckContainer p').show();\n                    return valueList.hide();\n                };\n\n\n                const finalButtons = $('<p>').appendTo(valueList);\n\n                if (values.length <= opts.menuLimit) {\n                    $('<button>', { type: 'button' }).text(opts.localeStrings.apply)\n                        .appendTo(finalButtons).bind('click', function () {\n                        if (valueList.find('.changed').removeClass('changed').length) {\n                            refresh();\n                        }\n                        return closeFilterBox();\n                    });\n                }\n\n                $('<button>', { type: 'button' }).text(opts.localeStrings.cancel)\n                    .appendTo(finalButtons).bind('click', function () {\n                    valueList.find('.changed:checked')\n                        .removeClass('changed').prop('checked', false);\n                    valueList.find('.changed:not(:checked)')\n                        .removeClass('changed').prop('checked', true);\n                    return closeFilterBox();\n                });\n\n                const triangleLink = $('<span>').addClass('pvtTriangle')\n                    .html(' &#x25BE;').bind('click', function (e) {\n                        const { left, top } = $(e.currentTarget).position();\n                        return valueList.css({ left: left + 10, top: top + 10 }).show();\n                    });\n\n                const attrElem = $('<li>').addClass(`axis_${i}`)\n                    .append($('<span>').addClass('pvtAttr').text(attr).data('attrName', attr).append(triangleLink));\n\n                if (hasExcludedItem) {\n                    attrElem.addClass('pvtFilteredAttribute');\n                }\n                unused.append(attrElem).append(valueList);\n            }\n\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.valuesLabel);\n\n            //aggregator menu and value area\n            const divAggregator = $('<div>')\n                .addClass('pvtAggregatorChoose')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            const aggregator = $('<select>')\n                .addClass('pvtAggregator')\n                .appendTo(divAggregator)\n                .bind('change', () => {\n                    if (!opts.multiple) {\n                        this.find('.pvtVals .pvtAttrDropdown').each(function () {\n                            return this.remove();\n                        });\n                        aggregators = [{ id: 1, value: aggregator.val() }];\n                        return refresh();\n                    }\n                }); //capture reference\n\n            for (x of Object.keys(opts.aggregators || {})) {\n                aggregator.append($('<option>').val(x).html(locales[locale].localeStrings[x] || locales['en'].localeStrings[x] || x));\n            }\n\n            if (opts.multiple) {\n                $('<a>', { role: 'button' })\n                    .addClass('pvtAddAggregator')\n                    .addClass('pvtToolButton')\n                    .appendTo(divAggregator)\n                    .html('+')\n                    .bind('click', function () {\n                        aggregators.push({ id: ++itemsId, value: aggregator.val() });\n                        renameAggregators(aggregators);\n                        return refresh();\n                    });\n            }\n\n            const ordering = {\n                key_a_to_z: { rowSymbol: '&varr;', colSymbol: '&harr;', next: 'value_a_to_z' },\n                value_a_to_z: { rowSymbol: '&darr;', colSymbol: '&rarr;', next: 'value_z_to_a' },\n                value_z_to_a: { rowSymbol: '&uarr;', colSymbol: '&larr;', next: 'key_a_to_z' },\n            };\n\n            const rowOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtRowOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.rowOrder).html(ordering[opts.rowOrder].rowSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].rowSymbol);\n                    return refresh();\n                });\n\n            const colOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtColOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.colOrder).html(ordering[opts.colOrder].colSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].colSymbol);\n                    return refresh();\n                });\n\n            const pvVals = $('<div>').addClass('pvtVals')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            uiParameters.append(pvVals);\n\n            // Available fields\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.fieldsLabel);\n\n            uiParameters.append(unused);\n\n            //column axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.colsLabel);\n\n            $('<div>').addClass('pvtAxisContainer pvtCols').appendTo(uiParameters);\n\n            //row axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rowsLabel);\n            $('<div>').addClass('pvtAxisContainer pvtRows').appendTo(uiParameters);\n\n            //the actual pivot table container\n            const pivotTable = $('<div>')\n                .addClass('pvtRendererArea')\n                .appendTo(uiPivotContainer);\n\n            //render the UI in its default state\n            this.html(uiContainer);\n\n            if (!opts.parametersActive) {\n                uiButtonColumns.removeClass('active');\n                uiParameters.hide();\n            }\n\n            //set up the UI initial state as requested by moving elements around\n\n            let initialRender = true;\n\n            //set up for refreshing\n            const refreshDelayed = () => {\n                let vals;\n                const subopts = {\n                    derivedAttributes: opts.derivedAttributes,\n                    localeStrings: opts.localeStrings,\n                    rendererOptions: opts.rendererOptions,\n                    sorters: opts.sorters,\n                    cols: [], rows: [],\n                    dataClass: opts.dataClass,\n                    grouping: opts.grouping,\n                };\n\n                this.find('.pvtRows li span.pvtAttr').each(function () {\n                    return subopts.rows.push($(this).data('attrName'));\n                });\n                this.find('.pvtCols li span.pvtAttr').each(function () {\n                    return subopts.cols.push($(this).data('attrName'));\n                });\n\n                let numInputsToProcess = 0;\n\n                const aggVals = [];\n                let j = 0, idx = j;\n                for (; j < aggregators.length; j++, idx = j) {\n                    let aggregatorType;\n                    const agg = aggregators[idx];\n                    if (typeof agg === 'object') {\n                        aggregatorType = agg.value;\n                    }\n                    const aggIdx = agg.id;\n                    const initialVals = agg.vals;\n\n                    numInputsToProcess = opts.aggregators[aggregatorType]([])().numInputs || 0;\n\n                    vals = [];\n                    this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                        if (numInputsToProcess !== 0) {\n                            numInputsToProcess--;\n                            if ($(this).val() !== '') {\n                                return vals.push($(this).val());\n                            }\n                        }\n                    });\n\n\n                    const pvtVals = this.find('.pvtVals');\n                    let container = this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx);\n                    const found = container.length > 0;\n                    if (opts.multiple) {\n                        let labelAggregator;\n                        if (!found) {\n                            container = $('<div>')\n                                .addClass('pvtAttrDropdownContainer')\n                                .addClass('pvtAttrDropdownContainer' + aggIdx)\n                                .appendTo(pvtVals);\n                            labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                            $('<label>')\n                                .addClass('pvtAttrDropdown')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .appendTo(container)\n                                .html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                            initialRender = true;\n                        }\n\n                        if (!initialRender) {\n                            this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx + ' label.pvtAttrDropdown')\n                                .each(function () {\n                                    labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                                    return $(this).html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                                });\n                        }\n                    } else {\n                        container = pvtVals;\n                    }\n\n                    if (numInputsToProcess !== 0) {\n                        let asc, end;\n                        for (x = 0, end = numInputsToProcess, asc = 0 <= end; asc ? x < end : x > end; asc ? x++ : x--) {\n                            const newDropdown = $('<select>')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .addClass('pvtAttrDropdown')\n                                .append($('<option>'))\n                                .bind('change', () => refresh());\n                            for (attr of shownInAggregators) {\n                                newDropdown.append($('<option>').val(attr).text(attr));\n                            }\n                            container.append(newDropdown);\n                        }\n                    }\n\n\n                    if (opts.multiple && !found) {\n                        $('<a>')\n                            .html('x')\n                            .addClass('pvtRemoveAggregator')\n                            .addClass('pvtToolButton')\n                            .addClass('pvtAttrDropdown' + aggIdx)\n                            .appendTo(container)\n                            .bind('click', (function () {\n                                    this.instance.find('.pvtVals .pvtAttrDropdownContainer' + this.aggIdx).remove();\n                                    idx = aggregators.findIndex(agg => agg.id === this.aggIdx);\n                                    aggregators.splice(idx, 1);\n                                    renameAggregators(aggregators);\n                                    return refresh();\n                                }).bind({ instance: this, aggIdx }),\n                            );\n                    }\n\n                    if (initialRender) {\n                        vals = initialVals != null ? initialVals : opts.vals;\n                        i = 0;\n                        this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                            $(this).val(vals[i]);\n                            return i++;\n                        });\n                        initialRender = false;\n                    }\n\n                    aggVals.push(vals);\n                }\n\n                subopts.aggregatorName = aggregators.map(agg => agg.value);\n                subopts.vals = aggVals;\n                subopts.aggregator = aggregators.map((agg, i) => opts.aggregators[agg.value](aggVals[i], opts));\n                subopts.renderer = opts.renderers[renderer.val()];\n                subopts.rowOrder = rowOrderArrow.data('order');\n                subopts.colOrder = colOrderArrow.data('order');\n                if (opts.multiple) {\n                    subopts.aggregatorsLabel = aggregators.map(agg => agg.displayName);\n                }\n\n                //construct filter here\n                const exclusions = {};\n                this.find('input.pvtFilter').not(':checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        return exclusions[filter[0]].push(filter[1]);\n                    } else {\n                        return exclusions[filter[0]] = [filter[1]];\n                    }\n                });\n                //include inclusions when exclusions present\n                const inclusions = {};\n                this.find('input.pvtFilter:checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        if (inclusions[filter[0]] != null) {\n                            return inclusions[filter[0]].push(filter[1]);\n                        } else {\n                            return inclusions[filter[0]] = [filter[1]];\n                        }\n                    }\n                });\n\n                subopts.filter = function (record) {\n                    if (!opts.filter(record)) {\n                        return false;\n                    }\n                    for (let k in exclusions) {\n                        const excludedItems = exclusions[k];\n                        if (excludedItems.includes('' + (record[k] != null ? record[k] : 'null'))) {\n                            return false;\n                        }\n                    }\n                    return true;\n                };\n\n                pivotTable.pivot(materializedInput, subopts, locale);\n                const pivotUIOptions = $.extend({}, opts, {\n                        cols: subopts.cols,\n                        rows: subopts.rows,\n                        colOrder: subopts.colOrder,\n                        rowOrder: subopts.rowOrder,\n                        vals: aggVals,\n                        exclusions,\n                        inclusions,\n                        aggregator: subopts.aggregator,\n                        inclusionsInfo: inclusions, //duplicated for backwards-compatibility\n                        aggregatorName: subopts.aggregatorName,\n                        rendererName: renderer.val(),\n                    },\n                );\n\n                const currentPivotData = subopts.pivotData;\n                delete subopts.pivotData;\n                this.data('pivotUIOptions', pivotUIOptions);\n\n                // if requested, make sure unused columns are in alphabetical order\n                if (opts.autoSortUnusedAttrs) {\n                    const unusedAttrsContainer = this.find('td.pvtUnused.pvtAxisContainer');\n                    $(unusedAttrsContainer).children('li')\n                        .sort((a, b) => naturalSort($(a).text(), $(b).text()))\n                        .appendTo(unusedAttrsContainer);\n                }\n\n                pivotTable.css('opacity', 1);\n                if (opts.onRefresh != null) {\n                    return opts.onRefresh(pivotUIOptions, currentPivotData);\n                }\n            };\n\n            const refresh = () => {\n                pivotTable.css('opacity', 0.5);\n                return setTimeout(refreshDelayed, 10);\n            };\n\n            for (x of opts.cols) {\n                this.find('.pvtCols').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            for (x of opts.rows) {\n                this.find('.pvtRows').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            if (opts.aggregatorName != null) {\n                if (opts.multiple) {\n                    opts.aggregatorName = Array.isArray(opts.aggregatorName) ? opts.aggregatorName : [opts.aggregatorName];\n                    for (let idx = 0; idx < opts.aggregatorName.length; idx++) {\n                        const agg = opts.aggregatorName[idx];\n                        aggregators.push({\n                            id: ++itemsId,\n                            value: agg,\n                            vals: (opts.vals != null ? opts.vals[idx] : undefined),\n                        });\n                        renameAggregators(aggregators);\n                    }\n                } else {\n                    this.find('.pvtVals').append(this.find('.pvtAttrDropdown'));\n                    this.find('.pvtAggregator').val(opts.aggregatorName).change();\n                }\n            } else {\n                this.find('.pvtAggregator').change();\n            }\n            if (opts.rendererName != null) {\n                this.find('.pvtRenderer').val(opts.rendererName);\n            }\n\n            if (!opts.showUI) {\n                this.find('.pvtUiCell').hide();\n            }\n\n            //the very first refresh will actually display the table\n            refresh();\n\n            this.find('.pvtAxisContainer').sortable({\n                update(e, ui) {\n                    if ((ui.sender == null)) {\n                        return refresh();\n                    }\n                },\n                connectWith: this.find('.pvtAxisContainer'),\n                items: 'li',\n                placeholder: 'pvtPlaceholder',\n            });\n        } catch (error) {\n            console.error(error);\n            this.html(opts.localeStrings.uiRenderError);\n        }\n        return this;\n    };\n\n    /*\n    Heatmap post-processing\n    */\n\n    $.fn.heatmap = function (scope, opts) {\n        if (scope == null) {\n            scope = 'heatmap';\n        }\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        // given a series of values\n        // must return a function to map a given value to a CSS color\n        let colorScaleGenerator = opts?.heatmap?.colorScaleGenerator;\n        if (colorScaleGenerator == null) {\n            colorScaleGenerator = function (values) {\n                const min = Math.min(...(values || []));\n                const max = Math.max(...(values || []));\n                return function (x) {\n                    const nonRed = 255 - Math.round((255 * (x - min)) / (max - min));\n                    return `rgb(255,${nonRed},${nonRed})`;\n                };\n            };\n        }\n\n        const heatmapper = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            const colorScale = colorScaleGenerator(values);\n            return forEachCell((x, elem) => elem.css('background-color', colorScale(x)));\n        };\n\n        switch (scope) {\n            case 'heatmap':\n                heatmapper('.pvtVal');\n                break;\n            case 'rowheatmap':\n                for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n                    heatmapper(`.pvtVal.row${i}`);\n                }\n                break;\n            case 'colheatmap':\n                for (let j = 0, end1 = numCols, asc1 = 0 <= end1; asc1 ? j < end1 : j > end1; asc1 ? j++ : j--) {\n                    heatmapper(`.pvtVal.col${j}`);\n                }\n                break;\n        }\n\n        heatmapper('.pvtTotal.rowTotal');\n        heatmapper('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Barchart post-processing\n    */\n\n    $.fn.barchart = function (opts) {\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        const barcharter = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            let max = Math.max(...(values || []));\n            if (max < 0) {\n                max = 0;\n            }\n            let range = max;\n            const min = Math.min(...(values || []));\n            if (min < 0) {\n                range = max - min;\n            }\n            const scaler = x => (100 * x) / (1.4 * range);\n            return forEachCell(function (x, elem) {\n                const text = elem.text();\n                const wrapper = $('<div>').css({\n                    'position': 'relative',\n                    'height': '55px',\n                });\n                let bgColor = 'gray';\n                let bBase = 0;\n                if (min < 0) {\n                    bBase = scaler(-min);\n                }\n                if (x < 0) {\n                    bBase += scaler(x);\n                    bgColor = 'darkred';\n                    x = -x;\n                }\n                wrapper.append($('<div>').css({\n                        'position': 'absolute',\n                        'bottom': bBase + '%',\n                        'left': 0,\n                        'right': 0,\n                        'height': scaler(x) + '%',\n                        'background-color': bgColor,\n                    }),\n                );\n                wrapper.append($('<div>').text(text).css({\n                        'position': 'relative',\n                        'padding-left': '5px',\n                        'padding-right': '5px',\n                    }),\n                );\n\n                return elem.css({ 'padding': 0, 'padding-top': '5px', 'text-align': 'center' }).html(wrapper);\n            });\n        };\n\n        for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n            barcharter(`.pvtVal.row${i}`);\n        }\n        barcharter('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Grouping fold/expand rows and cols\n    */\n\n    const childIndex = el => Array.prototype.indexOf.call(el.parentNode.children, el);\n\n    const childKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const len = keys[n].length;\n\n        const result = [];\n        n = n + up;\n        let key = keys[n];\n        while (key && key.length > len) {\n            if (key.length === (len + 1)) {\n                result.push(n);\n            } else {\n                continue;\n            }\n            n = n + up;\n            key = keys[n];\n        }\n        return result;\n    };\n\n    const parentKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const result = [];\n        let len = keys[n].length;\n        while (len > 1) {\n            let key;\n            n = n - up;\n            key = keys[n];\n            while (key && key.length >= len) {\n                n = n - up;\n                key = keys[n];\n            }\n            result.push(n);\n\n            len = keys[n].length;\n        }\n        return result;\n    };\n\n    const levelKeysIndices = (keys, level) => (keys.filter(d => d.length === level)).map(keys.indexOf.bind(keys));\n\n    const getAxis = function (table, rows, level) {\n        if (rows) {\n            return table.find(`thead tr:last-child th.pvtAxisLabel:nth-of-type(${level})`);\n        } else {\n            return table.find(`thead tr:nth-child(${level}) th.pvtAxisLabel`);\n        }\n    };\n\n    const getHeader = (table, rows, n) => table.find(rows ? `tbody tr th.row${n}` : `thead th.col${n}`);\n\n    const rowGetter = function (table) {\n        const selecttion = table.find('tbody tr');\n        return n => $(selecttion[n]);\n    };\n\n    const colGetter = function (table) {\n        const selecttion = table.find('tr');\n        return n => selecttion.find(`.col${n}`);\n    };\n\n    const showHide = function (getter, keys, nth, offset, show) {\n        const object = childKeysIndices(keys, nth);\n        for (let i in object) {\n            const n = object[i];\n            const row = getter(n + offset);\n            const fn = show ? $.fn.show : $.fn.hide;\n            fn.call(row);\n            if (!row.hasClass('collapsed')) {\n                showHide(getter, keys, n, offset, show);\n            }\n        }\n        return true;\n    };\n\n    const expandRowsGroupAfter = function (cell, rows, keys, nth) {\n        const table = $(cell).closest('table');\n        const initIndex = childIndex(cell.parentNode);\n        const getter = rowGetter(table);\n        const row = getter(nth);\n\n        const insertPoint = row.hasClass('collapsed') ? getter(cell._old) : row;\n        if (!row.hasClass('collapsed')) {\n            cell._old = childIndex(cell.parentNode);\n        }\n        insertPoint.prepend(cell);\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            const parent = (getHeader(table, rows, p))[0];\n            const parentIndex = childIndex(parent.parentNode);\n            parent._old = parent._old != null ? parent._old : parentIndex;\n            if ((parent._old === initIndex) && (parent.rowSpan === 1)) {\n                parent._old -= initIndex - childIndex(cell.parentNode);\n            }\n\n            if (initIndex === parentIndex) {\n                insertPoint.prepend(parent);\n            }\n        }\n\n        return expandWithSpan(cell, rows, keys, nth);\n    };\n\n    const expandRowCol = function (cell, rows, keys, nth, parent) {\n        const table = $(cell).closest('table');\n        const getter = rows ? rowGetter(table) : colGetter(table);\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const offset = rows && (this.aggregator.length > 1) ? 1 : 0;\n        if ((parent != null ? parent[span] : undefined) !== 1) {\n            showHide(getter, keys, nth, offset, getter(nth + offset).hasClass('collapsed'));\n        }\n        getter(nth + offset).toggleClass('collapsed');\n        return $(cell).toggleClass('open close');\n    };\n\n    const expandAll = function (pivotData, table, level, rows, expand) {\n        let i;\n        if (expand && (level > 1)) {\n            getAxis(table, rows, level - 1).removeClass('close').addClass('open');\n            expandAll(pivotData, table, level - 1, rows, expand);\n        }\n\n        const levels = (rows ? pivotData.rowAttrs : pivotData.colAttrs).length - 1;\n        if (!expand && (level < levels)) {\n            let asc, end, start;\n            for (start = level + 1, i = start, end = levels, asc = start <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\n                getAxis(table, rows, i).removeClass('open').addClass('close');\n            }\n        }\n\n        const keys = rows ? pivotData.rowKeys : pivotData.colKeys;\n        const object = levelKeysIndices(keys, level);\n        for (i in object) {\n            const n = object[i];\n            const el = getHeader(table, rows, n);\n            if (expand === el.hasClass('close')) {\n                el.trigger('click');\n            }\n        }\n        return null;\n    };\n\n    const getExpandHandler = (keys, rows, handler) => (function (ev) {\n        const match = ev.target.className.match(rows ? /row(\\d+)/ : /col(\\d+)/);\n        if (match) {\n            return handler(ev.target, rows, keys, +match[1]);\n        }\n    });\n\n    return getExpandAllHandler = (pivotData, level, rows) => (function (ev) {\n        expandAll(pivotData, $(ev.target).closest('table'), level + 1, rows, $(ev.target).hasClass('close'));\n        return $(ev.target).toggleClass('open close');\n    });\n})(jQuery);\n\n"],"mappings":"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","ignoreList":[]}