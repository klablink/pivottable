{"version":3,"file":"pivot.js","names":["$","expandWithSpan","cell","rows","keys","nth","parent","table","closest","span","dft","Math","max","aggregator","length","_ref","_span","change","object","parentKeysIndices","i","p","getHeader","expandRowCol","getExpandAllHandler","addSeparators","nStr","thousandsSep","decimalSep","x","split","x1","x2","rgx","test","replace","numberFormat","opts","defaults","digitsAfterDecimal","scaler","prefix","suffix","extend","isNaN","isFinite","result","toFixed","usFmt","usFmtInt","usFmtPct","aggregatorTemplates","count","formatter","data","rowKey","colKey","push","value","format","uniques","fn","_ref2","arguments","undefined","_ref3","_slicedToArray","attr","uniq","record","includes","numInputs","sum","_ref4","_ref5","parseFloat","extremes","mode","_ref6","_ref7","val","sorter","getSort","sorters","quantile","q","_ref8","_ref9","vals","sort","a","b","floor","ceil","runningStat","ddof","_ref10","_ref11","n","m","s","m_new","sqrt","sumOverSum","_ref12","_ref13","num","denom","sumNum","sumDenom","sumOverSumBound80","upper","_ref14","_ref15","sign","fractionOf","wrapped","type","_len","Array","_key","selector","total","row","col","inner","apply","_toConsumableArray","id","agg","getAggregator","concat","countUnique","f","listUnique","naturalSort","join","min","first","last","median","average","var","stdev","makeAggregators","fmt","fmtInt","fmtPct","defaultAggregators","renderers","Table","pivotTableRenderer","TableBarchart","barchart","Heatmap","heatmap","RowHeatmap","ColHeatmap","locales","en","formatters","formatInt","formatPct","localeStrings","renderError","computeError","uiRenderError","selectAll","selectNone","tooMany","filterResults","cancel","totals","vs","by","rendererLabel","valuesLabel","fieldsLabel","colsLabel","rowsLabel","groupsLabel","_i","_Object$keys","Object","mthNamesEn","dayNamesEn","zeroPad","number","substr","derivers","bin","binWidth","dateFormat","formatString","utcOutput","mthNames","dayNames","utc","date","Date","parse","rx","rd","rz","as","bs","nulls_first","nf","nas","nbs","String","match","a1","shift","b1","sortAs","order","mapping","l_mapping","toLowerCase","isFunction","filterByLength","filter","subarrays","array","map","d","slice","PivotData","input","_this","_classCallCheck","arrSort","bind","sortKeys","getColKeys","getRowKeys","isArray","aggregatorName","colAttrs","cols","rowAttrs","valAttrs","rowOrder","colOrder","derivedAttributes","tree","rowKeys","colKeys","rowTotals","colTotals","allTotal","sorted","aggregatorsLabel","grouping","rowGroupBefore","colGroupBefore","aggregators","idx","itemsId","renameAggregators","forEachRecord","processRecord","_createClass","key","forEachMatchingRecord","criteria","callback","_this2","k","v","attrs","sortersArr","_iterator","_createForOfIteratorHelper","_step","done","err","e","_i2","_Object$keys2","comparison","_this3","r","c","all_keys","_this4","_iterator2","_step2","_iterator3","_step3","forEach","_loop","j","flatRowKey","fromCharCode","result1","_loop2","flatColKey","addRecord","isEmptyObject","left","_i3","_Object$keys3","compactRecord","_i4","_Object$keys4","_iterator4","_step4","tblCols","each","text","Error","displayName","toUpperCase","pivotUtilities","pivotData","getClickHandler","td","th","totalAggregator","tr","clickCallback","rowValues","colValues","filters","_i5","_Object$keys5","_i6","_Object$keys6","compactLayout","rowExpandHandler","expandRowsGroupAfter","rowsExpandHandler","getExpandHandler","colsExpandHandler","document","createElement","className","spanSize","arr","asc","end","noDraw","len","asc1","end1","stop","thead","_i7","_Object$keys7","parseInt","setAttribute","appendChild","textContent","onclick","_i8","_Object$keys8","innerHTML","_i9","_Object$keys9","tbody","lbl","colspan","_i10","_Object$keys10","_iterator5","_step5","_iterator6","_step6","_i11","_Object$keys11","rowGap","_i12","_Object$keys12","txt","colSpan","style","paddingLeft","_i13","_Object$keys13","_i14","_Object$keys14","pivot","inputOpts","locale","dataClass","renderer","localeDefaults","rendererOptions","error","console","stack","html","error1","hasChildNodes","removeChild","lastChild","append","pivotUI","overwrite","_this5","hiddenAttributes","hiddenFromAggregators","hiddenFromDragDrop","menuLimit","exclusions","inclusions","unusedAttrsVertical","autoSortUnusedAttrs","onRefresh","showUI","multiple","parametersActive","existingOpts","unusedAttrsVerticalAutoCutoff","attrValues","materializedInput","recordsProcessed","_i15","_Object$keys15","uiContainer","addClass","uiMenu","uiParameters","uiPivotContainer","uiButtonColumns","on","show","removeClass","hide","appendTo","uiButtonGroups","refresh","pvtRenderType","_i16","_Object$keys16","unused","shownAttributes","shownInAggregators","_i17","_shownAttributes","shownInDragDrop","_i18","_shownAttributes2","unusedAttrsVerticalAutoOverride","attrLength","_iterator7","_step7","_loop3","_Object$keys17","_i19","values","hasExcludedItem","valueList","controls","placeholder","class","trim","accept_gen","accepted","real_filter","substring","needle","accept","indexOf","find","prop","toggleClass","checkContainer","_iterator8","_step8","valueCount","filterItem","filterItemExcluded","closeFilterBox","attrElem","finalButtons","triangleLink","_$$position","currentTarget","position","top","css","divAggregator","remove","_i20","_Object$keys18","role","ordering","key_a_to_z","rowSymbol","colSymbol","next","value_a_to_z","value_z_to_a","rowOrderArrow","colOrderArrow","pvVals","pivotTable","initialRender","refreshDelayed","subopts","numInputsToProcess","aggVals","_loop4","aggregatorType","_typeof","aggIdx","initialVals","pvtVals","container","found","labelAggregator","newDropdown","_i21","_shownInAggregators","_this6","instance","findIndex","splice","not","excludedItems","pivotUIOptions","inclusionsInfo","rendererName","currentPivotData","unusedAttrsContainer","children","setTimeout","_iterator9","_step9","inArray","_iterator10","_step10","sortable","update","ui","sender","connectWith","items","scope","_opts$heatmap","_this7","numRows","numCols","colorScaleGenerator","nonRed","round","heatmapper","forEachCell","colorScale","elem","_this8","barcharter","range","wrapper","bgColor","bBase","childIndex","el","prototype","call","parentNode","childKeysIndices","up","levelKeysIndices","level","getAxis","rowGetter","selecttion","colGetter","showHide","getter","offset","hasClass","initIndex","insertPoint","_old","prepend","parentIndex","rowSpan","expandAll","expand","levels","start","trigger","handler","ev","target","jQuery"],"sources":["pivot.js"],"sourcesContent":["// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n// noinspection JSUnresolvedReference\n\n/*\n * decaffeinate suggestions:\n * DS201: Simplify complex destructure assignments\n * DS202: Simplify dynamic range loops\n * DS203: Remove `|| {}` from converted for-own loops\n * DS204: Change includes calls to have a more natural evaluation order\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\n(function ($) {\n\n    const expandWithSpan = function (cell, rows, keys, nth) {\n        let parent;\n        const table = $(cell).closest('table');\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const dft = !rows ? Math.max(1, this.aggregator.length) : 1;\n        [cell._span, cell[span]] = [cell[span], cell._span != null ? cell._span : dft];\n        const change = cell[span] - cell._span;\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            parent = (getHeader(table, rows, p))[0];\n            if (parent[span] === 1) {\n                parent._span += change;\n                break;\n            }\n            parent[span] += change;\n        }\n\n        return expandRowCol(cell, rows, keys, nth, parent);\n    };\n    /*\n        Utilities\n        */\n\n    let getExpandAllHandler;\n    const addSeparators = function (nStr, thousandsSep, decimalSep) {\n        nStr += '';\n        const x = nStr.split('.');\n        let x1 = x[0];\n        const x2 = x.length > 1 ? decimalSep + x[1] : '';\n        const rgx = /(\\d+)(\\d{3})/;\n        while (rgx.test(x1)) {\n            x1 = x1.replace(rgx, '$1' + thousandsSep + '$2');\n        }\n        return x1 + x2;\n    };\n\n    const numberFormat = function (opts) {\n        const defaults = {\n            digitsAfterDecimal: 2, scaler: 1,\n            thousandsSep: ',', decimalSep: '.',\n            prefix: '', suffix: '',\n        };\n        opts = $.extend({}, defaults, opts);\n        return function (x) {\n            if (isNaN(x) || !isFinite(x)) {\n                return '';\n            }\n            const result = addSeparators((opts.scaler * x).toFixed(opts.digitsAfterDecimal), opts.thousandsSep, opts.decimalSep);\n            return '' + opts.prefix + result + opts.suffix;\n        };\n    };\n\n    //aggregator templates default to US number formatting, but this is overrideable\n    const usFmt = numberFormat();\n    const usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\n    const usFmtPct = numberFormat({ digitsAfterDecimal: 1, scaler: 100, suffix: '%' });\n\n    const aggregatorTemplates = {\n        count(formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return () => (function (data, rowKey, colKey) {\n                return {\n                    count: 0,\n                    push() {\n                        return this.count++;\n                    },\n                    value() {\n                        return this.count;\n                    },\n                    format: formatter,\n                };\n            });\n        },\n\n        uniques(fn, formatter) {\n            if (formatter == null) {\n                formatter = usFmtInt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        uniq: [],\n                        push(record) {\n                            if (!this.uniq.includes(record[attr])) {\n                                return this.uniq.push(record[attr]);\n                            }\n                        },\n                        value() {\n                            return fn(this.uniq);\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sum: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[attr]))) {\n                                return this.sum += parseFloat(record[attr]);\n                            }\n                        },\n                        value() {\n                            return this.sum;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        extremes(mode, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        val: null,\n                        sorter: getSort(data != null ? data.sorters : undefined, attr),\n                        push(record) {\n                            let x = record[attr];\n                            if (['min', 'max'].includes(mode)) {\n                                x = parseFloat(x);\n                                if (!isNaN(x)) {\n                                    this.val = Math[mode](x, this.val != null ? this.val : x);\n                                }\n                            }\n                            if (mode === 'first') {\n                                if (this.sorter(x, this.val != null ? this.val : x) <= 0) {\n                                    this.val = x;\n                                }\n                            }\n                            if (mode === 'last') {\n                                if (this.sorter(x, this.val != null ? this.val : x) >= 0) {\n                                    return this.val = x;\n                                }\n                            }\n                        },\n                        value() {\n                            return this.val;\n                        },\n                        format(x) {\n                            if (isNaN(x)) {\n                                return x;\n                            } else {\n                                return formatter(x);\n                            }\n                        },\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        quantile(q, formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        vals: [],\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (!isNaN(x)) {\n                                return this.vals.push(x);\n                            }\n                        },\n                        value() {\n                            if (this.vals.length === 0) {\n                                return null;\n                            }\n                            this.vals.sort((a, b) => a - b);\n                            const i = (this.vals.length - 1) * q;\n                            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        runningStat(mode, ddof, formatter) {\n            if (mode == null) {\n                mode = 'mean';\n            }\n            if (ddof == null) {\n                ddof = 1;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [attr] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        n: 0.0, m: 0.0, s: 0.0,\n                        push(record) {\n                            const x = parseFloat(record[attr]);\n                            if (isNaN(x)) {\n                                return;\n                            }\n                            this.n += 1.0;\n                            if (this.n === 1.0) {\n                                return this.m = x;\n                            } else {\n                                const m_new = this.m + ((x - this.m) / this.n);\n                                this.s = this.s + ((x - this.m) * (x - m_new));\n                                return this.m = m_new;\n                            }\n                        },\n                        value() {\n                            if (mode === 'mean') {\n                                if (this.n === 0) {\n                                    return 0 / 0;\n                                } else {\n                                    return this.m;\n                                }\n                            }\n                            if (this.n <= ddof) {\n                                return 0;\n                            }\n                            switch (mode) {\n                                case 'var':\n                                    return this.s / (this.n - ddof);\n                                case 'stdev':\n                                    return Math.sqrt(this.s / (this.n - ddof));\n                            }\n                        },\n                        format: formatter,\n                        numInputs: (attr != null) ? 0 : 1,\n                    };\n                };\n            };\n        },\n\n        sumOverSum(formatter) {\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            return this.sumNum / this.sumDenom;\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        sumOverSumBound80(upper, formatter) {\n            if (upper == null) {\n                upper = true;\n            }\n            if (formatter == null) {\n                formatter = usFmt;\n            }\n            return function (...args) {\n                const [num, denom] = args[0];\n                return function (data, rowKey, colKey) {\n                    return {\n                        sumNum: 0,\n                        sumDenom: 0,\n                        push(record) {\n                            if (!isNaN(parseFloat(record[num]))) {\n                                this.sumNum += parseFloat(record[num]);\n                            }\n                            if (!isNaN(parseFloat(record[denom]))) {\n                                return this.sumDenom += parseFloat(record[denom]);\n                            }\n                        },\n                        value() {\n                            const sign = upper ? 1 : -1;\n                            return ((0.821187207574908 / this.sumDenom) + (this.sumNum / this.sumDenom) + (1.2815515655446004 * sign *\n                                    Math.sqrt((0.410593603787454 / (this.sumDenom * this.sumDenom)) + ((this.sumNum * (1 - (this.sumNum / this.sumDenom))) / (this.sumDenom * this.sumDenom))))) /\n                                (1 + (1.642374415149816 / this.sumDenom));\n                        },\n                        format: formatter,\n                        numInputs: (num != null) && (denom != null) ? 0 : 2,\n                    };\n                };\n            };\n        },\n\n        fractionOf(wrapped, type, formatter) {\n            if (type == null) {\n                type = 'total';\n            }\n            if (formatter == null) {\n                formatter = usFmtPct;\n            }\n            return (...x) => (function (data, rowKey, colKey) {\n                return {\n                    selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[type],\n                    inner: wrapped(...(x || []))(data, rowKey, colKey),\n                    push(record) {\n                        return this.inner.push(record);\n                    },\n                    format: formatter,\n                    value(id) {\n                        const agg = data.getAggregator(...([...this.selector, id] || []));\n                        return this.inner.value() / agg.inner.value();\n                    },\n                    numInputs: wrapped(...(x || []))().numInputs,\n                };\n            });\n        },\n    };\n\n    aggregatorTemplates.countUnique = f => aggregatorTemplates.uniques((x => x.length), f);\n    aggregatorTemplates.listUnique = s => aggregatorTemplates.uniques((x => x.sort(naturalSort).join(s)), (x => x));\n    aggregatorTemplates.max = f => aggregatorTemplates.extremes('max', f);\n    aggregatorTemplates.min = f => aggregatorTemplates.extremes('min', f);\n    aggregatorTemplates.first = f => aggregatorTemplates.extremes('first', f);\n    aggregatorTemplates.last = f => aggregatorTemplates.extremes('last', f);\n    aggregatorTemplates.median = f => aggregatorTemplates.quantile(0.5, f);\n    aggregatorTemplates.average = f => aggregatorTemplates.runningStat('mean', 1, f);\n    aggregatorTemplates.var = (ddof, f) => aggregatorTemplates.runningStat('var', ddof, f);\n    aggregatorTemplates.stdev = (ddof, f) => aggregatorTemplates.runningStat('stdev', ddof, f);\n\n    function makeAggregators(fmt, fmtInt, fmtPct) {\n        return {\n            'Count': aggregatorTemplates.count(fmtInt),\n            'Count Unique Values': aggregatorTemplates.countUnique(fmtInt),\n            'List Unique Values': aggregatorTemplates.listUnique(', '),\n            'Sum': aggregatorTemplates.sum(fmt),\n            'Integer Sum': aggregatorTemplates.sum(fmtInt),\n            'Average': aggregatorTemplates.average(fmt),\n            'Median': aggregatorTemplates.median(fmt),\n            'Sample Variance': aggregatorTemplates.var(1, fmt),\n            'Sample Standard Deviation': aggregatorTemplates.stdev(1, fmt),\n            'Minimum': aggregatorTemplates.min(fmt),\n            'Maximum': aggregatorTemplates.max(fmt),\n            'First': aggregatorTemplates.first(fmt),\n            'Last': aggregatorTemplates.last(fmt),\n            'Sum over Sum': aggregatorTemplates.sumOverSum(fmt),\n            '80% Upper Bound': aggregatorTemplates.sumOverSumBound80(true, fmt),\n            '80% Lower Bound': aggregatorTemplates.sumOverSumBound80(false, fmt),\n            'Sum as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'total', fmtPct),\n            'Sum as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'row', fmtPct),\n            'Sum as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.sum(), 'col', fmtPct),\n            'Count as Fraction of Total': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'total', fmtPct),\n            'Count as Fraction of Rows': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'row', fmtPct),\n            'Count as Fraction of Columns': aggregatorTemplates.fractionOf(aggregatorTemplates.count(), 'col', fmtPct),\n        };\n    }\n\n    //default aggregators & renderers use US naming and number formatting\n    const defaultAggregators = makeAggregators(usFmt, usFmtInt, usFmtPct);\n\n    const renderers = {\n        'Table'(data, opts) {\n            return pivotTableRenderer(data, opts);\n        },\n        'Table Barchart'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).barchart();\n        },\n        'Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('heatmap', opts);\n        },\n        'Row Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('rowheatmap', opts);\n        },\n        'Col Heatmap'(data, opts) {\n            return $(pivotTableRenderer(data, opts)).heatmap('colheatmap', opts);\n        },\n    };\n\n    const locales = {\n        en: {\n            formatters: {\n                format: usFmt,\n                formatInt: usFmtInt,\n                formatPct: usFmtPct,\n            },\n            renderers,\n            localeStrings: {\n                renderError: 'An error occurred rendering the PivotTable results.',\n                computeError: 'An error occurred computing the PivotTable results.',\n                uiRenderError: 'An error occurred rendering the PivotTable UI.',\n                selectAll: 'Select All',\n                selectNone: 'Select None',\n                tooMany: '(too many to list)',\n                filterResults: 'Filter values',\n                apply: 'Apply',\n                cancel: 'Cancel',\n                totals: 'Totals', //for table renderer\n                vs: 'vs', //for gchart renderer\n                by: 'by', //for gchart renderer\n                rendererLabel: 'Renderer',\n                valuesLabel: 'Values',\n                fieldsLabel: 'Fields',\n                colsLabel: 'Columns',\n                rowsLabel: 'Rows',\n                groupsLabel: 'Groups',\n            },\n        },\n    };\n\n    for (const agg of Object.keys(defaultAggregators)) {\n        locales.en.localeStrings[agg] = agg;\n    }\n\n    //dateFormat deriver l10n requires month and day names to be passed in directly\n    const mthNamesEn = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    const zeroPad = number => ('0' + number).substr(-2, 2);\n\n    const derivers = {\n        bin(col, binWidth) {\n            return record => record[col] - (record[col] % binWidth);\n        },\n        dateFormat(col, formatString, utcOutput, mthNames, dayNames) {\n            if (utcOutput == null) {\n                utcOutput = false;\n            }\n            if (mthNames == null) {\n                mthNames = mthNamesEn;\n            }\n            if (dayNames == null) {\n                dayNames = dayNamesEn;\n            }\n            const utc = utcOutput ? 'UTC' : '';\n            return function (record) { //thanks http://stackoverflow.com/a/12213072/112871\n                const date = new Date(Date.parse(record[col]));\n                if (isNaN(date)) {\n                    return '';\n                }\n                return formatString.replace(/%(.)/g, function (m, p) {\n                    switch (p) {\n                        case 'y':\n                            return date[`get${utc}FullYear`]();\n                        case 'm':\n                            return zeroPad(date[`get${utc}Month`]() + 1);\n                        case 'n':\n                            return mthNames[date[`get${utc}Month`]()];\n                        case 'd':\n                            return zeroPad(date[`get${utc}Date`]());\n                        case 'w':\n                            return dayNames[date[`get${utc}Day`]()];\n                        case 'x':\n                            return date[`get${utc}Day`]();\n                        case 'H':\n                            return zeroPad(date[`get${utc}Hours`]());\n                        case 'M':\n                            return zeroPad(date[`get${utc}Minutes`]());\n                        case 'S':\n                            return zeroPad(date[`get${utc}Seconds`]());\n                        default:\n                            return '%' + p;\n                    }\n                });\n            };\n        },\n    };\n\n    const rx = /(\\d+)|(\\D+)/g;\n    const rd = /\\d/;\n    const rz = /^0/;\n    const naturalSort = (as, bs, nulls_first) => {\n        //nulls first\n        if (nulls_first == null) {\n            nulls_first = true;\n        }\n        const nf = nulls_first ? 1 : -1;\n        if ((bs != null) && (as == null)) {\n            return -1 * nf;\n        }\n        if ((as != null) && (bs == null)) {\n            return 1 * nf;\n        }\n\n        //then raw NaNs\n        if ((typeof as === 'number') && isNaN(as)) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && isNaN(bs)) {\n            return 1;\n        }\n\n        //numbers and numbery strings group together\n        const nas = +as;\n        const nbs = +bs;\n        if (nas < nbs) {\n            return -1;\n        }\n        if (nas > nbs) {\n            return 1;\n        }\n\n        //within that, true numbers before numbery strings\n        if ((typeof as === 'number') && (typeof bs !== 'number')) {\n            return -1;\n        }\n        if ((typeof bs === 'number') && (typeof as !== 'number')) {\n            return 1;\n        }\n        if ((typeof as === 'number') && (typeof bs === 'number')) {\n            return 0;\n        }\n\n        // 'Infinity' is a textual number, so less than 'A'\n        if (isNaN(nbs) && !isNaN(nas)) {\n            return -1;\n        }\n        if (isNaN(nas) && !isNaN(nbs)) {\n            return 1;\n        }\n\n        //finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n        let a = String(as);\n        let b = String(bs);\n        if (a === b) {\n            return 0;\n        }\n        if (!rd.test(a) || !rd.test(b)) {\n            return (a > b ? 1 : -1);\n        }\n\n        //special treatment for strings containing digits\n        a = a.match(rx); //create digits vs. non-digit chunks and iterate through\n        b = b.match(rx);\n        while (a.length && b.length) {\n            const a1 = a.shift();\n            const b1 = b.shift();\n            if (a1 !== b1) {\n                if (rd.test(a1) && rd.test(b1)) { //both are digit chunks\n                    return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n                } else {\n                    return (a1 > b1 ? 1 : -1);\n                }\n            }\n        }\n        return a.length - b.length;\n    };\n\n    const sortAs = function (order) {\n        const mapping = {};\n        const l_mapping = {}; // sort lowercased keys similarly\n        for (let i in order) {\n            const x = order[i];\n            mapping[x] = i;\n            if (typeof x === 'string') {\n                l_mapping[x.toLowerCase()] = i;\n            }\n        }\n        return function (a, b) {\n            if ((mapping[a] != null) && (mapping[b] != null)) {\n                return mapping[a] - mapping[b];\n            } else if (mapping[a] != null) {\n                return -1;\n            } else if (mapping[b] != null) {\n                return 1;\n            } else if ((l_mapping[a] != null) && (l_mapping[b] != null)) {\n                return l_mapping[a] - l_mapping[b];\n            } else if (l_mapping[a] != null) {\n                return -1;\n            } else if (l_mapping[b] != null) {\n                return 1;\n            } else {\n                return naturalSort(a, b);\n            }\n        };\n    };\n\n    function getSort(sorters, attr) {\n        if (sorters != null) {\n            if ($.isFunction(sorters)) {\n                const sort = sorters(attr);\n                if ($.isFunction(sort)) {\n                    return sort;\n                }\n            } else if (sorters[attr] != null) {\n                return sorters[attr];\n            }\n        }\n        return naturalSort;\n    }\n\n    const filterByLength = (keys, length) => keys.filter(x => x.length === length);\n\n    const subarrays = array => array.map((d, i) => array.slice(0, i + 1));  // [1,2,3] => [[1], [1,2], [1,2,3]]\n\n    /*\n    Data Model class\n    */\n\n    class PivotData {\n        constructor(input, opts) {\n            this.arrSort = this.arrSort.bind(this);\n            this.sortKeys = this.sortKeys.bind(this);\n            this.getColKeys = this.getColKeys.bind(this);\n            this.getRowKeys = this.getRowKeys.bind(this);\n            this.getAggregator = this.getAggregator.bind(this);\n            if (opts == null) {\n                opts = {};\n            }\n            this.input = input;\n            if (!Array.isArray(opts.aggregator)) {\n                opts.aggregator = opts.aggregator != null ? opts.aggregator : aggregatorTemplates.count()();\n                opts.aggregator = [opts.aggregator];\n            }\n            this.aggregator = opts.aggregator != null ? opts.aggregator : [aggregatorTemplates.count()()];\n            this.aggregatorName = opts.aggregatorName != null ? opts.aggregatorName : 'Count';\n            this.colAttrs = opts.cols != null ? opts.cols : [];\n            this.rowAttrs = opts.rows != null ? opts.rows : [];\n            this.valAttrs = opts.vals != null ? opts.vals : [];\n            this.sorters = opts.sorters != null ? opts.sorters : {};\n            this.rowOrder = opts.rowOrder != null ? opts.rowOrder : 'key_a_to_z';\n            this.colOrder = opts.colOrder != null ? opts.colOrder : 'key_a_to_z';\n            this.derivedAttributes = opts.derivedAttributes != null ? opts.derivedAttributes : {};\n            this.filter = opts.filter != null ? opts.filter : (() => true);\n            this.tree = {};\n            this.rowKeys = [];\n            this.colKeys = [];\n            this.rowTotals = {};\n            this.colTotals = {};\n            this.allTotal = this.aggregator.map(agg => agg(this, [], []));\n            this.sorted = false;\n            this.aggregatorsLabel = opts.aggregatorsLabel != null ? opts.aggregatorsLabel : [];\n            this.grouping = opts.grouping != null ? opts.grouping : false;\n            this.rowGroupBefore = (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.rowGroupBefore : undefined) : true;\n            this.colGroupBefore = (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) != null ? (opts.grouping != null ? opts.grouping.colGroupBefore : undefined) : false;\n\n            if (this.aggregatorName != null) {\n                this.aggregators = [];\n                this.aggregatorName = Array.isArray(this.aggregatorName) ? this.aggregatorName : [this.aggregatorName];\n                for (let idx = 0; idx < this.aggregatorName.length; idx++) {\n                    const agg = this.aggregatorName[idx];\n                    this.aggregators.push({\n                        id: ++itemsId,\n                        value: agg,\n                        vals: (opts.vals != null ? opts.vals[idx] : undefined),\n                    });\n                    renameAggregators(this.aggregators);\n                }\n            }\n\n            // iterate through input, accumulating data for cells\n            PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (this.filter(record)) {\n                    return this.processRecord(record);\n                }\n            });\n        }\n\n        //can handle arrays or jQuery selections of tables\n        static forEachRecord(input, derivedAttributes, f) {\n            let addRecord;\n            if ($.isEmptyObject(derivedAttributes)) {\n                addRecord = f;\n            } else {\n                addRecord = function (record) {\n                    for (let k in derivedAttributes) {\n                        const v = derivedAttributes[k];\n                        const left = v(record);\n                        if (left != null) {\n                            record[k] = left;\n                        }\n                    }\n                    return f(record);\n                };\n            }\n\n            //if it's a function, have its calls us back\n            if ($.isFunction(input)) {\n                return input(addRecord);\n            } else if ($.isArray(input)) {\n                if ($.isArray(input[0])) { //array of arrays\n                    return (() => {\n                        const result = [];\n                        for (let i of Object.keys(input || {})) {\n                            const compactRecord = input[i];\n                            if (i > 0) {\n                                const record = {};\n                                for (let j of Object.keys(input[0] || {})) {\n                                    const k = input[0][j];\n                                    record[k] = compactRecord[j];\n                                }\n                                result.push(addRecord(record));\n                            }\n                        }\n                        return result;\n                    })();\n                } else { //array of objects\n                    return (() => {\n                        const result1 = [];\n                        for (let record of input) {\n                            result1.push(addRecord(record));\n                        }\n                        return result1;\n                    })();\n                }\n            } else if (input instanceof $) {\n                const tblCols = [];\n                $('thead > tr > th', input).each(function (i) {\n                    return tblCols.push($(this).text());\n                });\n                return $('tbody > tr', input).each(function (i) {\n                    const record = {};\n                    $('td', this).each(function (j) {\n                        return record[tblCols[j]] = $(this).text();\n                    });\n                    return addRecord(record);\n                });\n            } else {\n                throw new Error('unknown input format');\n            }\n        }\n\n        forEachMatchingRecord(criteria, callback) {\n            return PivotData.forEachRecord(this.input, this.derivedAttributes, record => {\n                if (!this.filter(record)) {\n                    return;\n                }\n                for (let k in criteria) {\n                    const v = criteria[k];\n                    if (v !== (record[k] != null ? record[k] : 'null')) {\n                        return;\n                    }\n                }\n                return callback(record);\n            });\n        }\n\n        arrSort(attrs, nulls_first) {\n\n            const sortersArr = [];\n            for (const a of attrs) {\n                sortersArr.push(getSort(this.sorters, a));\n            }\n\n            return function (a, b) {\n                for (let i of Object.keys(sortersArr || {})) {\n                    const sorter = sortersArr[i];\n                    const comparison = sorter(a[i], b[i], nulls_first);\n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            };\n        }\n\n        sortKeys() {\n            if (!this.sorted) {\n                this.sorted = true;\n                const v = (r, c) => this.getAggregator(r, c).value();\n                switch (this.rowOrder) {\n                    case 'value_a_to_z':\n                        this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n                        break;\n                    case 'value_z_to_a':\n                        this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n                        break;\n                    default:\n                        this.rowKeys.sort(this.arrSort(this.rowAttrs, this.rowGroupBefore));\n                }\n                switch (this.colOrder) {\n                    case 'value_a_to_z':\n                        return this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n                    case 'value_z_to_a':\n                        return this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n                    default:\n                        return this.colKeys.sort(this.arrSort(this.colAttrs, this.colGroupBefore));\n                }\n            }\n        }\n\n        getColKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.colKeys;\n            } else {\n                return filterByLength(this.colKeys, this.colAttrs.length);\n            }\n        }\n\n        getRowKeys(all_keys) {\n            if (all_keys == null) {\n                all_keys = false;\n            }\n            this.sortKeys();\n            if (all_keys) {\n                return this.rowKeys;\n            } else {\n                return filterByLength(this.rowKeys, this.rowAttrs.length);\n            }\n        }\n\n        processRecord(record) { //this code is called in a tight loop\n            let x;\n            let colKeys = [];\n            let rowKeys = [];\n            for (x of this.colAttrs) {\n                colKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            for (x of this.rowAttrs) {\n                rowKeys.push(record[x] != null ? record[x] : 'null');\n            }\n            colKeys = this.grouping && colKeys.length ? subarrays(colKeys) : [colKeys];\n            rowKeys = this.grouping && rowKeys.length ? subarrays(rowKeys) : [rowKeys];\n\n            this.aggregator.forEach((agg, id) => {\n                return this.allTotal[id].push(record);\n            });\n\n            const result = [];\n            for (let j in rowKeys) {\n                const rowKey = rowKeys[j];\n                const flatRowKey = rowKey.join(String.fromCharCode(0));\n\n                const result1 = [];\n                for (let i in colKeys) {\n                    const colKey = colKeys[i];\n                    const flatColKey = colKey.join(String.fromCharCode(0));\n\n                    if (rowKey.length !== 0) {\n                        if (!this.rowTotals[flatRowKey]) {\n                            this.rowKeys.push(rowKey);\n                            this.rowTotals[flatRowKey] = this.aggregator.map(agg => agg(this, rowKey, []));\n                        }\n                        this.rowTotals[flatRowKey].forEach((agg, id) => {\n                            if (!this.grouping || (colKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if (colKey.length !== 0) {\n                        if (!this.colTotals[flatColKey]) {\n                            this.colKeys.push(colKey);\n                            this.colTotals[flatColKey] = this.aggregator.map(agg => agg(this, [], colKey));\n                        }\n                        this.colTotals[flatColKey].forEach((agg, id) => {\n                            if (!this.grouping || (rowKey.length === 1)) {\n                                return agg.push(record);\n                            }\n                        });\n                    }\n\n                    if ((colKey.length !== 0) && (rowKey.length !== 0)) {\n                        if (!this.tree[flatRowKey]) {\n                            this.tree[flatRowKey] = {};\n                        }\n                        if (!this.tree[flatRowKey][flatColKey]) {\n                            this.tree[flatRowKey][flatColKey] = this.aggregator.map(agg => agg(this, rowKey, colKey));\n                        }\n                        result1.push(this.tree[flatRowKey][flatColKey].forEach((agg, id) => agg.push(record)));\n                    } else {\n                        result1.push(undefined);\n                    }\n                }\n                result.push(result1);\n            }\n            return result;\n        }\n\n        getAggregator(rowKey, colKey, id) {\n            let agg;\n            if (id == null) {\n                id = 0;\n            }\n            const flatRowKey = rowKey.join(String.fromCharCode(0));\n            const flatColKey = colKey.join(String.fromCharCode(0));\n            if ((rowKey.length === 0) && (colKey.length === 0)) {\n                agg = this.allTotal[id];\n            } else if (rowKey.length === 0) {\n                agg = this.colTotals[flatColKey] && this.colTotals[flatColKey][id];\n            } else if (colKey.length === 0) {\n                agg = this.rowTotals[flatRowKey] && this.rowTotals[flatRowKey][id];\n            } else {\n                agg = this.tree[flatRowKey][flatColKey] && this.tree[flatRowKey][flatColKey][id];\n            }\n            return agg != null ? agg : {\n                value() {\n                    return null;\n                }, format() {\n                    return '';\n                },\n            };\n        }\n    }\n\n    const renameAggregators = (aggregators) => aggregators.map((agg, id) =>\n        (agg.displayName = String.fromCharCode(97 + id).toUpperCase()));\n\n    //expose these to the outside world\n    $.pivotUtilities = {\n        aggregatorTemplates, aggregators: defaultAggregators, renderers, derivers, locales,\n        naturalSort, numberFormat, sortAs, PivotData,\n    };\n\n    /*\n    Default Renderer for hierarchical table layout\n    */\n\n    function pivotTableRenderer(pivotData, opts) {\n\n        let agg, aggregator, colKey, getClickHandler, i, id, j, td, th, totalAggregator, tr, val, x;\n        const defaults = {\n            table: {\n                clickCallback: null,\n                rowTotals: true,\n                colTotals: true,\n            },\n            localeStrings: {\n                totals: 'Totals',\n            },\n        };\n\n        opts = $.extend(true, {}, defaults, opts);\n\n        const {\n            colAttrs,\n        } = pivotData;\n        const {\n            rowAttrs,\n        } = pivotData;\n        const rowKeys = pivotData.getRowKeys(true);\n        const colKeys = pivotData.getColKeys(true);\n\n        if (opts.table.clickCallback) {\n            getClickHandler = function (value, rowValues, colValues) {\n                let attr, i;\n                const filters = {};\n                for (i of Object.keys(colAttrs || {})) {\n                    attr = colAttrs[i];\n                    if (colValues[i] != null) {\n                        filters[attr] = colValues[i];\n                    }\n                }\n                for (i of Object.keys(rowAttrs || {})) {\n                    attr = rowAttrs[i];\n                    if (rowValues[i] != null) {\n                        filters[attr] = rowValues[i];\n                    }\n                }\n                return e => opts.table.clickCallback(e, value, filters, pivotData);\n            };\n        }\n\n        const compactLayout = (opts.table.compactLayout != null ? opts.table.compactLayout : true) && pivotData.grouping;\n        const rowExpandHandler = compactLayout ? expandRowCol : pivotData.rowGroupBefore ? expandWithSpan : expandRowsGroupAfter;\n\n        const rowsExpandHandler = getExpandHandler(rowKeys, true, rowExpandHandler.bind(pivotData));\n        const colsExpandHandler = getExpandHandler(colKeys, false, expandWithSpan.bind(pivotData));\n\n        //now actually build the outpu\n        const result = document.createElement('table');\n        result.className = 'pvtTable';\n\n        //helper function for setting row/col-span in pivotTableRenderer\n        const spanSize = function (arr, i, j) {\n            let x;\n            if (i !== 0) {\n                let asc, end;\n                let noDraw = true;\n                for (x = 0, end = j, asc = 0 <= end; asc ? x <= end : x >= end; asc ? x++ : x--) {\n                    if (arr[i - 1][x] !== arr[i][x]) {\n                        noDraw = false;\n                    }\n                }\n                if (noDraw) {\n                    return -1; //do not draw cell\n                }\n            }\n            let len = 0;\n            while ((i + len) < arr.length) {\n                let asc1, end1;\n                let stop = false;\n                for (x = 0, end1 = j, asc1 = 0 <= end1; asc1 ? x <= end1 : x >= end1; asc1 ? x++ : x--) {\n                    if (arr[i][x] !== arr[i + len][x]) {\n                        stop = true;\n                    }\n                }\n                if (stop) {\n                    break;\n                }\n                len++;\n            }\n            return len;\n        };\n\n        //the first few rows are for col headers\n        const thead = document.createElement('thead');\n        for (j of Object.keys(colAttrs || {})) {\n            const c = colAttrs[j];\n            tr = document.createElement('tr');\n            if ((parseInt(j) === 0) && (rowAttrs.length !== 0)) {\n                th = document.createElement('th');\n                th.setAttribute('colspan', rowAttrs.length);\n                th.setAttribute('rowspan', colAttrs.length);\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            th.className = 'pvtAxisLabel';\n            th.textContent = c;\n            if (pivotData.grouping && (j < (colAttrs.length - 1))) {\n                th.onclick = getExpandAllHandler(pivotData, +j, false);\n                th.className += ` open level${j}`;\n            }\n            tr.appendChild(th);\n            for (i of Object.keys(colKeys || {})) {\n                colKey = colKeys[i];\n                x = spanSize(colKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtColLabel';\n                    th.className += ` col${pivotData.colGroupBefore ? +i : (+i + x) - 1}`;\n                    th.textContent = colKey[j];\n                    th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                    if ((parseInt(j) === (colAttrs.length - 1)) && (rowAttrs.length !== 0)) {\n                        th.setAttribute('rowspan', 2);\n                    }\n                    if (pivotData.grouping && (j < (colAttrs.length - 1)) && colKey[j]) {\n                        th.className += ' pvtSubtotal open';\n                        th.setAttribute('colspan', x * Math.max(1, pivotData.aggregator.length));\n                        th.onclick = colsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n            if ((parseInt(j) === 0) && opts.table.rowTotals) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', Math.max(1, pivotData.aggregator.length));\n                th.setAttribute('rowspan', colAttrs.length + (rowAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            thead.appendChild(tr);\n        }\n\n        //then a row for row header headers\n        if (rowAttrs.length !== 0) {\n            tr = document.createElement('tr');\n            for (i of Object.keys(rowAttrs || {})) {\n                const r = rowAttrs[i];\n                th = document.createElement('th');\n                th.className = 'pvtAxisLabel';\n                th.textContent = r;\n                if (pivotData.grouping && (i < (rowAttrs.length - 1))) {\n                    th.className += ` open level${i}`;\n                    th.onclick = getExpandAllHandler(pivotData, +i, true);\n                }\n                tr.appendChild(th);\n            }\n            th = document.createElement('th');\n            if (colAttrs.length === 0) {\n                th.className = 'pvtTotalLabel pvtRowTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', pivotData.aggregator.length);\n            }\n            tr.appendChild(th);\n            thead.appendChild(tr);\n        }\n        result.appendChild(thead);\n\n        //now the actual data rows, with their row headers and totals\n        const tbody = document.createElement('tbody');\n\n        if (pivotData.aggregatorsLabel && (pivotData.aggregatorsLabel.length > 1)) {\n            let lbl;\n            tr = document.createElement('tr');\n            th = document.createElement('th');\n            const colspan = rowAttrs.length + (colAttrs.length === 0 ? 0 : 1);\n            th.setAttribute('colspan', colspan);\n            tr.appendChild(th);\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (lbl of pivotData.aggregatorsLabel) {\n                    th = document.createElement('th');\n                    th.className = `pvtAggregatorLabel col${j}`;\n                    th.textContent = lbl;\n                    tr.appendChild(th);\n                }\n            }\n\n            for (lbl of pivotData.aggregatorsLabel) {\n                th = document.createElement('th');\n                th.className = 'pvtAggregatorLabel';\n                th.textContent = lbl;\n                tr.appendChild(th);\n            }\n\n            tbody.appendChild(tr);\n        }\n\n\n        for (i of Object.keys(rowKeys || {})) {\n            const rowKey = rowKeys[i];\n            tr = document.createElement('tr');\n            const rowGap = rowAttrs.length - rowKey.length;\n            tr.className = rowGap ? `pvtSubtotal level${rowKey.length}` : 'pvtData';\n            for (j of Object.keys(rowKey || {})) {\n                const txt = rowKey[j];\n                if (compactLayout && (j < (rowKey.length - 1))) {\n                    continue;\n                }\n                x = compactLayout ? 1 : spanSize(rowKeys, parseInt(i), parseInt(j));\n                if (x !== -1) {\n                    th = document.createElement('th');\n                    th.className = 'pvtRowLabel';\n                    th.className += ` row${pivotData.rowGroupBefore ? +i : (+i + x) - 1}`;\n                    th.textContent = txt;\n                    th.setAttribute('rowspan', x);\n                    if (compactLayout) {\n                        th.colSpan = rowAttrs.length;\n                        th.style.paddingLeft = 5 + (parseInt(j) * 20) + 'px';\n                    }\n                    if (pivotData.grouping && (j < (rowAttrs.length - 1))) {\n                        th.className += ' open';\n                        th.onclick = rowsExpandHandler;\n                    }\n                    tr.appendChild(th);\n                }\n            }\n\n            if (!compactLayout && rowGap) {\n                th = document.createElement('th');\n                th.colSpan = rowGap;\n                th.textContent = `Total (${rowKey[j]})`;\n                tr.appendChild(th);\n            }\n\n            if (colAttrs.length) {\n                th.colSpan++;\n            }\n\n            for (j of Object.keys(colKeys || {})) { //this is a tight loop\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    aggregator = pivotData.getAggregator(rowKey, colKey, id);\n                    val = aggregator.value(id);\n                    td = document.createElement('td');\n                    if (!rowGap) {\n                        td.className = 'pvtVal ';\n                    }\n                    td.className += `row${i} col${j}`;\n                    if (colAttrs.length - colKey.length) {\n                        td.className = `pvtSubtotal level${colKey.length} row${i} col${j}`;\n                    }\n                    td.textContent = aggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, colKey);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator(rowKey, [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtTotal rowTotal';\n                    td.textContent = totalAggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, rowKey, []);\n                    }\n                    td.setAttribute('data-for', 'row' + i);\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n\n        //finally, the row for col totals, and a grand total\n        if (opts.table.colTotals || (rowAttrs.length === 0)) {\n            tr = document.createElement('tr');\n            if (opts.table.colTotals || (rowAttrs.length === 0)) {\n                th = document.createElement('th');\n                th.className = 'pvtTotalLabel pvtColTotalLabel';\n                th.innerHTML = opts.localeStrings.totals;\n                th.setAttribute('colspan', rowAttrs.length + (colAttrs.length === 0 ? 0 : 1));\n                tr.appendChild(th);\n            }\n            for (j of Object.keys(colKeys || {})) {\n                colKey = colKeys[j];\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], colKey, id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = `pvtTotal colTotal col${j}`;\n                    if (colKey.length !== colAttrs.length) {\n                        td.className += ` pvtSubtotal level${colKey.length}`;\n                    }\n                    td.textContent = totalAggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], colKey);\n                    }\n                    td.setAttribute('data-for', 'col' + j);\n                    tr.appendChild(td);\n                }\n            }\n            if (opts.table.rowTotals || (colAttrs.length === 0)) {\n                for (id = 0; id < pivotData.aggregator.length; id++) {\n                    agg = pivotData.aggregator[id];\n                    totalAggregator = pivotData.getAggregator([], [], id);\n                    val = totalAggregator.value(id);\n                    td = document.createElement('td');\n                    td.className = 'pvtGrandTotal';\n                    td.textContent = totalAggregator.format(val);\n                    td.setAttribute('data-value', val);\n                    if (getClickHandler != null) {\n                        td.onclick = getClickHandler(val, [], []);\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        result.appendChild(tbody);\n\n        //squirrel this away for later\n        result.setAttribute('data-numrows', rowKeys.length);\n        result.setAttribute('data-numcols', colKeys.length);\n\n        return result;\n    }\n\n    /*\n    Pivot Table core: create PivotData object and call Renderer on it\n    */\n\n    $.fn.pivot = function (input, inputOpts, locale) {\n        let e;\n        if (locale == null) {\n            locale = 'en';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n        inputOpts = inputOpts || {};\n        const defaults = {\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            filter() {\n                return true;\n            },\n            aggregator: aggregatorTemplates.count()(),\n            aggregatorName: 'Count',\n            sorters: {},\n            derivedAttributes: {},\n            renderer: pivotTableRenderer,\n        };\n\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n\n        let result;\n        inputOpts.pivotData = null;\n        try {\n            const pivotData = new opts.dataClass(input, opts);\n            try {\n                result = opts.renderer(pivotData, opts.rendererOptions);\n                inputOpts.pivotData = pivotData;\n            } catch (error) {\n                e = error;\n                if (typeof console !== 'undefined' && console !== null) {\n                    console.error(e.stack);\n                }\n                result = $('<span>').html(opts.localeStrings.renderError);\n            }\n        } catch (error1) {\n            e = error1;\n            if (typeof console !== 'undefined' && console !== null) {\n                console.error(e.stack);\n            }\n            result = $('<span>').html(opts.localeStrings.computeError);\n        }\n\n        const x = this[0];\n        while (x.hasChildNodes()) {\n            x.removeChild(x.lastChild);\n        }\n        return this.append(result);\n    };\n\n    /*\n    Pivot Table UI: calls the Pivot Table core above with options set by user\n    */\n\n    $.fn.pivotUI = function (input, inputOpts, overwrite, locale) {\n        let opts;\n        let a, c;\n        if (overwrite == null) {\n            overwrite = false;\n        }\n        if (locale == null) {\n            locale = 'fr';\n        }\n        if ((locales[locale] == null)) {\n            locale = 'en';\n        }\n\n        const defaults = {\n            derivedAttributes: {},\n            aggregators: defaultAggregators,\n            renderers: locales[locale].renderers,\n            hiddenAttributes: [],\n            hiddenFromAggregators: [],\n            hiddenFromDragDrop: [],\n            menuLimit: 500,\n            cols: [], rows: [], vals: [],\n            rowOrder: 'key_a_to_z', colOrder: 'key_a_to_z',\n            dataClass: PivotData,\n            exclusions: {},\n            inclusions: {},\n            unusedAttrsVertical: 85,\n            autoSortUnusedAttrs: false,\n            onRefresh: null,\n            showUI: true,\n            filter() {\n                return true;\n            },\n            sorters: {},\n            multiple: true,\n            parametersActive: false,\n        };\n\n        let itemsId = 0;\n        let aggregators = [];\n        const localeStrings = $.extend(true, {}, locales.en.localeStrings, locales[locale].localeStrings);\n        const localeDefaults = {\n            rendererOptions: { localeStrings },\n            localeStrings,\n        };\n\n        const existingOpts = this.data('pivotUIOptions');\n        if ((existingOpts == null) || overwrite) {\n            opts = $.extend(true, {}, localeDefaults, $.extend({}, defaults, inputOpts));\n        } else {\n            opts = existingOpts;\n        }\n\n        if (!inputOpts?.aggregators && locales[locale].formatters) {\n            opts.aggregators = makeAggregators(\n                locales[locale].formatters.format,\n                locales[locale].formatters.formatInt,\n                locales[locale].formatters.formatPct);\n        }\n\n        try {\n            // do a first pass on the data to cache a materialized copy of any\n            // function-valued inputs and to compute dimension cardinalities\n            let attr, i, unusedAttrsVerticalAutoCutoff, x;\n            const attrValues = {};\n            const materializedInput = [];\n            let recordsProcessed = 0;\n            PivotData.forEachRecord(input, opts.derivedAttributes, function (record) {\n                let attr;\n                if (!opts.filter(record)) {\n                    return;\n                }\n                materializedInput.push(record);\n                for (attr of Object.keys(record || {})) {\n                    if ((attrValues[attr] == null)) {\n                        attrValues[attr] = {};\n                        if (recordsProcessed > 0) {\n                            attrValues[attr]['null'] = recordsProcessed;\n                        }\n                    }\n                }\n                for (attr in attrValues) {\n                    const value = record[attr] != null ? record[attr] : 'null';\n                    if (attrValues[attr][value] == null) {\n                        attrValues[attr][value] = 0;\n                    }\n                    attrValues[attr][value]++;\n                }\n                return recordsProcessed++;\n            });\n\n            const uiContainer = $('<div>').addClass('pvtUi');\n\n            const uiMenu = $('<div>').addClass('pvtUiMenu');\n            const uiParameters = $('<div>').addClass('pvtUiParameters');\n            const uiPivotContainer = $('<div>').addClass('pvtUiContainer');\n\n            const uiButtonColumns = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonColumns')\n                .addClass('active')\n                .text(localeStrings.colsLabel)\n                .on('click', function () {\n                    opts.parametersActive = !opts.parametersActive;\n                    if (opts.parametersActive) {\n                        uiButtonColumns.addClass('active');\n                        return uiParameters.show();\n                    } else {\n                        uiButtonColumns.removeClass('active');\n                        return uiParameters.hide();\n                    }\n                })\n                .appendTo(uiMenu);\n\n            const uiButtonGroups = $('<div>')\n                .addClass('pvtUiVerticalButton')\n                .addClass('pvtUiButtonGroups')\n                .text(localeStrings.groupsLabel)\n                .on('click', function () {\n                    if (opts.grouping) {\n                        uiButtonGroups.removeClass('active');\n                        opts.grouping = false;\n                    } else {\n                        uiButtonGroups.addClass('active');\n                        opts.grouping = {\n                            colGroupBefore: false,\n                        };\n                    }\n                    return refresh();\n                })\n                .appendTo(uiMenu);\n\n            uiContainer\n                .append(uiMenu)\n                .append(uiParameters)\n                .append(uiPivotContainer);\n\n            //# Render type\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rendererLabel);\n            let pvtRenderType = $('<div>')\n                .addClass('pvtRendererType')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n            const renderer = $('<select>')\n                .addClass('pvtRenderer')\n                .appendTo(pvtRenderType)\n                .bind('change', () => refresh()); //capture reference\n            for (x of Object.keys(opts.renderers || {})) {\n                $('<option>').val(x).html(x).appendTo(renderer);\n            }\n\n\n            //axis list, including the double click menu\n            const unused = $('<div>').addClass('pvtAxisContainer pvtUnused');\n            const shownAttributes = [];\n            for (a in attrValues) {\n                if (!opts.hiddenAttributes.includes(a)) {\n                    shownAttributes.push(a);\n                }\n            }\n            const shownInAggregators = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromAggregators.includes(c)) {\n                    shownInAggregators.push(c);\n                }\n            }\n            const shownInDragDrop = [];\n            for (c of shownAttributes) {\n                if (!opts.hiddenFromDragDrop.includes(c)) {\n                    shownInDragDrop.push(c);\n                }\n            }\n\n            let unusedAttrsVerticalAutoOverride = false;\n            if (opts.unusedAttrsVertical === 'auto') {\n                unusedAttrsVerticalAutoCutoff = 120; // legacy support\n            } else {\n                unusedAttrsVerticalAutoCutoff = parseInt(opts.unusedAttrsVertical);\n            }\n\n            if (!isNaN(unusedAttrsVerticalAutoCutoff)) {\n                let attrLength = 0;\n                for (a of shownInDragDrop) {\n                    attrLength += a.length;\n                }\n                unusedAttrsVerticalAutoOverride = attrLength > unusedAttrsVerticalAutoCutoff;\n            }\n\n            for (i of Object.keys(shownInDragDrop || {})) {\n                attr = shownInDragDrop[i];\n                const values = [];\n                for (const v in attrValues[attr]) {\n                    values.push(v);\n                }\n                let hasExcludedItem = false;\n                const valueList = $('<div>').addClass('pvtFilterBox').hide();\n\n                valueList.append($('<h4>').append(\n                        $('<span>').text(attr),\n                        $('<span>').addClass('count').text(`(${values.length})`),\n                    ),\n                );\n                if (values.length > opts.menuLimit) {\n                    valueList.append($('<p>').html(opts.localeStrings.tooMany));\n                } else {\n                    if (values.length > 5) {\n                        const controls = $('<p>').appendTo(valueList);\n                        const sorter = getSort(opts.sorters, attr);\n                        const placeholder = opts.localeStrings.filterResults;\n                        $('<input>', { type: 'text' }).appendTo(controls)\n                            .attr({ placeholder, class: 'pvtSearch' })\n                            .bind('keyup', function () {\n                                const filter = $(this).val().toLowerCase().trim();\n                                const accept_gen = (prefix, accepted) => (function (v) {\n                                    const real_filter = filter.substring(prefix.length).trim();\n                                    if (real_filter.length === 0) {\n                                        return true;\n                                    }\n                                    let needle = Math.sign(sorter(v.toLowerCase(), real_filter));\n                                    return accepted.includes(needle);\n                                });\n                                const accept =\n                                    filter.indexOf('>=') === 0 ? accept_gen('>=', [1, 0])\n                                        : filter.indexOf('<=') === 0 ? accept_gen('<=', [-1, 0])\n                                            : filter.indexOf('>') === 0 ? accept_gen('>', [1])\n                                                : filter.indexOf('<') === 0 ? accept_gen('<', [-1])\n                                                    : filter.indexOf('~') === 0 ? function (v) {\n                                                            if (filter.substring(1).trim().length === 0) {\n                                                                return true;\n                                                            }\n                                                            return v.toLowerCase().match(filter.substring(1));\n                                                        }\n                                                        : v => v.toLowerCase().indexOf(filter) !== -1;\n\n                                return valueList.find('.pvtCheckContainer p label span.value').each(function () {\n                                    if (accept($(this).text())) {\n                                        return $(this).parent().parent().show();\n                                    } else {\n                                        return $(this).parent().parent().hide();\n                                    }\n                                });\n                            });\n                        controls.append($('<br>'));\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectAll)\n                            .bind('click', function () {\n                                valueList.find('input:visible:not(:checked)')\n                                    .prop('checked', true).toggleClass('changed');\n                                return false;\n                            });\n                        $('<button>', { type: 'button' }).appendTo(controls)\n                            .html(opts.localeStrings.selectNone)\n                            .bind('click', function () {\n                                valueList.find('input:visible:checked')\n                                    .prop('checked', false).toggleClass('changed');\n                                return false;\n                            });\n                    }\n\n                    const checkContainer = $('<div>').addClass('pvtCheckContainer').appendTo(valueList);\n\n                    for (let value of values.sort(getSort(opts.sorters, attr))) {\n                        const valueCount = attrValues[attr][value];\n                        const filterItem = $('<label>');\n                        let filterItemExcluded = false;\n                        if (opts.inclusions[attr]) {\n                            filterItemExcluded = (!opts.inclusions[attr].includes(value));\n                        } else if (opts.exclusions[attr]) {\n                            filterItemExcluded = (opts.exclusions[attr].includes(value));\n                        }\n                        if (!hasExcludedItem) {\n                            hasExcludedItem = filterItemExcluded;\n                        }\n                        $('<input>')\n                            .attr('type', 'checkbox').addClass('pvtFilter')\n                            .attr('checked', !filterItemExcluded).data('filter', [attr, value])\n                            .appendTo(filterItem)\n                            .bind('change', function () {\n                                return $(this).toggleClass('changed');\n                            });\n                        filterItem.append($('<span>').addClass('value').text(value));\n                        filterItem.append($('<span>').addClass('count').text('(' + valueCount + ')'));\n                        checkContainer.append($('<p>').append(filterItem));\n                    }\n                }\n\n                const closeFilterBox = function () {\n                    if (valueList.find('[type=\\'checkbox\\']').length >\n                        valueList.find('[type=\\'checkbox\\']:checked').length) {\n                        attrElem.addClass('pvtFilteredAttribute');\n                    } else {\n                        attrElem.removeClass('pvtFilteredAttribute');\n                    }\n\n                    valueList.find('.pvtSearch').val('');\n                    valueList.find('.pvtCheckContainer p').show();\n                    return valueList.hide();\n                };\n\n\n                const finalButtons = $('<p>').appendTo(valueList);\n\n                if (values.length <= opts.menuLimit) {\n                    $('<button>', { type: 'button' }).text(opts.localeStrings.apply)\n                        .appendTo(finalButtons).bind('click', function () {\n                        if (valueList.find('.changed').removeClass('changed').length) {\n                            refresh();\n                        }\n                        return closeFilterBox();\n                    });\n                }\n\n                $('<button>', { type: 'button' }).text(opts.localeStrings.cancel)\n                    .appendTo(finalButtons).bind('click', function () {\n                    valueList.find('.changed:checked')\n                        .removeClass('changed').prop('checked', false);\n                    valueList.find('.changed:not(:checked)')\n                        .removeClass('changed').prop('checked', true);\n                    return closeFilterBox();\n                });\n\n                const triangleLink = $('<span>').addClass('pvtTriangle')\n                    .html(' &#x25BE;').bind('click', function (e) {\n                        const { left, top } = $(e.currentTarget).position();\n                        return valueList.css({ left: left + 10, top: top + 10 }).show();\n                    });\n\n                const attrElem = $('<li>').addClass(`axis_${i}`)\n                    .append($('<span>').addClass('pvtAttr').text(attr).data('attrName', attr).append(triangleLink));\n\n                if (hasExcludedItem) {\n                    attrElem.addClass('pvtFilteredAttribute');\n                }\n                unused.append(attrElem).append(valueList);\n            }\n\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.valuesLabel);\n\n            //aggregator menu and value area\n            const divAggregator = $('<div>')\n                .addClass('pvtAggregatorChoose')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            const aggregator = $('<select>')\n                .addClass('pvtAggregator')\n                .appendTo(divAggregator)\n                .bind('change', () => {\n                    if (!opts.multiple) {\n                        this.find('.pvtVals .pvtAttrDropdown').each(function () {\n                            return this.remove();\n                        });\n                        aggregators = [{ id: 1, value: aggregator.val() }];\n                        return refresh();\n                    }\n                }); //capture reference\n\n            for (x of Object.keys(opts.aggregators || {})) {\n                aggregator.append($('<option>').val(x).html(locales[locale].localeStrings[x] || locales['en'].localeStrings[x] || x));\n            }\n\n            if (opts.multiple) {\n                $('<a>', { role: 'button' })\n                    .addClass('pvtAddAggregator')\n                    .addClass('pvtToolButton')\n                    .appendTo(divAggregator)\n                    .html('+')\n                    .bind('click', function () {\n                        aggregators.push({ id: ++itemsId, value: aggregator.val() });\n                        renameAggregators(aggregators);\n                        return refresh();\n                    });\n            }\n\n            const ordering = {\n                key_a_to_z: { rowSymbol: '&varr;', colSymbol: '&harr;', next: 'value_a_to_z' },\n                value_a_to_z: { rowSymbol: '&darr;', colSymbol: '&rarr;', next: 'value_z_to_a' },\n                value_z_to_a: { rowSymbol: '&uarr;', colSymbol: '&larr;', next: 'key_a_to_z' },\n            };\n\n            const rowOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtRowOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.rowOrder).html(ordering[opts.rowOrder].rowSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].rowSymbol);\n                    return refresh();\n                });\n\n            const colOrderArrow = $('<a>', { role: 'button' })\n                .addClass('pvtColOrder')\n                .addClass('pvtToolButton')\n                .appendTo(divAggregator)\n                .data('order', opts.colOrder).html(ordering[opts.colOrder].colSymbol)\n                .bind('click', function () {\n                    $(this).data('order', ordering[$(this).data('order')].next);\n                    $(this).html(ordering[$(this).data('order')].colSymbol);\n                    return refresh();\n                });\n\n            const pvVals = $('<div>').addClass('pvtVals')\n                .addClass('pvtParameter')\n                .appendTo(uiParameters);\n\n            uiParameters.append(pvVals);\n\n            // Available fields\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.fieldsLabel);\n\n            uiParameters.append(unused);\n\n            //column axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.colsLabel);\n\n            $('<div>').addClass('pvtAxisContainer pvtCols').appendTo(uiParameters);\n\n            //row axes\n            $('<div>')\n                .addClass('pvtParameterLabel')\n                .appendTo(uiParameters)\n                .text(localeStrings.rowsLabel);\n            $('<div>').addClass('pvtAxisContainer pvtRows').appendTo(uiParameters);\n\n            //the actual pivot table container\n            const pivotTable = $('<div>')\n                .addClass('pvtRendererArea')\n                .appendTo(uiPivotContainer);\n\n            //render the UI in its default state\n            this.html(uiContainer);\n\n            if (!opts.parametersActive) {\n                uiButtonColumns.removeClass('active');\n                uiParameters.hide();\n            }\n\n            //set up the UI initial state as requested by moving elements around\n\n            let initialRender = true;\n\n            //set up for refreshing\n            const refreshDelayed = () => {\n                let vals;\n                const subopts = {\n                    derivedAttributes: opts.derivedAttributes,\n                    localeStrings: opts.localeStrings,\n                    rendererOptions: opts.rendererOptions,\n                    sorters: opts.sorters,\n                    cols: [], rows: [],\n                    dataClass: opts.dataClass,\n                    grouping: opts.grouping,\n                };\n\n                this.find('.pvtRows li span.pvtAttr').each(function () {\n                    return subopts.rows.push($(this).data('attrName'));\n                });\n                this.find('.pvtCols li span.pvtAttr').each(function () {\n                    return subopts.cols.push($(this).data('attrName'));\n                });\n\n                let numInputsToProcess = 0;\n\n                const aggVals = [];\n                let j = 0, idx = j;\n                for (; j < aggregators.length; j++, idx = j) {\n                    let aggregatorType;\n                    const agg = aggregators[idx];\n                    if (typeof agg === 'object') {\n                        aggregatorType = agg.value;\n                    }\n                    const aggIdx = agg.id;\n                    const initialVals = agg.vals;\n\n                    const left = opts.aggregators[aggregatorType]([])().numInputs;\n                    if (left != null) {\n                        numInputsToProcess = left;\n                    } else {\n                        numInputsToProcess = 0;\n                    }\n                    vals = [];\n                    this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                        if (numInputsToProcess !== 0) {\n                            numInputsToProcess--;\n                            if ($(this).val() !== '') {\n                                return vals.push($(this).val());\n                            }\n                        }\n                    });\n\n\n                    const pvtVals = this.find('.pvtVals');\n                    let container = this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx);\n                    const found = container.length > 0;\n                    if (opts.multiple) {\n                        let labelAggregator;\n                        if (!found) {\n                            container = $('<div>')\n                                .addClass('pvtAttrDropdownContainer')\n                                .addClass('pvtAttrDropdownContainer' + aggIdx)\n                                .appendTo(pvtVals);\n                            labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                            $('<label>')\n                                .addClass('pvtAttrDropdown')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .appendTo(container)\n                                .html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                            initialRender = true;\n                        }\n\n                        if (!initialRender) {\n                            this.find('.pvtVals .pvtAttrDropdownContainer' + aggIdx + ' label.pvtAttrDropdown')\n                                .each(function () {\n                                    labelAggregator = locales[locale].localeStrings[aggregatorType] || locales['en'].localeStrings[aggregatorType] || aggregatorType;\n                                    return $(this).html('<b>' + agg.displayName + '</b>) ' + labelAggregator);\n                                });\n                        }\n                    } else {\n                        container = pvtVals;\n                    }\n\n                    if (numInputsToProcess !== 0) {\n                        let asc, end;\n                        for (x = 0, end = numInputsToProcess, asc = 0 <= end; asc ? x < end : x > end; asc ? x++ : x--) {\n                            const newDropdown = $('<select>')\n                                .addClass('pvtAttrDropdown' + aggIdx)\n                                .addClass('pvtAttrDropdown')\n                                .append($('<option>'))\n                                .bind('change', () => refresh());\n                            for (attr of shownInAggregators) {\n                                newDropdown.append($('<option>').val(attr).text(attr));\n                            }\n                            container.append(newDropdown);\n                        }\n                    }\n\n\n                    if (opts.multiple && !found) {\n                        $('<a>')\n                            .html('x')\n                            .addClass('pvtRemoveAggregator')\n                            .addClass('pvtToolButton')\n                            .addClass('pvtAttrDropdown' + aggIdx)\n                            .appendTo(container)\n                            .bind('click', (function () {\n                                    this.instance.find('.pvtVals .pvtAttrDropdownContainer' + this.aggIdx).remove();\n                                    idx = aggregators.findIndex(agg => agg.id === this.aggIdx);\n                                    aggregators.splice(idx, 1);\n                                    renameAggregators(aggregators);\n                                    return refresh();\n                                }).bind({ instance: this, aggIdx }),\n                            );\n                    }\n\n                    if (initialRender) {\n                        vals = initialVals != null ? initialVals : opts.vals;\n                        i = 0;\n                        this.find('.pvtVals select.pvtAttrDropdown' + aggIdx).each(function () {\n                            $(this).val(vals[i]);\n                            return i++;\n                        });\n                        initialRender = false;\n                    }\n\n                    aggVals.push(vals);\n                }\n\n                subopts.aggregatorName = aggregators.map(agg => agg.value);\n                subopts.vals = aggVals;\n                subopts.aggregator = aggregators.map((agg, i) => opts.aggregators[agg.value](aggVals[i]));\n                subopts.renderer = opts.renderers[renderer.val()];\n                subopts.rowOrder = rowOrderArrow.data('order');\n                subopts.colOrder = colOrderArrow.data('order');\n                if (opts.multiple) {\n                    subopts.aggregatorsLabel = aggregators.map(agg => agg.displayName);\n                }\n\n                //construct filter here\n                const exclusions = {};\n                this.find('input.pvtFilter').not(':checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        return exclusions[filter[0]].push(filter[1]);\n                    } else {\n                        return exclusions[filter[0]] = [filter[1]];\n                    }\n                });\n                //include inclusions when exclusions present\n                const inclusions = {};\n                this.find('input.pvtFilter:checked').each(function () {\n                    const filter = $(this).data('filter');\n                    if (exclusions[filter[0]] != null) {\n                        if (inclusions[filter[0]] != null) {\n                            return inclusions[filter[0]].push(filter[1]);\n                        } else {\n                            return inclusions[filter[0]] = [filter[1]];\n                        }\n                    }\n                });\n\n                subopts.filter = function (record) {\n                    if (!opts.filter(record)) {\n                        return false;\n                    }\n                    for (let k in exclusions) {\n                        const excludedItems = exclusions[k];\n                        if (excludedItems.includes('' + (record[k] != null ? record[k] : 'null'))) {\n                            return false;\n                        }\n                    }\n                    return true;\n                };\n\n                pivotTable.pivot(materializedInput, subopts);\n                const pivotUIOptions = $.extend({}, opts, {\n                        cols: subopts.cols,\n                        rows: subopts.rows,\n                        colOrder: subopts.colOrder,\n                        rowOrder: subopts.rowOrder,\n                        vals: aggVals,\n                        exclusions,\n                        inclusions,\n                        inclusionsInfo: inclusions, //duplicated for backwards-compatibility\n                        aggregatorName: aggregators.map(agg => agg.value),\n                        rendererName: renderer.val(),\n                    },\n                );\n\n                const currentPivotData = subopts.pivotData;\n                delete subopts.pivotData;\n                this.data('pivotUIOptions', pivotUIOptions);\n\n                // if requested, make sure unused columns are in alphabetical order\n                if (opts.autoSortUnusedAttrs) {\n                    const unusedAttrsContainer = this.find('td.pvtUnused.pvtAxisContainer');\n                    $(unusedAttrsContainer).children('li')\n                        .sort((a, b) => naturalSort($(a).text(), $(b).text()))\n                        .appendTo(unusedAttrsContainer);\n                }\n\n                pivotTable.css('opacity', 1);\n                if (opts.onRefresh != null) {\n                    return opts.onRefresh(pivotUIOptions, currentPivotData);\n                }\n            };\n\n            const refresh = () => {\n                pivotTable.css('opacity', 0.5);\n                return setTimeout(refreshDelayed, 10);\n            };\n\n            for (x of opts.cols) {\n                this.find('.pvtCols').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            for (x of opts.rows) {\n                this.find('.pvtRows').append(this.find(`.axis_${$.inArray(x, shownInDragDrop)}`));\n            }\n            if (opts.aggregatorName != null) {\n                if (opts.multiple) {\n                    opts.aggregatorName = Array.isArray(opts.aggregatorName) ? opts.aggregatorName : [opts.aggregatorName];\n                    for (let idx = 0; idx < opts.aggregatorName.length; idx++) {\n                        const agg = opts.aggregatorName[idx];\n                        aggregators.push({\n                            id: ++itemsId,\n                            value: agg,\n                            vals: (opts.vals != null ? opts.vals[idx] : undefined),\n                        });\n                        renameAggregators(aggregators);\n                    }\n                } else {\n                    this.find('.pvtVals').append(this.find('.pvtAttrDropdown'));\n                    this.find('.pvtAggregator').val(opts.aggregatorName).change();\n                }\n            } else {\n                this.find('.pvtAggregator').change();\n            }\n            if (opts.rendererName != null) {\n                this.find('.pvtRenderer').val(opts.rendererName);\n            }\n\n            if (!opts.showUI) {\n                this.find('.pvtUiCell').hide();\n            }\n\n            //the very first refresh will actually display the table\n            refresh();\n\n            this.find('.pvtAxisContainer').sortable({\n                update(e, ui) {\n                    if ((ui.sender == null)) {\n                        return refresh();\n                    }\n                },\n                connectWith: this.find('.pvtAxisContainer'),\n                items: 'li',\n                placeholder: 'pvtPlaceholder',\n            });\n        } catch (error) {\n            console.error(error);\n            this.html(opts.localeStrings.uiRenderError);\n        }\n        return this;\n    };\n\n    /*\n    Heatmap post-processing\n    */\n\n    $.fn.heatmap = function (scope, opts) {\n        if (scope == null) {\n            scope = 'heatmap';\n        }\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        // given a series of values\n        // must return a function to map a given value to a CSS color\n        let colorScaleGenerator = opts?.heatmap?.colorScaleGenerator;\n        if (colorScaleGenerator == null) {\n            colorScaleGenerator = function (values) {\n                const min = Math.min(...(values || []));\n                const max = Math.max(...(values || []));\n                return function (x) {\n                    const nonRed = 255 - Math.round((255 * (x - min)) / (max - min));\n                    return `rgb(255,${nonRed},${nonRed})`;\n                };\n            };\n        }\n\n        const heatmapper = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            const colorScale = colorScaleGenerator(values);\n            return forEachCell((x, elem) => elem.css('background-color', colorScale(x)));\n        };\n\n        switch (scope) {\n            case 'heatmap':\n                heatmapper('.pvtVal');\n                break;\n            case 'rowheatmap':\n                for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n                    heatmapper(`.pvtVal.row${i}`);\n                }\n                break;\n            case 'colheatmap':\n                for (let j = 0, end1 = numCols, asc1 = 0 <= end1; asc1 ? j < end1 : j > end1; asc1 ? j++ : j--) {\n                    heatmapper(`.pvtVal.col${j}`);\n                }\n                break;\n        }\n\n        heatmapper('.pvtTotal.rowTotal');\n        heatmapper('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Barchart post-processing\n    */\n\n    $.fn.barchart = function (opts) {\n        const numRows = this.data('numrows');\n        const numCols = this.data('numcols');\n\n        const barcharter = scope => {\n            const forEachCell = f => {\n                return this.find(scope).each(function () {\n                    const x = $(this).data('value');\n                    if ((x != null) && isFinite(x)) {\n                        return f(x, $(this));\n                    }\n                });\n            };\n\n            const values = [];\n            forEachCell(x => values.push(x));\n            let max = Math.max(...(values || []));\n            if (max < 0) {\n                max = 0;\n            }\n            let range = max;\n            const min = Math.min(...(values || []));\n            if (min < 0) {\n                range = max - min;\n            }\n            const scaler = x => (100 * x) / (1.4 * range);\n            return forEachCell(function (x, elem) {\n                const text = elem.text();\n                const wrapper = $('<div>').css({\n                    'position': 'relative',\n                    'height': '55px',\n                });\n                let bgColor = 'gray';\n                let bBase = 0;\n                if (min < 0) {\n                    bBase = scaler(-min);\n                }\n                if (x < 0) {\n                    bBase += scaler(x);\n                    bgColor = 'darkred';\n                    x = -x;\n                }\n                wrapper.append($('<div>').css({\n                        'position': 'absolute',\n                        'bottom': bBase + '%',\n                        'left': 0,\n                        'right': 0,\n                        'height': scaler(x) + '%',\n                        'background-color': bgColor,\n                    }),\n                );\n                wrapper.append($('<div>').text(text).css({\n                        'position': 'relative',\n                        'padding-left': '5px',\n                        'padding-right': '5px',\n                    }),\n                );\n\n                return elem.css({ 'padding': 0, 'padding-top': '5px', 'text-align': 'center' }).html(wrapper);\n            });\n        };\n\n        for (let i = 0, end = numRows, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n            barcharter(`.pvtVal.row${i}`);\n        }\n        barcharter('.pvtTotal.colTotal');\n\n        return this;\n    };\n\n    /*\n    Grouping fold/expand rows and cols\n    */\n\n    const childIndex = el => Array.prototype.indexOf.call(el.parentNode.children, el);\n\n    const childKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const len = keys[n].length;\n\n        const result = [];\n        n = n + up;\n        let key = keys[n];\n        while (key && key.length > len) {\n            if (key.length === (len + 1)) {\n                result.push(n);\n            } else {\n                continue;\n            }\n            n = n + up;\n            key = keys[n];\n        }\n        return result;\n    };\n\n    const parentKeysIndices = function (keys, n) {\n        const up = keys[0].length === 1 ? 1 : -1;\n        const result = [];\n        let len = keys[n].length;\n        while (len > 1) {\n            let key;\n            n = n - up;\n            key = keys[n];\n            while (key && key.length >= len) {\n                n = n - up;\n                key = keys[n];\n            }\n            result.push(n);\n\n            len = keys[n].length;\n        }\n        return result;\n    };\n\n    const levelKeysIndices = (keys, level) => (keys.filter(d => d.length === level)).map(keys.indexOf.bind(keys));\n\n    const getAxis = function (table, rows, level) {\n        if (rows) {\n            return table.find(`thead tr:last-child th.pvtAxisLabel:nth-of-type(${level})`);\n        } else {\n            return table.find(`thead tr:nth-child(${level}) th.pvtAxisLabel`);\n        }\n    };\n\n    const getHeader = (table, rows, n) => table.find(rows ? `tbody tr th.row${n}` : `thead th.col${n}`);\n\n    const rowGetter = function (table) {\n        const selecttion = table.find('tbody tr');\n        return n => $(selecttion[n]);\n    };\n\n    const colGetter = function (table) {\n        const selecttion = table.find('tr');\n        return n => selecttion.find(`.col${n}`);\n    };\n\n    const showHide = function (getter, keys, nth, offset, show) {\n        const object = childKeysIndices(keys, nth);\n        for (let i in object) {\n            const n = object[i];\n            const row = getter(n + offset);\n            const fn = show ? $.fn.show : $.fn.hide;\n            fn.call(row);\n            if (!row.hasClass('collapsed')) {\n                showHide(getter, keys, n, offset, show);\n            }\n        }\n        return true;\n    };\n\n    const expandRowsGroupAfter = function (cell, rows, keys, nth) {\n        const table = $(cell).closest('table');\n        const initIndex = childIndex(cell.parentNode);\n        const getter = rowGetter(table);\n        const row = getter(nth);\n\n        const insertPoint = row.hasClass('collapsed') ? getter(cell._old) : row;\n        if (!row.hasClass('collapsed')) {\n            cell._old = childIndex(cell.parentNode);\n        }\n        insertPoint.prepend(cell);\n\n        const object = parentKeysIndices(keys, nth);\n        for (let i in object) {\n            const p = object[i];\n            const parent = (getHeader(table, rows, p))[0];\n            const parentIndex = childIndex(parent.parentNode);\n            parent._old = parent._old != null ? parent._old : parentIndex;\n            if ((parent._old === initIndex) && (parent.rowSpan === 1)) {\n                parent._old -= initIndex - childIndex(cell.parentNode);\n            }\n\n            if (initIndex === parentIndex) {\n                insertPoint.prepend(parent);\n            }\n        }\n\n        return expandWithSpan(cell, rows, keys, nth);\n    };\n\n    const expandRowCol = function (cell, rows, keys, nth, parent) {\n        const table = $(cell).closest('table');\n        const getter = rows ? rowGetter(table) : colGetter(table);\n        const span = rows ? 'rowSpan' : 'colSpan';\n\n        const offset = rows && (this.aggregator.length > 1) ? 1 : 0;\n        if ((parent != null ? parent[span] : undefined) !== 1) {\n            showHide(getter, keys, nth, offset, getter(nth + offset).hasClass('collapsed'));\n        }\n        getter(nth + offset).toggleClass('collapsed');\n        return $(cell).toggleClass('open close');\n    };\n\n    const expandAll = function (pivotData, table, level, rows, expand) {\n        let i;\n        if (expand && (level > 1)) {\n            getAxis(table, rows, level - 1).removeClass('close').addClass('open');\n            expandAll(pivotData, table, level - 1, rows, expand);\n        }\n\n        const levels = (rows ? pivotData.rowAttrs : pivotData.colAttrs).length - 1;\n        if (!expand && (level < levels)) {\n            let asc, end, start;\n            for (start = level + 1, i = start, end = levels, asc = start <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\n                getAxis(table, rows, i).removeClass('open').addClass('close');\n            }\n        }\n\n        const keys = rows ? pivotData.rowKeys : pivotData.colKeys;\n        const object = levelKeysIndices(keys, level);\n        for (i in object) {\n            const n = object[i];\n            const el = getHeader(table, rows, n);\n            if (expand === el.hasClass('close')) {\n                el.trigger('click');\n            }\n        }\n        return null;\n    };\n\n    const getExpandHandler = (keys, rows, handler) => (function (ev) {\n        const match = ev.target.className.match(rows ? /row(\\d+)/ : /col(\\d+)/);\n        if (match) {\n            return handler(ev.target, rows, keys, +match[1]);\n        }\n    });\n\n    return getExpandAllHandler = (pivotData, level, rows) => (function (ev) {\n        expandAll(pivotData, $(ev.target).closest('table'), level + 1, rows, $(ev.target).hasClass('close'));\n        return $(ev.target).toggleClass('open close');\n    });\n})(jQuery);\n\n"],"mappings":"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","ignoreList":[]}